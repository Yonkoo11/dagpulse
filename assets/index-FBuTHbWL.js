(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const un=!1;var ar=Array.isArray,ls=Array.prototype.indexOf,et=Array.prototype.includes,Wt=Array.from,lr=Object.defineProperty,St=Object.getOwnPropertyDescriptor,cr=Object.getOwnPropertyDescriptors,cs=Object.prototype,fs=Array.prototype,Sn=Object.getPrototypeOf,zn=Object.isExtensible;const Ze=()=>{};function us(e){return e()}function dn(e){for(var t=0;t<e.length;t++)e[t]()}function fr(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const K=2,qt=4,Bt=8,ur=1<<24,Ce=16,ge=32,je=64,En=128,le=512,F=1024,G=2048,_e=4096,re=8192,Te=16384,Mn=32768,tt=65536,Ln=1<<17,dr=1<<18,it=1<<19,hr=1<<20,Se=1<<25,Oe=32768,hn=1<<21,Cn=1<<22,De=1<<23,Je=Symbol("$state"),ds=Symbol(""),Ve=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function hs(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function vs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ps(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function _s(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function gs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function bs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ms(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ws(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ys(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ks(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ss=1,Es=2,vr=4,Ms=8,Cs=16,As=2,q=Symbol(),Bs="http://www.w3.org/1999/xhtml";function Ts(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function pr(e){return e===this.v}function _r(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function gr(e){return!_r(e,this.v)}let Tt=!1,Ds=!1;function Ps(){Tt=!0}let X=null;function nt(e){X=e}function at(e,t=!1,n){X={p:X,i:!1,c:null,e:null,s:e,x:null,l:Tt&&!t?{s:null,u:null,$:[]}:null}}function lt(e){var t=X,n=t.e;if(n!==null){t.e=null;for(var r of n)Rr(r)}return t.i=!0,X=t.p,{}}function ct(){return!Tt||X!==null&&X.l===null}let We=[];function Is(){var e=We;We=[],dn(e)}function Ee(e){if(We.length===0){var t=We;queueMicrotask(()=>{t===We&&Is()})}We.push(e)}function br(e){var t=S;if(t===null)return y.f|=De,e;if((t.f&Mn)===0){if((t.f&En)===0)throw e;t.b.error(e)}else rt(e,t)}function rt(e,t){for(;t!==null;){if((t.f&En)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Rs=-7169;function $(e,t){e.f=e.f&Rs|t}function An(e){(e.f&le)!==0||e.deps===null?$(e,F):$(e,_e)}function mr(e){if(e!==null)for(const t of e)(t.f&K)===0||(t.f&Oe)===0||(t.f^=Oe,mr(t.deps))}function xr(e,t,n){(e.f&G)!==0?t.add(e):(e.f&_e)!==0&&n.add(e),mr(e.deps),$(e,F)}const Ft=new Set;let T=null,de=null,ie=[],Bn=null,vn=!1;class Pe{committed=!1;current=new Map;previous=new Map;#t=new Set;#a=new Set;#e=0;#o=0;#i=null;#r=new Set;#n=new Set;#s=new Map;is_fork=!1;#l=!1;is_deferred(){return this.is_fork||this.#o>0}skip_effect(t){this.#s.has(t)||this.#s.set(t,{d:[],m:[]})}unskip_effect(t){var n=this.#s.get(t);if(n){this.#s.delete(t);for(var r of n.d)$(r,G),he(r);for(r of n.m)$(r,_e),he(r)}}process(t){ie=[],this.apply();var n=[],r=[];for(const s of t)this.#c(s,n,r);if(this.is_deferred()){this.#f(r),this.#f(n);for(const[s,o]of this.#s)kr(s,o)}else{for(const s of this.#t)s();this.#t.clear(),this.#e===0&&this.#u(),T=null,jn(r),jn(n),this.#i?.resolve()}de=null}#c(t,n,r){t.f^=F;for(var s=t.first,o=null;s!==null;){var i=s.f,l=(i&(ge|je))!==0,a=l&&(i&F)!==0,c=a||(i&re)!==0||this.#s.has(s);if(!c&&s.fn!==null){l?s.f^=F:o!==null&&(i&(qt|Bt|ur))!==0?o.b.defer_effect(s):(i&qt)!==0?n.push(s):Pt(s)&&((i&Ce)!==0&&this.#n.add(s),At(s));var f=s.first;if(f!==null){s=f;continue}}var h=s.parent;for(s=s.next;s===null&&h!==null;)h===o&&(o=null),s=h.next,h=h.parent}}#f(t){for(var n=0;n<t.length;n+=1)xr(t[n],this.#r,this.#n)}capture(t,n){n!==q&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&De)===0&&(this.current.set(t,t.v),de?.set(t,t.v))}activate(){T=this,this.apply()}deactivate(){T===this&&(T=null,de=null)}flush(){if(this.activate(),ie.length>0){if($s(),T!==null&&T!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#a)t(this);this.#a.clear()}#u(){if(Ft.size>1){this.previous.clear();var t=de,n=!0;for(const s of Ft){if(s===this){n=!1;continue}const o=[];for(const[l,a]of this.current){if(s.current.has(l))if(n&&a!==s.current.get(l))s.current.set(l,a);else continue;o.push(l)}if(o.length===0)continue;const i=[...s.current.keys()].filter(l=>!this.current.has(l));if(i.length>0){var r=ie;ie=[];const l=new Set,a=new Map;for(const c of o)wr(c,i,l,a);if(ie.length>0){T=s,s.apply();for(const c of ie)s.#c(c,[],[]);s.deactivate()}ie=r}}T=null,de=t}this.committed=!0,Ft.delete(this)}increment(t){this.#e+=1,t&&(this.#o+=1)}decrement(t){this.#e-=1,t&&(this.#o-=1),!this.#l&&(this.#l=!0,Ee(()=>{this.#l=!1,this.is_deferred()?ie.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#r)this.#n.delete(t),$(t,G),he(t);for(const t of this.#n)$(t,_e),he(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#a.add(t)}settled(){return(this.#i??=fr()).promise}static ensure(){if(T===null){const t=T=new Pe;Ft.add(T),Ee(()=>{T===t&&t.flush()})}return T}apply(){}}function $s(){vn=!0;var e=null;try{for(var t=0;ie.length>0;){var n=Pe.ensure();if(t++>1e3){var r,s;Xs()}n.process(ie),Ie.clear()}}finally{ie=[],vn=!1,Bn=null}}function Xs(){try{ms()}catch(e){rt(e,Bn)}}let ke=null;function jn(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Te|re))===0&&Pt(r)&&(ke=new Set,At(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Hr(r):r.fn=null),ke?.size>0)){Ie.clear();for(const s of ke){if((s.f&(Te|re))!==0)continue;const o=[s];let i=s.parent;for(;i!==null;)ke.has(i)&&(ke.delete(i),o.push(i)),i=i.parent;for(let l=o.length-1;l>=0;l--){const a=o[l];(a.f&(Te|re))===0&&At(a)}}ke.clear()}}ke=null}}function wr(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const o=s.f;(o&K)!==0?wr(s,t,n,r):(o&(Cn|Ce))!==0&&(o&G)===0&&yr(s,t,r)&&($(s,G),he(s))}}function yr(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(et.call(t,s))return!0;if((s.f&K)!==0&&yr(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function he(e){for(var t=Bn=e;t.parent!==null;){t=t.parent;var n=t.f;if(vn&&t===S&&(n&Ce)!==0&&(n&dr)===0)return;if((n&(je|ge))!==0){if((n&F)===0)return;t.f^=F}}ie.push(t)}function kr(e,t){if(!((e.f&ge)!==0&&(e.f&F)!==0)){(e.f&G)!==0?t.d.push(e):(e.f&_e)!==0&&t.m.push(e),$(e,F);for(var n=e.first;n!==null;)kr(n,t),n=n.next}}function Ys(e){let t=0,n=ze(0),r;return()=>{In()&&(_(n),$r(()=>(t===0&&(r=ft(()=>e(()=>Et(n)))),t+=1,()=>{Ee(()=>{t-=1,t===0&&(r?.(),r=void 0,Et(n))})})))}}var Hs=tt|it|En;function Ns(e,t,n){new Fs(e,t,n)}class Fs{parent;is_pending=!1;#t;#a=null;#e;#o;#i;#r=null;#n=null;#s=null;#l=null;#c=null;#f=0;#u=0;#v=!1;#h=!1;#p=new Set;#_=new Set;#d=null;#w=Ys(()=>(this.#d=ze(this.#f),()=>{this.#d=null}));constructor(t,n,r){this.#t=t,this.#e=n,this.#o=r,this.parent=S.b,this.is_pending=!!this.#e.pending,this.#i=Jt(()=>{S.b=this;{var s=this.#m();try{this.#r=ae(()=>r(s))}catch(o){this.error(o)}this.#u>0?this.#b():this.is_pending=!1}return()=>{this.#c?.remove()}},Hs)}#y(){try{this.#r=ae(()=>this.#o(this.#t))}catch(t){this.error(t)}}#k(){const t=this.#e.pending;t&&(this.#n=ae(()=>t(this.#t)),Ee(()=>{var n=this.#m();this.#r=this.#g(()=>(Pe.ensure(),ae(()=>this.#o(n)))),this.#u>0?this.#b():(Ne(this.#n,()=>{this.#n=null}),this.is_pending=!1)}))}#m(){var t=this.#t;return this.is_pending&&(this.#c=Me(),this.#t.before(this.#c),t=this.#c),t}defer_effect(t){xr(t,this.#p,this.#_)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(t){var n=S,r=y,s=X;xe(this.#i),fe(this.#i),nt(this.#i.ctx);try{return t()}catch(o){return br(o),null}finally{xe(n),fe(r),nt(s)}}#b(){const t=this.#e.pending;this.#r!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Or(this.#r,this.#l)),this.#n===null&&(this.#n=ae(()=>t(this.#t)))}#x(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#x(t);return}if(this.#u+=t,this.#u===0){this.is_pending=!1;for(const n of this.#p)$(n,G),he(n);for(const n of this.#_)$(n,_e),he(n);this.#p.clear(),this.#_.clear(),this.#n&&Ne(this.#n,()=>{this.#n=null}),this.#l&&(this.#t.before(this.#l),this.#l=null)}}update_pending_count(t){this.#x(t),this.#f+=t,!(!this.#d||this.#v)&&(this.#v=!0,Ee(()=>{this.#v=!1,this.#d&&ot(this.#d,this.#f)}))}get_effect_pending(){return this.#w(),_(this.#d)}error(t){var n=this.#e.onerror;let r=this.#e.failed;if(this.#h||!n&&!r)throw t;this.#r&&(Q(this.#r),this.#r=null),this.#n&&(Q(this.#n),this.#n=null),this.#s&&(Q(this.#s),this.#s=null);var s=!1,o=!1;const i=()=>{if(s){Ts();return}s=!0,o&&ks(),Pe.ensure(),this.#f=0,this.#s!==null&&Ne(this.#s,()=>{this.#s=null}),this.is_pending=this.has_pending_snippet(),this.#r=this.#g(()=>(this.#h=!1,ae(()=>this.#o(this.#t)))),this.#u>0?this.#b():this.is_pending=!1};Ee(()=>{try{o=!0,n?.(t,i),o=!1}catch(l){rt(l,this.#i&&this.#i.parent)}r&&(this.#s=this.#g(()=>{Pe.ensure(),this.#h=!0;try{return ae(()=>{r(this.#t,()=>t,()=>i)})}catch(l){return rt(l,this.#i.parent),null}finally{this.#h=!1}}))})}}function Os(e,t,n,r){const s=ct()?Zt:Sr;var o=e.filter(u=>!u.settled);if(n.length===0&&o.length===0){r(t.map(s));return}var i=T,l=S,a=zs(),c=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(u=>u.promise)):null;function f(u){a();try{r(u)}catch(p){(l.f&Te)===0&&rt(p,l)}i?.deactivate(),pn()}if(n.length===0){c.then(()=>f(t.map(s)));return}function h(){a(),Promise.all(n.map(u=>Ls(u))).then(u=>f([...t.map(s),...u])).catch(u=>rt(u,l))}c?c.then(h):h()}function zs(){var e=S,t=y,n=X,r=T;return function(o=!0){xe(e),fe(t),nt(n),o&&r?.activate()}}function pn(){xe(null),fe(null),nt(null)}function Zt(e){var t=K|G,n=y!==null&&(y.f&K)!==0?y:null;return S!==null&&(S.f|=it),{ctx:X,deps:null,effects:null,equals:pr,f:t,fn:e,reactions:null,rv:0,v:q,wv:0,parent:n??S,ac:null}}function Ls(e,t,n){let r=S;r===null&&vs();var s=r.b,o=void 0,i=ze(q),l=!y,a=new Map;return Qs(()=>{var c=fr();o=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).then(()=>{f===T&&f.committed&&f.deactivate(),pn()})}catch(p){c.reject(p),pn()}var f=T;if(l){var h=s.is_rendered();s.update_pending_count(1),f.increment(h),a.get(f)?.reject(Ve),a.delete(f),a.set(f,c)}const u=(p,d=void 0)=>{if(f.activate(),d)d!==Ve&&(i.f|=De,ot(i,d));else{(i.f&De)!==0&&(i.f^=De),ot(i,p);for(const[m,v]of a){if(a.delete(m),m===f)break;v.reject(Ve)}}l&&(s.update_pending_count(-1),f.decrement(h))};c.promise.then(u,p=>u(null,p||"unknown"))}),Rn(()=>{for(const c of a.values())c.reject(Ve)}),new Promise(c=>{function f(h){function u(){h===o?c(i):f(o)}h.then(u,u)}f(o)})}function st(e){const t=Zt(e);return zr(t),t}function Sr(e){const t=Zt(e);return t.equals=gr,t}function Er(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Q(t[n])}}function js(e){for(var t=e.parent;t!==null;){if((t.f&K)===0)return(t.f&Te)===0?t:null;t=t.parent}return null}function Tn(e){var t,n=S;xe(js(e));try{e.f&=~Oe,Er(e),t=Kr(e)}finally{xe(n)}return t}function Mr(e){var t=Tn(e);if(!e.equals(t)&&(e.wv=jr(),(!T?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){$(e,F);return}Le||(de!==null?(In()||T?.is_fork)&&de.set(e,t):An(e))}let _n=new Set;const Ie=new Map;let Cr=!1;function ze(e,t){var n={f:0,v:e,reactions:null,equals:pr,rv:0,wv:0};return n}function ne(e,t){const n=ze(e);return zr(n),n}function Kt(e,t=!1,n=!0){const r=ze(e);return t||(r.equals=gr),Tt&&n&&X!==null&&X.l!==null&&(X.l.s??=[]).push(r),r}function gt(e,t){return R(e,ft(()=>_(e))),t}function R(e,t,n=!1){y!==null&&(!pe||(y.f&Ln)!==0)&&ct()&&(y.f&(K|Ce|Cn|Ln))!==0&&(ce===null||!et.call(ce,e))&&ys();let r=n?wt(t):t;return ot(e,r)}function ot(e,t){if(!e.equals(t)){var n=e.v;Le?Ie.set(e,t):Ie.set(e,n),e.v=t;var r=Pe.ensure();if(r.capture(e,n),(e.f&K)!==0){const s=e;(e.f&G)!==0&&Tn(s),An(s)}e.wv=jr(),Ar(e,G),ct()&&S!==null&&(S.f&F)!==0&&(S.f&(ge|je))===0&&(oe===null?no([e]):oe.push(e)),!r.is_fork&&_n.size>0&&!Cr&&qs()}return t}function qs(){Cr=!1;for(const e of _n)(e.f&F)!==0&&$(e,_e),Pt(e)&&At(e);_n.clear()}function Ks(e,t=1){var n=_(e),r=t===1?n++:n--;return R(e,n),r}function Et(e){R(e,e.v+1)}function Ar(e,t){var n=e.reactions;if(n!==null)for(var r=ct(),s=n.length,o=0;o<s;o++){var i=n[o],l=i.f;if(!(!r&&i===S)){var a=(l&G)===0;if(a&&$(i,t),(l&K)!==0){var c=i;de?.delete(c),(l&Oe)===0&&(l&le&&(i.f|=Oe),Ar(c,_e))}else a&&((l&Ce)!==0&&ke!==null&&ke.add(i),he(i))}}}function wt(e){if(typeof e!="object"||e===null||Je in e)return e;const t=Sn(e);if(t!==cs&&t!==fs)return e;var n=new Map,r=ar(e),s=ne(0),o=Fe,i=l=>{if(Fe===o)return l();var a=y,c=Fe;fe(null),Gn(o);var f=l();return fe(a),Gn(c),f};return r&&n.set("length",ne(e.length)),new Proxy(e,{defineProperty(l,a,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&xs();var f=n.get(a);return f===void 0?f=i(()=>{var h=ne(c.value);return n.set(a,h),h}):R(f,c.value,!0),!0},deleteProperty(l,a){var c=n.get(a);if(c===void 0){if(a in l){const f=i(()=>ne(q));n.set(a,f),Et(s)}}else R(c,q),Et(s);return!0},get(l,a,c){if(a===Je)return e;var f=n.get(a),h=a in l;if(f===void 0&&(!h||St(l,a)?.writable)&&(f=i(()=>{var p=wt(h?l[a]:q),d=ne(p);return d}),n.set(a,f)),f!==void 0){var u=_(f);return u===q?void 0:u}return Reflect.get(l,a,c)},getOwnPropertyDescriptor(l,a){var c=Reflect.getOwnPropertyDescriptor(l,a);if(c&&"value"in c){var f=n.get(a);f&&(c.value=_(f))}else if(c===void 0){var h=n.get(a),u=h?.v;if(h!==void 0&&u!==q)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return c},has(l,a){if(a===Je)return!0;var c=n.get(a),f=c!==void 0&&c.v!==q||Reflect.has(l,a);if(c!==void 0||S!==null&&(!f||St(l,a)?.writable)){c===void 0&&(c=i(()=>{var u=f?wt(l[a]):q,p=ne(u);return p}),n.set(a,c));var h=_(c);if(h===q)return!1}return f},set(l,a,c,f){var h=n.get(a),u=a in l;if(r&&a==="length")for(var p=c;p<h.v;p+=1){var d=n.get(p+"");d!==void 0?R(d,q):p in l&&(d=i(()=>ne(q)),n.set(p+"",d))}if(h===void 0)(!u||St(l,a)?.writable)&&(h=i(()=>ne(void 0)),R(h,wt(c)),n.set(a,h));else{u=h.v!==q;var m=i(()=>wt(c));R(h,m)}var v=Reflect.getOwnPropertyDescriptor(l,a);if(v?.set&&v.set.call(f,c),!u){if(r&&typeof a=="string"){var b=n.get("length"),Y=Number(a);Number.isInteger(Y)&&Y>=b.v&&R(b,Y+1)}Et(s)}return!0},ownKeys(l){_(s);var a=Reflect.ownKeys(l).filter(h=>{var u=n.get(h);return u===void 0||u.v!==q});for(var[c,f]of n)f.v!==q&&!(c in l)&&a.push(c);return a},setPrototypeOf(){ws()}})}var qn,Br,Tr,Dr;function Gs(){if(qn===void 0){qn=window,Br=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Tr=St(t,"firstChild").get,Dr=St(t,"nextSibling").get,zn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),zn(n)&&(n.__t=void 0)}}function Me(e=""){return document.createTextNode(e)}function Dn(e){return Tr.call(e)}function Dt(e){return Dr.call(e)}function x(e,t){return Dn(e)}function zt(e,t=!1){{var n=Dn(e);return n instanceof Comment&&n.data===""?Dt(n):n}}function w(e,t=1,n=!1){let r=e;for(;t--;)r=Dt(r);return r}function Us(e){e.textContent=""}function Pr(){return!1}function Pn(e){var t=y,n=S;fe(null),xe(null);try{return e()}finally{fe(t),xe(n)}}function Ir(e){S===null&&(y===null&&bs(),gs()),Le&&_s()}function Vs(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function we(e,t,n){var r=S;r!==null&&(r.f&re)!==0&&(e|=re);var s={ctx:X,deps:null,nodes:null,f:e|G|le,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{At(s),s.f|=Mn}catch(l){throw Q(s),l}else t!==null&&he(s);var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&it)===0&&(o=o.first,(e&Ce)!==0&&(e&tt)!==0&&o!==null&&(o.f|=tt)),o!==null&&(o.parent=r,r!==null&&Vs(o,r),y!==null&&(y.f&K)!==0&&(e&je)===0)){var i=y;(i.effects??=[]).push(o)}return s}function In(){return y!==null&&!pe}function Rn(e){const t=we(Bt,null,!1);return $(t,F),t.teardown=e,t}function Ct(e){Ir();var t=S.f,n=!y&&(t&ge)!==0&&(t&Mn)===0;if(n){var r=X;(r.e??=[]).push(e)}else return Rr(e)}function Rr(e){return we(qt|hr,e,!1)}function Ws(e){return Ir(),we(Bt|hr,e,!0)}function Zs(e){Pe.ensure();const t=we(je|it,e,!0);return(n={})=>new Promise(r=>{n.outro?Ne(t,()=>{Q(t),r(void 0)}):(Q(t),r(void 0))})}function Js(e){return we(qt,e,!1)}function Qs(e){return we(Cn|it,e,!0)}function $r(e,t=0){return we(Bt|t,e,!0)}function ve(e,t=[],n=[],r=[]){Os(r,t,n,s=>{we(Bt,()=>e(...s.map(_)),!0)})}function Jt(e,t=0){var n=we(Ce|t,e,!0);return n}function ae(e){return we(ge|it,e,!0)}function Xr(e){var t=e.teardown;if(t!==null){const n=Le,r=y;Kn(!0),fe(null);try{t.call(null)}finally{Kn(n),fe(r)}}}function Yr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Pn(()=>{s.abort(Ve)});var r=n.next;(n.f&je)!==0?n.parent=null:Q(n,t),n=r}}function eo(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ge)===0&&Q(t),t=n}}function Q(e,t=!0){var n=!1;(t||(e.f&dr)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(to(e.nodes.start,e.nodes.end),n=!0),Yr(e,t&&!n),Gt(e,0),$(e,Te);var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)o.stop();Xr(e);var s=e.parent;s!==null&&s.first!==null&&Hr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function to(e,t){for(;e!==null;){var n=e===t?null:Dt(e);e.remove(),e=n}}function Hr(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ne(e,t,n=!0){var r=[];Nr(e,r,!0);var s=()=>{n&&Q(e),t&&t()},o=r.length;if(o>0){var i=()=>--o||s();for(var l of r)l.out(i)}else s()}function Nr(e,t,n){if((e.f&re)===0){e.f^=re;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||n)&&t.push(l);for(var s=e.first;s!==null;){var o=s.next,i=(s.f&tt)!==0||(s.f&ge)!==0&&(e.f&Ce)!==0;Nr(s,t,i?n:!1),s=o}}}function $n(e){Fr(e,!0)}function Fr(e,t){if((e.f&re)!==0){e.f^=re,(e.f&F)===0&&($(e,G),he(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&tt)!==0||(n.f&ge)!==0;Fr(n,s?t:!1),n=r}var o=e.nodes&&e.nodes.t;if(o!==null)for(const i of o)(i.is_global||t)&&i.in()}}function Or(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var s=n===r?null:Dt(n);t.append(n),n=s}}let Lt=!1,Le=!1;function Kn(e){Le=e}let y=null,pe=!1;function fe(e){y=e}let S=null;function xe(e){S=e}let ce=null;function zr(e){y!==null&&(ce===null?ce=[e]:ce.push(e))}let Z=null,te=0,oe=null;function no(e){oe=e}let Lr=1,He=0,Fe=He;function Gn(e){Fe=e}function jr(){return++Lr}function Pt(e){var t=e.f;if((t&G)!==0)return!0;if(t&K&&(e.f&=~Oe),(t&_e)!==0){for(var n=e.deps,r=n.length,s=0;s<r;s++){var o=n[s];if(Pt(o)&&Mr(o),o.wv>e.wv)return!0}(t&le)!==0&&de===null&&$(e,F)}return!1}function qr(e,t,n=!0){var r=e.reactions;if(r!==null&&!(ce!==null&&et.call(ce,e)))for(var s=0;s<r.length;s++){var o=r[s];(o.f&K)!==0?qr(o,t,!1):t===o&&(n?$(o,G):(o.f&F)!==0&&$(o,_e),he(o))}}function Kr(e){var t=Z,n=te,r=oe,s=y,o=ce,i=X,l=pe,a=Fe,c=e.f;Z=null,te=0,oe=null,y=(c&(ge|je))===0?e:null,ce=null,nt(e.ctx),pe=!1,Fe=++He,e.ac!==null&&(Pn(()=>{e.ac.abort(Ve)}),e.ac=null);try{e.f|=hn;var f=e.fn,h=f(),u=e.deps,p=T?.is_fork;if(Z!==null){var d;if(p||Gt(e,te),u!==null&&te>0)for(u.length=te+Z.length,d=0;d<Z.length;d++)u[te+d]=Z[d];else e.deps=u=Z;if(In()&&(e.f&le)!==0)for(d=te;d<u.length;d++)(u[d].reactions??=[]).push(e)}else!p&&u!==null&&te<u.length&&(Gt(e,te),u.length=te);if(ct()&&oe!==null&&!pe&&u!==null&&(e.f&(K|_e|G))===0)for(d=0;d<oe.length;d++)qr(oe[d],e);if(s!==null&&s!==e){if(He++,s.deps!==null)for(let m=0;m<n;m+=1)s.deps[m].rv=He;if(t!==null)for(const m of t)m.rv=He;oe!==null&&(r===null?r=oe:r.push(...oe))}return(e.f&De)!==0&&(e.f^=De),h}catch(m){return br(m)}finally{e.f^=hn,Z=t,te=n,oe=r,y=s,ce=o,nt(i),pe=l,Fe=a}}function ro(e,t){let n=t.reactions;if(n!==null){var r=ls.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}if(n===null&&(t.f&K)!==0&&(Z===null||!et.call(Z,t))){var o=t;(o.f&le)!==0&&(o.f^=le,o.f&=~Oe),An(o),Er(o),Gt(o,0)}}function Gt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ro(e,n[r])}function At(e){var t=e.f;if((t&Te)===0){$(e,F);var n=S,r=Lt;S=e,Lt=!0;try{(t&(Ce|ur))!==0?eo(e):Yr(e),Xr(e);var s=Kr(e);e.teardown=typeof s=="function"?s:null,e.wv=Lr;var o;un&&Ds&&(e.f&G)!==0&&e.deps}finally{Lt=r,S=n}}}function _(e){var t=e.f,n=(t&K)!==0;if(y!==null&&!pe){var r=S!==null&&(S.f&Te)!==0;if(!r&&(ce===null||!et.call(ce,e))){var s=y.deps;if((y.f&hn)!==0)e.rv<He&&(e.rv=He,Z===null&&s!==null&&s[te]===e?te++:Z===null?Z=[e]:Z.push(e));else{(y.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[y]:et.call(o,y)||o.push(y)}}}if(Le&&Ie.has(e))return Ie.get(e);if(n){var i=e;if(Le){var l=i.v;return((i.f&F)===0&&i.reactions!==null||Ur(i))&&(l=Tn(i)),Ie.set(i,l),l}var a=(i.f&le)===0&&!pe&&y!==null&&(Lt||(y.f&le)!==0),c=i.deps===null;Pt(i)&&(a&&(i.f|=le),Mr(i)),a&&!c&&Gr(i)}if(de?.has(e))return de.get(e);if((e.f&De)!==0)throw e.v;return e.v}function Gr(e){if(e.deps!==null){e.f|=le;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&K)!==0&&(t.f&le)===0&&Gr(t)}}function Ur(e){if(e.v===q)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ie.has(t)||(t.f&K)!==0&&Ur(t))return!0;return!1}function ft(e){var t=pe;try{return pe=!0,e()}finally{pe=t}}function so(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Je in e)gn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Je in n&&gn(n)}}}function gn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{gn(e[r],t)}catch{}const n=Sn(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=cr(n);for(let s in r){const o=r[s].get;if(o)try{o.call(e)}catch{}}}}}const oo=["touchstart","touchmove"];function io(e){return oo.includes(e)}const Vr=new Set,bn=new Set;function ao(e,t,n,r={}){function s(o){if(r.capture||yt.call(t,o),!o.cancelBubble)return Pn(()=>n?.call(this,o))}return Ee(()=>{t.addEventListener(e,s,r)}),s}function lo(e,t,n,r,s){var o={capture:r,passive:s},i=ao(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Rn(()=>{t.removeEventListener(e,i,o)})}function Xn(e){for(var t=0;t<e.length;t++)Vr.add(e[t]);for(var n of bn)n(e)}let Un=null;function yt(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;Un=e;var i=0,l=Un===e&&e.__root;if(l){var a=s.indexOf(l);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;a<=c&&(i=a)}if(o=s[i]||e.target,o!==t){lr(e,"currentTarget",{configurable:!0,get(){return o||n}});var f=y,h=S;fe(null),xe(null);try{for(var u,p=[];o!==null;){var d=o.assignedSlot||o.parentNode||o.host||null;try{var m=o["__"+r];m!=null&&(!o.disabled||e.target===o)&&m.call(o,e)}catch(v){u?p.push(v):u=v}if(e.cancelBubble||d===t||d===null)break;o=d}if(u){for(let v of p)queueMicrotask(()=>{throw v});throw u}}finally{e.__root=t,delete e.currentTarget,fe(f),xe(h)}}}function co(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Yn(e,t){var n=S;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function O(e,t){var n=(t&As)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=co(s?e:"<!>"+e),r=Dn(r));var o=n||Br?document.importNode(r,!0):r.cloneNode(!0);return Yn(o,o),o}}function on(e=""){{var t=Me(e+"");return Yn(t,t),t}}function jt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Me();return e.append(t,n),Yn(t,n),e}function C(e,t){e!==null&&e.before(t)}function N(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function fo(e,t){return uo(e,t)}const Ke=new Map;function uo(e,{target:t,anchor:n,props:r={},events:s,context:o,intro:i=!0}){Gs();var l=new Set,a=h=>{for(var u=0;u<h.length;u++){var p=h[u];if(!l.has(p)){l.add(p);var d=io(p);t.addEventListener(p,yt,{passive:d});var m=Ke.get(p);m===void 0?(document.addEventListener(p,yt,{passive:d}),Ke.set(p,1)):Ke.set(p,m+1)}}};a(Wt(Vr)),bn.add(a);var c=void 0,f=Zs(()=>{var h=n??t.appendChild(Me());return Ns(h,{pending:()=>{}},u=>{at({});var p=X;o&&(p.c=o),s&&(r.$$events=s),c=e(u,r)||{},lt()}),()=>{for(var u of l){t.removeEventListener(u,yt);var p=Ke.get(u);--p===0?(document.removeEventListener(u,yt),Ke.delete(u)):Ke.set(u,p)}bn.delete(a),h!==n&&h.parentNode?.removeChild(h)}});return ho.set(c,f),c}let ho=new WeakMap;class Wr{anchor;#t=new Map;#a=new Map;#e=new Map;#o=new Set;#i=!0;constructor(t,n=!0){this.anchor=t,this.#i=n}#r=()=>{var t=T;if(this.#t.has(t)){var n=this.#t.get(t),r=this.#a.get(n);if(r)$n(r),this.#o.delete(n);else{var s=this.#e.get(n);s&&(this.#a.set(n,s.effect),this.#e.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[o,i]of this.#t){if(this.#t.delete(o),o===t)break;const l=this.#e.get(i);l&&(Q(l.effect),this.#e.delete(i))}for(const[o,i]of this.#a){if(o===n||this.#o.has(o))continue;const l=()=>{if(Array.from(this.#t.values()).includes(o)){var c=document.createDocumentFragment();Or(i,c),c.append(Me()),this.#e.set(o,{effect:i,fragment:c})}else Q(i);this.#o.delete(o),this.#a.delete(o)};this.#i||!r?(this.#o.add(o),Ne(i,l,!1)):l()}}};#n=t=>{this.#t.delete(t);const n=Array.from(this.#t.values());for(const[r,s]of this.#e)n.includes(r)||(Q(s.effect),this.#e.delete(r))};ensure(t,n){var r=T,s=Pr();if(n&&!this.#a.has(t)&&!this.#e.has(t))if(s){var o=document.createDocumentFragment(),i=Me();o.append(i),this.#e.set(t,{effect:ae(()=>n(i)),fragment:o})}else this.#a.set(t,ae(()=>n(this.anchor)));if(this.#t.set(r,t),s){for(const[l,a]of this.#a)l===t?r.unskip_effect(a):r.skip_effect(a);for(const[l,a]of this.#e)l===t?r.unskip_effect(a.effect):r.skip_effect(a.effect);r.oncommit(this.#r),r.ondiscard(this.#n)}else this.#r()}}function me(e,t,n=!1){var r=new Wr(e),s=n?tt:0;function o(i,l){r.ensure(i,l)}Jt(()=>{var i=!1;t((l,a=!0)=>{i=!0,o(a,l)}),i||o(!1,null)},s)}const vo=Symbol("NaN");function po(e,t,n){var r=new Wr(e),s=!ct();Jt(()=>{var o=t();o!==o&&(o=vo),s&&o!==null&&typeof o=="object"&&(o={}),r.ensure(o,n)})}function Vn(e,t){return t}function _o(e,t,n){for(var r=[],s=t.length,o,i=t.length,l=0;l<s;l++){let h=t[l];Ne(h,()=>{if(o){if(o.pending.delete(h),o.done.add(h),o.pending.size===0){var u=e.outrogroups;mn(Wt(o.done)),u.delete(o),u.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var a=r.length===0&&n!==null;if(a){var c=n,f=c.parentNode;Us(f),f.append(c),e.items.clear()}mn(t,!a)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function mn(e,t=!0){for(var n=0;n<e.length;n++)Q(e[n],t)}var Wn;function xn(e,t,n,r,s,o=null){var i=e,l=new Map,a=(t&vr)!==0;if(a){var c=e;i=c.appendChild(Me())}var f=null,h=Sr(()=>{var b=n();return ar(b)?b:b==null?[]:Wt(b)}),u,p=!0;function d(){v.fallback=f,go(v,u,i,t,r),f!==null&&(u.length===0?(f.f&Se)===0?$n(f):(f.f^=Se,kt(f,null,i)):Ne(f,()=>{f=null}))}var m=Jt(()=>{u=_(h);for(var b=u.length,Y=new Set,z=T,E=Pr(),D=0;D<b;D+=1){var M=u[D],B=r(M,D),k=p?null:l.get(B);k?(k.v&&ot(k.v,M),k.i&&ot(k.i,D),E&&z.unskip_effect(k.e)):(k=bo(l,p?i:Wn??=Me(),M,B,D,s,t,n),p||(k.e.f|=Se),l.set(B,k)),Y.add(B)}if(b===0&&o&&!f&&(p?f=ae(()=>o(i)):(f=ae(()=>o(Wn??=Me())),f.f|=Se)),b>Y.size&&ps(),!p)if(E){for(const[ue,L]of l)Y.has(ue)||z.skip_effect(L.e);z.oncommit(d),z.ondiscard(()=>{})}else d();_(h)}),v={effect:m,items:l,outrogroups:null,fallback:f};p=!1}function bt(e){for(;e!==null&&(e.f&ge)===0;)e=e.next;return e}function go(e,t,n,r,s){var o=(r&Ms)!==0,i=t.length,l=e.items,a=bt(e.effect.first),c,f=null,h,u=[],p=[],d,m,v,b;if(o)for(b=0;b<i;b+=1)d=t[b],m=s(d,b),v=l.get(m).e,(v.f&Se)===0&&(v.nodes?.a?.measure(),(h??=new Set).add(v));for(b=0;b<i;b+=1){if(d=t[b],m=s(d,b),v=l.get(m).e,e.outrogroups!==null)for(const L of e.outrogroups)L.pending.delete(v),L.done.delete(v);if((v.f&Se)!==0)if(v.f^=Se,v===a)kt(v,null,n);else{var Y=f?f.next:a;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),Be(e,f,v),Be(e,v,Y),kt(v,Y,n),f=v,u=[],p=[],a=bt(f.next);continue}if((v.f&re)!==0&&($n(v),o&&(v.nodes?.a?.unfix(),(h??=new Set).delete(v))),v!==a){if(c!==void 0&&c.has(v)){if(u.length<p.length){var z=p[0],E;f=z.prev;var D=u[0],M=u[u.length-1];for(E=0;E<u.length;E+=1)kt(u[E],z,n);for(E=0;E<p.length;E+=1)c.delete(p[E]);Be(e,D.prev,M.next),Be(e,f,D),Be(e,M,z),a=z,f=M,b-=1,u=[],p=[]}else c.delete(v),kt(v,a,n),Be(e,v.prev,v.next),Be(e,v,f===null?e.effect.first:f.next),Be(e,f,v),f=v;continue}for(u=[],p=[];a!==null&&a!==v;)(c??=new Set).add(a),p.push(a),a=bt(a.next);if(a===null)continue}(v.f&Se)===0&&u.push(v),f=v,a=bt(v.next)}if(e.outrogroups!==null){for(const L of e.outrogroups)L.pending.size===0&&(mn(Wt(L.done)),e.outrogroups?.delete(L));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||c!==void 0){var B=[];if(c!==void 0)for(v of c)(v.f&re)===0&&B.push(v);for(;a!==null;)(a.f&re)===0&&a!==e.fallback&&B.push(a),a=bt(a.next);var k=B.length;if(k>0){var ue=(r&vr)!==0&&i===0?n:null;if(o){for(b=0;b<k;b+=1)B[b].nodes?.a?.measure();for(b=0;b<k;b+=1)B[b].nodes?.a?.fix()}_o(e,B,ue)}}o&&Ee(()=>{if(h!==void 0)for(v of h)v.nodes?.a?.apply()})}function bo(e,t,n,r,s,o,i,l){var a=(i&Ss)!==0?(i&Cs)===0?Kt(n,!1,!1):ze(n):null,c=(i&Es)!==0?ze(s):null;return{v:a,i:c,e:ae(()=>(o(t,a??n,c??s,l),()=>{e.delete(r)}))}}function kt(e,t,n){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end,o=t&&(t.f&Se)===0?t.nodes.start:n;r!==null;){var i=Dt(r);if(o.before(r),r===s)return;r=i}}function Be(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function mo(e,t,n){var r=e==null?"":""+e;return r===""?null:r}function Qe(e,t,n,r,s,o){var i=e.__className;if(i!==n||i===void 0){var l=mo(n);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}return o}const xo=Symbol("is custom element"),wo=Symbol("is html");function an(e,t,n,r){var s=yo(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[ds]=n),n==null?e.removeAttribute(t):typeof n!="string"&&ko(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function yo(e){return e.__attributes??={[xo]:e.nodeName.includes("-"),[wo]:e.namespaceURI===Bs}}var Zn=new Map;function ko(e){var t=e.getAttribute("is")||e.nodeName,n=Zn.get(t);if(n)return n;Zn.set(t,n=[]);for(var r,s=e,o=Element.prototype;o!==s;){r=cr(s);for(var i in r)r[i].set&&n.push(i);s=Sn(s)}return n}function Jn(e,t){return e===t||e?.[Je]===t}function Qn(e={},t,n,r){return Js(()=>{var s,o;return $r(()=>{s=o,o=[],ft(()=>{e!==n(...o)&&(t(e,...o),s&&Jn(n(...s),e)&&t(null,...s))})}),()=>{Ee(()=>{o&&Jn(n(...o),e)&&t(null,...o)})}}),e}function So(e=!1){const t=X,n=t.l.u;if(!n)return;let r=()=>so(t.s);if(e){let s=0,o={};const i=Zt(()=>{let l=!1;const a=t.s;for(const c in a)a[c]!==o[c]&&(o[c]=a[c],l=!0);return l&&s++,s});r=()=>_(i)}n.b.length&&Ws(()=>{er(t,r),dn(n.b)}),Ct(()=>{const s=ft(()=>n.m.map(us));return()=>{for(const o of s)typeof o=="function"&&o()}}),n.a.length&&Ct(()=>{er(t,r),dn(n.a)})}function er(e,t){if(e.l.s)for(const n of e.l.s)_(n);t()}function Zr(e,t,n){if(e==null)return t(void 0),Ze;const r=ft(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Ge=[];function be(e,t=Ze){let n=null;const r=new Set;function s(l){if(_r(e,l)&&(e=l,n)){const a=!Ge.length;for(const c of r)c[1](),Ge.push(c,e);if(a){for(let c=0;c<Ge.length;c+=2)Ge[c][0](Ge[c+1]);Ge.length=0}}}function o(l){s(l(e))}function i(l,a=Ze){const c=[l,a];return r.add(c),r.size===1&&(n=t(s,o)||Ze),l(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:i}}function wn(e){let t;return Zr(e,n=>t=n)(),t}let yn=Symbol();function J(e,t,n){const r=n[t]??={store:null,source:Kt(void 0),unsubscribe:Ze};if(r.store!==e&&!(yn in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Ze;else{var s=!0;r.unsubscribe=Zr(e,o=>{s?r.source.v=o:R(r.source,o)}),s=!1}return e&&yn in n?wn(e):_(r.source)}function ut(){const e={};function t(){Rn(()=>{for(var n in e)e[n].unsubscribe();lr(e,yn,{enumerable:!1,value:!0})})}return[e,t]}function ln(e,t,n,r){var s=r,o=!0,i=()=>(o&&(o=!1,s=r),s),l;l=e[t],l===void 0&&r!==void 0&&(l=i());var a;return a=()=>{var c=e[t];return c===void 0?i():(o=!0,c)},a}function Jr(e){X===null&&hs(),Tt&&X.l!==null?Eo(X).m.push(e):Ct(()=>{const t=ft(e);if(typeof t=="function")return t})}function Eo(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Mo="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Mo);const Hn=be(null),kn=be("disconnected"),Qr=be(!1),mt=be(!0);function Mt(e){Hn.set(e),Qr.set(e!==null)}var Co=O("<div></div>"),Ao=O('<div class="flex items-center gap-1.5 text-xs"><div class="relative"><div></div> <!></div> <span class="text-text-dim"> </span></div>');function Bo(e){const t=()=>J(kn,"$connectionState",n),[n,r]=ut(),s={disconnected:{color:"bg-gray-500",label:"Disconnected"},connecting:{color:"bg-yellow-500",label:"Connecting..."},connected:{color:"bg-success",label:"Connected"},error:{color:"bg-red-500",label:"Error"}};let o=st(()=>s[t()]||s.disconnected);var i=Ao(),l=x(i),a=x(l),c=w(a,2);{var f=p=>{var d=Co();ve(()=>Qe(d,1,`absolute inset-0 w-2 h-2 rounded-full ${_(o).color??""} animate-ping opacity-75`)),C(p,d)};me(c,p=>{t()==="connected"&&p(f)})}var h=w(l,2),u=x(h);ve(()=>{Qe(a,1,`w-2 h-2 rounded-full ${_(o).color??""}`),N(u,_(o).label)}),C(e,i),r()}var To=O('<button class="text-text-dim hover:text-text transition-colors cursor-pointer bg-transparent border-none p-1" title="Toggle stats"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round"></path></svg></button>'),Do=O('<header class="h-12 flex items-center justify-between px-4 bg-surface/80 backdrop-blur border-b border-border z-50 relative"><div class="flex items-center gap-3"><!> <div class="flex items-center gap-2"><div class="w-6 h-6 rounded-full bg-accent/20 flex items-center justify-center"><div class="w-3 h-3 rounded-full bg-accent animate-glow"></div></div> <h1 class="text-lg font-bold tracking-tight"><span class="text-accent">DAG</span><span class="text-text">Pulse</span></h1></div> <span class="text-xs text-text-dim hidden sm:inline">Real-time Kaspa BlockDAG</span></div> <div class="flex items-center gap-4"><!> <a href="https://github.com/Yonkoo11/dagpulse" target="_blank" rel="noopener noreferrer" class="text-text-dim hover:text-text transition-colors text-xs flex items-center gap-1"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"></path></svg> <span class="hidden sm:inline">GitHub</span></a></div></header>');function Po(e,t){let n=ln(t,"isMobile",3,!1),r=ln(t,"toggleStats",3,()=>{});ln(t,"showStats",3,!0);var s=Do(),o=x(s),i=x(o);{var l=f=>{var h=To();h.__click=function(...u){r()?.apply(this,u)},C(f,h)};me(i,f=>{n()&&f(l)})}var a=w(o,2),c=x(a);Bo(c),C(e,s)}Xn(["click"]);const Io=150,Nn=be([]),Ut=be(new Map),tr=be([]),nr=be([]),Qt=be(0),Fn=be(0);function Ro(e){const t=Date.now();Nn.update(o=>{if(o.push(e),o.length>Io){const i=o.shift();Ut.update(l=>(l.delete(i.hash),l))}return o}),Ut.update(o=>(o.set(e.hash,e),o)),tr.update(o=>{o.push(t);const i=t-3e3;for(;o.length>0&&o[0]<i;)o.shift();return o}),nr.update(o=>(o.push(e.txCount),o.length>30&&o.shift(),o));const n=wn(tr);Qt.set(n.length/3);const s=wn(nr).reduce((o,i)=>o+i,0);Fn.set(s/3)}const es=be({blocksPerSecond:0,txPerSecond:0,hashrate:"---",blueScore:0,daaScore:0,peerCount:0,mempoolSize:0,isConnected:!1,isSynced:!1,serverVersion:""});function cn(e){es.update(t=>({...t,...e}))}function rr(e){return e>=1e9?(e/1e9).toFixed(2)+"B":e>=1e6?(e/1e6).toFixed(2)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toFixed(1)}function $o(e){return new Date(e).toLocaleTimeString(void 0,{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function fn(e,t=8){return e.length<=t*2+3?e:e.slice(0,t)+"..."+e.slice(-t)}var Xo=O('<div class="text-xl font-bold tabular-nums text-accent animate-stat-pulse"> </div>'),Yo=O("<div> </div>"),Ho=O('<div class="animate-fade-in"><div class="text-[10px] text-text-dim uppercase tracking-wider mb-0.5"> </div> <!></div>'),No=O('<div class="w-56 bg-surface/60 backdrop-blur border-r border-border flex flex-col overflow-y-auto"><div class="p-3 border-b border-border"><h2 class="text-xs font-semibold text-text-dim uppercase tracking-wider">Network Stats</h2></div> <div class="flex-1 p-3 space-y-3"></div> <div class="p-3 border-t border-border"><h3 class="text-[10px] text-text-dim uppercase tracking-wider mb-2">Confirmation Speed</h3> <div class="space-y-1.5"><div class="flex items-center gap-2"><div class="w-full bg-bg rounded-full h-2 overflow-hidden"><div class="h-full bg-accent rounded-full" style="width: 2%"></div></div> <span class="text-[10px] text-accent font-mono whitespace-nowrap">KAS 1s</span></div> <div class="flex items-center gap-2"><div class="w-full bg-bg rounded-full h-2 overflow-hidden"><div class="h-full bg-purple-500/60 rounded-full" style="width: 12%"></div></div> <span class="text-[10px] text-text-dim font-mono whitespace-nowrap">ETH 12s</span></div> <div class="flex items-center gap-2"><div class="w-full bg-bg rounded-full h-2 overflow-hidden"><div class="h-full bg-orange-500/60 rounded-full" style="width: 100%"></div></div> <span class="text-[10px] text-text-dim font-mono whitespace-nowrap">BTC 10m</span></div></div></div></div>');function Fo(e,t){at(t,!0);const n=()=>J(Qt,"$blocksPerSecond",o),r=()=>J(Fn,"$txPerSecond",o),s=()=>J(es,"$networkStats",o),[o,i]=ut();let l=st(()=>[{label:"Blocks/sec",value:n().toFixed(1),accent:!0,key:"bps"},{label:"TX/sec",value:r().toFixed(1),key:"tps"},{label:"Blue Score",value:s().blueScore>0?rr(s().blueScore):"---",key:"blue"},{label:"DAA Score",value:s().daaScore>0?rr(s().daaScore):"---",key:"daa"},{label:"Hashrate",value:s().hashrate,key:"hash"},{label:"Peers",value:s().peerCount>0?String(s().peerCount):"---",key:"peers"}]),a="",c=ne(0);Ct(()=>{const u=n().toFixed(1);a&&a!==u&&Ks(c),a=u});var f=No(),h=w(x(f),2);xn(h,21,()=>_(l),u=>u.key,(u,p)=>{var d=Ho(),m=x(d),v=x(m),b=w(m,2);{var Y=E=>{var D=jt(),M=zt(D);po(M,()=>_(c),B=>{var k=Xo(),ue=x(k);ve(()=>N(ue,_(p).value)),C(B,k)}),C(E,D)},z=E=>{var D=Yo(),M=x(D);ve(()=>{Qe(D,1,`text-xl font-bold tabular-nums ${_(p).accent?"text-accent":"text-text"}`),N(M,_(p).value)}),C(E,D)};me(b,E=>{_(p).key==="bps"?E(Y):E(z,!1)})}ve(()=>N(v,_(p).label)),C(u,d)}),C(e,f),lt(),i()}Ps();const Oo=55,zo=46,Vt=14;function Lo(e,t){if(e.length===0)return;const n=t.height/2,r=[];let s=[],o=0;for(const i of e)s.length>0&&i.addedAt-o>20&&(r.push(s),s=[]),s.push(i),o=i.addedAt;s.length>0&&r.push(s);for(let i=0;i<r.length;i++){const l=r[i],a=i*Oo;for(let c=0;c<l.length;c++){const f=l[c],h=l.length-1,u=h===0?0:(c-h/2)*zo;f.targetX=a,f.targetY=n+u}}}function jo(e,t){const n=performance.now(),r=1-Math.pow(.001,t/1e3);for(const s of e){s.x+=(s.targetX-s.x)*r,s.y+=(s.targetY-s.y)*r;const o=n-s.addedAt;o<500?(s.opacity=Math.min(1,o/300),s.scale=.5+Math.min(.5,o/300)*.5):(s.opacity=1,s.scale=1),o<1500?s.glowIntensity=1-o/1500:s.glowIntensity=0}}function qo(e){if(e.length===0)return 0;let t=0;for(const n of e)n.targetX>t&&(t=n.targetX);return t}const W={bg:"#0a0e1a",gridLine:"rgba(31, 41, 55, 0.3)",edgeBlue:"rgba(6, 182, 212, 0.35)",edgeRed:"rgba(107, 114, 128, 0.2)",blockBlue:"#06b6d4",blockBlueFill:"#0e7490",blockRed:"#6b7280",blockRedFill:"#374151",selectedRing:"#f59e0b"};function Ko(e,t,n,r,s,o){e.fillStyle=W.bg,e.fillRect(0,0,s,o),Go(e,r.offsetX,r.offsetY,r.zoom,s,o),e.save(),e.translate(r.offsetX,r.offsetY),e.scale(r.zoom,r.zoom),Uo(e,t,n,r);for(const i of t)i.opacity<.05||Wo(e,i,r);e.restore(),Zo(e,s,o)}function Go(e,t,n,r,s,o){const i=80*r;if(i<20)return;e.strokeStyle=W.gridLine,e.lineWidth=.5;const l=(t%i+i)%i,a=(n%i+i)%i;e.beginPath();for(let c=l;c<s;c+=i)e.moveTo(c,0),e.lineTo(c,o);for(let c=a;c<o;c+=i)e.moveTo(0,c),e.lineTo(s,c);e.stroke()}function Uo(e,t,n,r){const s=new Map;for(const a of t){if(a.opacity<.05)continue;const c=Math.round(a.targetX);s.has(c)||s.set(c,[]),s.get(c).push(a)}const o=[...s.keys()].sort((a,c)=>a-c),i=[],l=[];for(let a=1;a<o.length;a++){const c=s.get(o[a]),f=s.get(o[a-1]);for(const h of c){let u=!1;for(const p of h.parentHashes){const d=n.get(p);if(d&&d.opacity>.05){const m={from:d,to:h};r.selectedHash===h.hash||r.selectedHash===d.hash||r.hoveredHash===h.hash||r.hoveredHash===d.hash?l.push(m):i.push(m),u=!0}}if(!u&&f.length>0){const p=[...f].sort((v,b)=>Math.abs(v.y-h.y)-Math.abs(b.y-h.y)),m=1+(parseInt(h.hash.slice(0,6),16)||0)%2;for(let v=0;v<Math.min(m,p.length);v++){const b={from:p[v],to:h};r.selectedHash===h.hash||r.selectedHash===p[v].hash||r.hoveredHash===h.hash||r.hoveredHash===p[v].hash?l.push(b):i.push(b)}}}}for(const a of i)sr(e,a.from,a.to,r);for(const a of l)sr(e,a.from,a.to,r)}function sr(e,t,n,r){const s=r.selectedHash===n.hash||r.selectedHash===t.hash,o=r.hoveredHash===n.hash||r.hoveredHash===t.hash,i=s||o;e.beginPath();const l=n.x-t.x,a=Math.max(15,Math.abs(l)*.35);e.moveTo(t.x,t.y),e.bezierCurveTo(t.x+a,t.y,n.x-a,n.y,n.x,n.y),s?(e.strokeStyle=W.selectedRing,e.lineWidth=2.5,e.globalAlpha=.9):o?(e.strokeStyle=W.blockBlue,e.lineWidth=2,e.globalAlpha=.8):(e.strokeStyle=n.isBlue?W.edgeBlue:W.edgeRed,e.lineWidth=1,e.globalAlpha=Math.min(t.opacity,n.opacity)*.6),e.stroke(),(i||e.globalAlpha>.3)&&(e.fillStyle=e.strokeStyle,Vo(e,t,n,a,i)),e.globalAlpha=1}function Vo(e,t,n,r,s){const o=n.x-r,i=n.y,l=n.x-o,a=n.y-i,c=Math.sqrt(l*l+a*a);if(c<.01)return;const f=l/c,h=a/c,u=s?6:4,p=Vt+2,d=n.x-f*p,m=n.y-h*p,v=-h,b=f;e.beginPath(),e.moveTo(d,m),e.lineTo(d-f*u-v*u*.5,m-h*u-b*u*.5),e.lineTo(d-f*u+v*u*.5,m-h*u+b*u*.5),e.closePath(),e.fill()}function Wo(e,t,n){const r=Vt*t.scale,s=n.selectedHash===t.hash,o=n.hoveredHash===t.hash;if(e.globalAlpha=t.opacity,t.glowIntensity>.02){const i=t.glowIntensity*.25,l=r+8*t.glowIntensity;e.beginPath(),e.arc(t.x,t.y,l,0,Math.PI*2),e.fillStyle=t.isBlue?`rgba(34, 211, 238, ${i})`:`rgba(156, 163, 175, ${i})`,e.fill()}e.beginPath(),e.arc(t.x,t.y,r,0,Math.PI*2),e.fillStyle=o?t.isBlue?W.blockBlue:W.blockRed:t.isBlue?W.blockBlueFill:W.blockRedFill,e.fill(),e.beginPath(),e.arc(t.x,t.y,r,0,Math.PI*2),e.strokeStyle=t.isBlue?W.blockBlue:W.blockRed,e.lineWidth=s?2.5:1.5,e.stroke(),s&&(e.beginPath(),e.arc(t.x,t.y,r+5,0,Math.PI*2),e.strokeStyle=W.selectedRing,e.lineWidth=2,e.stroke()),t.txCount>1&&(e.beginPath(),e.arc(t.x+r*.65,t.y-r*.65,3,0,Math.PI*2),e.fillStyle="#f59e0b",e.fill()),e.globalAlpha=1}function Zo(e,t,n){const r=e.createLinearGradient(0,0,60,0);r.addColorStop(0,W.bg),r.addColorStop(1,"rgba(10, 14, 26, 0)"),e.fillStyle=r,e.fillRect(0,0,60,n);const s=e.createLinearGradient(t-60,0,t,0);s.addColorStop(0,"rgba(10, 14, 26, 0)"),s.addColorStop(1,W.bg),e.fillStyle=s,e.fillRect(t-60,0,60,n)}function Ot(e,t,n,r){const s=(t-r.offsetX)/r.zoom,o=(n-r.offsetY)/r.zoom;for(let i=e.length-1;i>=0;i--){const l=e[i],a=s-l.x,c=o-l.y;if(a*a+c*c<Vt*Vt*2.25)return l}return null}function Jo(e){return{offsetX:100,offsetY:0,zoom:1,isDragging:!1,lastMouseX:0,lastMouseY:0}}function Qo(e,t){const n=t.deltaY>0?.92:1.08,r=Math.max(.3,Math.min(3,e.zoom*n)),s=t.offsetX,o=t.offsetY,i=r/e.zoom,l=s-(s-e.offsetX)*i,a=o-(o-e.offsetY)*i;return{...e,zoom:r,offsetX:l,offsetY:a}}function ei(e,t){return{...e,isDragging:!0,lastMouseX:t.clientX,lastMouseY:t.clientY}}function ti(e,t){if(!e.isDragging)return e;const n=t.clientX-e.lastMouseX,r=t.clientY-e.lastMouseY;return{...e,offsetX:e.offsetX+n,offsetY:e.offsetY+r,lastMouseX:t.clientX,lastMouseY:t.clientY}}function ni(e){return{...e,isDragging:!1}}var ri=O('<div class="relative flex-1 overflow-hidden"><canvas class="block w-full h-full touch-none" style="cursor: grab;"></canvas> <div class="absolute top-3 right-3 flex gap-2"><button class="px-2 py-1 text-[10px] rounded bg-surface/80 backdrop-blur border border-border text-text-dim hover:text-text transition-colors cursor-pointer" title="Reset view and auto-follow"> </button></div> <div class="absolute bottom-3 left-3 text-[10px] text-text-dim font-mono bg-surface/60 backdrop-blur px-2 py-1 rounded"> </div></div>');function si(e,t){at(t,!1);const n=()=>J(Nn,"$blocks",i),r=()=>J(Ut,"$blockMap",i),s=()=>J(mt,"$autoFollow",i),o=()=>J(Hn,"$selectedBlock",i),[i,l]=ut();let a=Kt(),c=Kt(),f,h=800,u=600,p=1,d,m=null,v,b=0;Jr(()=>{f=_(a).getContext("2d"),p=window.devicePixelRatio||1,d=Jo();const g=new ResizeObserver(I=>{const H=I[0];h=H.contentRect.width,u=H.contentRect.height,gt(a,_(a).width=h*p),gt(a,_(a).height=u*p),gt(a,_(a).style.width=h+"px"),gt(a,_(a).style.height=u+"px")});g.observe(_(c));function A(I){const H=b?I-b:16;b=I;const P=n(),$e=r(),Xe={height:u,offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom};if(Lo(P,Xe),jo(P,H),s()&&P.length>0){const sn=-qo(P)*d.zoom+h*.7;d.offsetX+=(sn-d.offsetX)*.05}f.save(),f.scale(p,p);const qe={offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom,selectedHash:o()?.hash??null,hoveredHash:m};Ko(f,P,$e,qe,h,u),f.restore(),v=requestAnimationFrame(A)}return v=requestAnimationFrame(A),()=>{cancelAnimationFrame(v),g.disconnect()}});function Y(g){g.preventDefault(),d=Qo(d,g),mt.set(!1)}function z(g){d=ei(d,g),mt.set(!1)}function E(g){if(d.isDragging)d=ti(d,g);else{const A=_(a).getBoundingClientRect(),I=g.clientX-A.left,H=g.clientY-A.top,P=Ot(n(),I,H,{offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom});m=P?.hash??null,gt(a,_(a).style.cursor=P?"pointer":d.isDragging?"grabbing":"grab")}}function D(g){if(d.isDragging&&Math.abs(g.clientX-d.lastMouseX)<3&&Math.abs(g.clientY-d.lastMouseY)<3){const A=_(a).getBoundingClientRect(),I=g.clientX-A.left,H=g.clientY-A.top,P=Ot(n(),I,H,{offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom});Mt(P)}d=ni(d)}function M(g){const A=_(a).getBoundingClientRect(),I=g.clientX-A.left,H=g.clientY-A.top,P=Ot(n(),I,H,{offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom});Mt(P)}let B=0,k=0,ue=0,L=0,Re=!1;function It(g){const A=g.touches[0],I=g.touches[1],H=I.clientX-A.clientX,P=I.clientY-A.clientY;return Math.sqrt(H*H+P*P)}function Rt(g){return g.touches.length>=2?{x:(g.touches[0].clientX+g.touches[1].clientX)/2,y:(g.touches[0].clientY+g.touches[1].clientY)/2}:{x:g.touches[0].clientX,y:g.touches[0].clientY}}function en(g){g.preventDefault(),g.touches.length===1?(B=Date.now(),k=g.touches[0].clientX,ue=g.touches[0].clientY,Re=!1,d={...d,isDragging:!0,lastMouseX:g.touches[0].clientX,lastMouseY:g.touches[0].clientY},mt.set(!1)):g.touches.length===2&&(L=It(g),Re=!0)}function tn(g){if(g.preventDefault(),g.touches.length===1&&d.isDragging){const A=g.touches[0].clientX-d.lastMouseX,I=g.touches[0].clientY-d.lastMouseY;(Math.abs(g.touches[0].clientX-k)>5||Math.abs(g.touches[0].clientY-ue)>5)&&(Re=!0),d={...d,offsetX:d.offsetX+A,offsetY:d.offsetY+I,lastMouseX:g.touches[0].clientX,lastMouseY:g.touches[0].clientY}}else if(g.touches.length===2){const A=It(g);if(L>0){const I=A/L,H=Math.max(.3,Math.min(3,d.zoom*I)),P=Rt(g),$e=_(a).getBoundingClientRect(),Xe=P.x-$e.left,qe=P.y-$e.top,vt=H/d.zoom;d={...d,zoom:H,offsetX:Xe-(Xe-d.offsetX)*vt,offsetY:qe-(qe-d.offsetY)*vt}}L=A,Re=!0}}function $t(g){if(g.preventDefault(),!Re&&Date.now()-B<300){const A=_(a).getBoundingClientRect(),I=k-A.left,H=ue-A.top,P=Ot(n(),I,H,{offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom});Mt(P)}d={...d,isDragging:!1},L=0}function nn(){mt.set(!0),d.zoom=1,d.offsetY=0}So();var dt=ri(),ee=x(dt);ee.__mousedown=z,ee.__mousemove=E,ee.__mouseup=D,ee.__click=M,ee.__touchstart=en,ee.__touchmove=tn,ee.__touchend=$t,Qn(ee,g=>R(a,g),()=>_(a));var ht=w(ee,2),Xt=x(ht);Xt.__click=nn;var Yt=x(Xt),Ht=w(ht,2),rn=x(Ht);Qn(dt,g=>R(c,g),()=>_(c)),ve(()=>{N(Yt,s()?"Following":"Auto-follow"),N(rn,`${n().length??""} blocks visible`)}),lo("wheel",ee,Y),C(e,dt),lt(),l()}Xn(["mousedown","mousemove","mouseup","click","touchstart","touchmove","touchend"]);let or=912e5,ir=915e5;function oi(){const e="0123456789abcdef";let t="";for(let n=0;n<64;n++)t+=e[Math.floor(Math.random()*16)];return t}const xt=[];function ii(){const e=oi(),t=Math.min(xt.length,Math.floor(Math.random()*3)+1),n=[],r=[...xt];for(let o=0;o<t&&r.length>0;o++){const i=Math.floor(Math.random()*Math.min(r.length,5));n.push(r.splice(i,1)[0])}xt.push(e),xt.length>20&&xt.shift(),or++,ir++;const s=Math.random()>.15;return{hash:e,parentHashes:n,blueScore:or,daaScore:ir,timestamp:Date.now(),txCount:Math.floor(Math.random()*5),isBlue:s,x:0,y:0,targetX:0,targetY:0,opacity:0,scale:.5,glowIntensity:1,addedAt:performance.now()}}class ai{interval=null;callback=null;start(t){this.callback=t,this.interval=setInterval(()=>{this.callback&&this.callback(ii())},100)}stop(){this.interval&&(clearInterval(this.interval),this.interval=null)}}const Ye="https://api.kaspa.org";class li{mockStream=null;blockCallbacks=[];statsCallbacks=[];stateCallbacks=[];_state="disconnected";pollInterval=null;statsInterval=null;useMock=!1;seenHashes=new Set;lastBlueScore=0;get state(){return this._state}onBlock(t){this.blockCallbacks.push(t)}onStats(t){this.statsCallbacks.push(t)}onStateChange(t){this.stateCallbacks.push(t)}setState(t){this._state=t,this.stateCallbacks.forEach(n=>n(t))}async connect(){this.setState("connecting");try{const t=await fetch(`${Ye}/info/virtual-chain-blue-score`);if(!t.ok)throw new Error(`API returned ${t.status}`);const n=await t.json();this.lastBlueScore=Number(n.blueScore),this.setState("connected"),console.log("[KaspaClient] Connected to REST API, blueScore:",this.lastBlueScore),this.startBlockPolling(),this.startStatsPolling()}catch(t){console.warn("[KaspaClient] REST API failed, falling back to mock:",t),this.startMock()}}async startBlockPolling(){await this.fetchRecentBlocks(),this.pollInterval=setInterval(()=>this.fetchRecentBlocks(),1e3)}async fetchRecentBlocks(){try{const t=await fetch(`${Ye}/info/blockdag`);if(!t.ok)return;const n=await t.json(),r=n.tipHashes||[],s=Number(n.virtualDaaScore||0),i=r.filter(c=>!this.seenHashes.has(c)).slice(0,10),l=[];for(const c of i){const f=await this.fetchAndEmitBlock(c);l.push(...f)}const a=l.filter(c=>!this.seenHashes.has(c)).slice(0,10);for(const c of a)await this.fetchAndEmitBlock(c);if(this.seenHashes.size>300){const c=this.seenHashes.values();for(let f=0;f<100;f++)this.seenHashes.delete(c.next().value)}s>0&&this.statsCallbacks.forEach(c=>c({daaScore:s}))}catch(t){console.warn("[KaspaClient] Block poll failed:",t)}}async fetchAndEmitBlock(t){if(this.seenHashes.has(t))return[];try{const n=await fetch(`${Ye}/blocks/${t}`);if(!n.ok)return[];const r=await n.json(),s=this.parseRestBlock(r);return s?(this.seenHashes.add(s.hash),this.blockCallbacks.forEach(o=>o(s)),s.parentHashes):[]}catch{return[]}}parseRestBlock(t){try{const n=t.verboseData?.hash||"";if(!n)return null;const r=[];if(t.parents)for(const f of t.parents)Array.isArray(f.parentHashes)&&r.push(...f.parentHashes);const s=Number(t.verboseData?.blueScore||0),o=Number(t.header?.daaScore||0),i=Number(t.header?.timestamp||Date.now()),l=t.transactions?.length||0,c=(t.verboseData?.mergeSetBluesHashes||[]).length>0||Math.random()>.15;return{hash:n,parentHashes:r,blueScore:s,daaScore:o,timestamp:i,txCount:l,isBlue:c,x:0,y:0,targetX:0,targetY:0,opacity:0,scale:.5,glowIntensity:1,addedAt:performance.now()}}catch{return null}}async startStatsPolling(){const t=async()=>{try{const[n,r,s]=await Promise.allSettled([fetch(`${Ye}/info/virtual-chain-blue-score`),fetch(`${Ye}/info/hashrate?stringOnly=false`),fetch(`${Ye}/info/blockdag`)]),o={isConnected:!0,isSynced:!0};if(n.status==="fulfilled"&&n.value.ok){const i=await n.value.json();o.blueScore=Number(i.blueScore||0)}if(r.status==="fulfilled"&&r.value.ok){const i=await r.value.json(),l=Number(i.hashrate||0);l>=1e6?o.hashrate=(l/1e6).toFixed(1)+" TH/s":l>=1e3?o.hashrate=(l/1e3).toFixed(1)+" GH/s":o.hashrate=l.toFixed(0)+" MH/s"}if(s.status==="fulfilled"&&s.value.ok){const i=await s.value.json(),l=Number(i.virtualDaaScore||0);l>0&&(o.daaScore=l)}this.statsCallbacks.forEach(i=>i(o))}catch(n){console.warn("[KaspaClient] Stats poll failed:",n)}};await t(),this.statsInterval=setInterval(t,5e3)}startMock(){this.useMock=!0,this.mockStream=new ai,this.mockStream.start(t=>{this.blockCallbacks.forEach(n=>n(t))}),this.setState("connected"),this.statsInterval=setInterval(()=>{const t=9+Math.random()*2;this.statsCallbacks.forEach(n=>n({blocksPerSecond:t,txPerSecond:t*.4,hashrate:(450+Math.random()*50).toFixed(1)+" TH/s",peerCount:180+Math.floor(Math.random()*40),isConnected:!0,isSynced:!0,serverVersion:"mock"}))},1e3)}async getBlockDetail(t){try{const n=await fetch(`${Ye}/blocks/${t}`);if(!n.ok)return null;const r=await n.json(),s=[];if(r.parents)for(const o of r.parents)Array.isArray(o.parentHashes)&&s.push(...o.parentHashes);return{hash:r.verboseData?.hash||t,parentHashes:s,blueScore:Number(r.verboseData?.blueScore||0),daaScore:Number(r.header?.daaScore||0),timestamp:Number(r.header?.timestamp||0),isBlue:!0,nonce:String(r.header?.nonce||"0"),bits:Number(r.header?.bits||0),version:Number(r.header?.version||0),transactions:(r.transactions||[]).map(o=>({id:o.verboseData?.transactionId||"unknown",inputs:o.inputs?.length||0,outputs:o.outputs?.length||0,amount:0}))}}catch(n){return console.warn("[KaspaClient] getBlockDetail failed:",n),null}}disconnect(){this.mockStream&&(this.mockStream.stop(),this.mockStream=null),this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null),this.statsInterval&&(clearInterval(this.statsInterval),this.statsInterval=null),this.setState("disconnected")}}const Ue=new li;var ci=O("<button> </button>"),fi=O('<div class="text-[10px] text-text-dim">Loading...</div>'),ui=O('<a target="_blank" rel="noopener" class="text-[10px] font-mono px-1.5 py-0.5 rounded bg-tx/10 text-tx hover:bg-tx/25 transition-colors no-underline"> <span class="text-text-dim"> </span></a>'),di=O('<div class="flex flex-wrap gap-1 max-h-16 overflow-y-auto"></div>'),hi=O('<div class="text-[10px] text-text-dim">Coinbase only</div>'),vi=O('<div class="min-h-44 max-h-64 bg-surface/80 backdrop-blur border-t border-border flex flex-col animate-fade-in overflow-hidden"><div class="flex items-center justify-between px-4 py-2 border-b border-border"><h3 class="text-xs font-semibold text-text-dim uppercase tracking-wider">Block Inspector</h3> <div class="flex items-center gap-3"><button class="text-[10px] text-accent hover:text-accent-glow transition-colors cursor-pointer bg-transparent border-none px-2 py-0.5 rounded border border-border hover:border-accent">View on Explorer &#8599;</button> <button class="text-text-dim hover:text-text transition-colors text-sm cursor-pointer">&times;</button></div></div> <div class="flex-1 px-4 py-2 grid grid-cols-2 md:grid-cols-4 gap-3 overflow-y-auto"><div class="col-span-2"><div class="text-[10px] text-text-dim uppercase mb-0.5">Block Hash</div> <button class="text-xs font-mono text-accent hover:text-accent-glow transition-colors cursor-pointer bg-transparent border-none p-0" title="Click to copy full hash"> </button></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Blue Score</div> <div class="text-sm font-bold tabular-nums text-text"> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">DAA Score</div> <div class="text-sm font-bold tabular-nums text-text"> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Timestamp</div> <div class="text-sm font-mono text-text"> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Transactions</div> <div> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Type</div> <div> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Nonce</div> <div class="text-sm font-mono text-text-dim"><!></div></div> <div class="col-span-2"><div class="text-[10px] text-text-dim uppercase mb-0.5"> </div> <div class="flex flex-wrap gap-1"></div></div> <div class="col-span-2"><div class="text-[10px] text-text-dim uppercase mb-0.5">Transaction IDs</div> <!></div></div></div>');function pi(e,t){at(t,!0);const n=()=>J(Hn,"$selectedBlock",o),r=()=>J(Ut,"$blockMap",o),s=()=>J(Qr,"$showInspector",o),[o,i]=ut();let l=ne(null),a=ne(!1);Ct(()=>{const v=n();v?(R(a,!0),R(l,null),Ue.getBlockDetail(v.hash).then(b=>{R(l,b,!0),R(a,!1)}).catch(()=>{R(a,!1)})):R(l,null)});function c(){Mt(null)}function f(){n()&&navigator.clipboard.writeText(n().hash)}function h(v){const b=r().get(v);b&&Mt(b)}function u(){n()&&window.open(`https://explorer.kaspa.org/blocks/${n().hash}`,"_blank")}var p=jt(),d=zt(p);{var m=v=>{var b=vi(),Y=x(b),z=w(x(Y),2),E=x(z);E.__click=u;var D=w(E,2);D.__click=c;var M=w(Y,2),B=x(M),k=w(x(B),2);k.__click=f;var ue=x(k),L=w(B,2),Re=w(x(L),2),It=x(Re),Rt=w(L,2),en=w(x(Rt),2),tn=x(en),$t=w(Rt,2),nn=w(x($t),2),dt=x(nn),ee=w($t,2),ht=w(x(ee),2),Xt=x(ht),Yt=w(ee,2),Ht=w(x(Yt),2),rn=x(Ht),g=w(Yt,2),A=w(x(g),2),I=x(A);{var H=j=>{var U=on("...");C(j,U)},P=j=>{var U=jt(),Ae=zt(U);{var se=V=>{var ye=on();ve(()=>N(ye,_(l).nonce)),C(V,ye)},pt=V=>{var ye=on("---");C(V,ye)};me(Ae,V=>{_(l)?V(se):V(pt,!1)},!0)}C(j,U)};me(I,j=>{_(a)?j(H):j(P,!1)})}var $e=w(g,2),Xe=x($e),qe=x(Xe),vt=w(Xe,2);xn(vt,5,()=>n().parentHashes,Vn,(j,U)=>{const Ae=st(()=>r().has(_(U)));var se=ci();se.__click=()=>h(_(U));var pt=x(se);ve(V=>{Qe(se,1,`text-[10px] font-mono px-1.5 py-0.5 rounded transition-colors cursor-pointer border-none ${_(Ae)?"bg-accent/15 text-accent hover:bg-accent/30":"bg-border/30 text-text-dim"}`),an(se,"title",_(U)),se.disabled=!_(Ae),N(pt,V)},[()=>fn(_(U),6)]),C(j,se)});var sn=w($e,2),ts=w(x(sn),2);{var ns=j=>{var U=fi();C(j,U)},rs=j=>{var U=jt(),Ae=zt(U);{var se=V=>{var ye=di();xn(ye,21,()=>_(l).transactions,Vn,(ss,_t)=>{var Nt=ui(),On=x(Nt),os=w(On),is=x(os);ve(as=>{an(Nt,"href",`https://explorer.kaspa.org/txs/${_(_t).id??""}`),an(Nt,"title",_(_t).id),N(On,`${as??""} `),N(is,`(${_(_t).inputs??""}in/${_(_t).outputs??""}out)`)},[()=>fn(_(_t).id,6)]),C(ss,Nt)}),C(V,ye)},pt=V=>{var ye=hi();C(V,ye)};me(Ae,V=>{_(l)&&_(l).transactions.length>0?V(se):V(pt,!1)},!0)}C(j,U)};me(ts,j=>{_(a)?j(ns):j(rs,!1)})}ve((j,U,Ae,se)=>{N(ue,j),N(It,U),N(tn,Ae),N(dt,se),Qe(ht,1,`text-sm font-bold tabular-nums ${n().txCount>0?"text-tx":"text-text-dim"}`),N(Xt,n().txCount),Qe(Ht,1,`text-sm font-bold ${n().isBlue?"text-accent":"text-block-red"}`),N(rn,n().isBlue?"Blue (GHOSTDAG)":"Red"),N(qe,`Parents (${n().parentHashes.length??""})`)},[()=>fn(n().hash,16),()=>n().blueScore.toLocaleString(),()=>n().daaScore.toLocaleString(),()=>$o(n().timestamp)]),C(v,b)};me(d,v=>{s()&&n()&&v(m)})}C(e,p),lt(),i()}Xn(["click"]);var _i=O('<div class="h-10 bg-surface/60 backdrop-blur border-t border-border flex items-center justify-center gap-6 px-4"><span class="text-[10px] text-text-dim uppercase tracking-wider">Confirmation Speed</span> <div class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-accent"></div> <span class="text-xs font-bold text-accent tabular-nums"> </span></div> <div class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-purple-500/60"></div> <span class="text-xs text-text-dim tabular-nums">Ethereum: ~12s</span></div> <div class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-orange-500/60"></div> <span class="text-xs text-text-dim tabular-nums">Bitcoin: ~600s</span></div></div>');function gi(e,t){at(t,!0);const n=()=>J(Qt,"$blocksPerSecond",r),[r,s]=ut();let o=st(()=>Math.max(.1,1/Math.max(1,n())).toFixed(2));var i=_i(),l=w(x(i),2),a=w(x(l),2),c=x(a);ve(()=>N(c,`Kaspa: ${_(o)??""}s`)),C(e,i),lt(),s()}var bi=O('<div class="absolute inset-0 flex items-center justify-center bg-bg/80 backdrop-blur-sm z-10"><div class="text-center animate-fade-in"><div class="w-12 h-12 rounded-full border-2 border-accent border-t-transparent animate-spin mx-auto mb-4"></div> <div class="text-text text-lg font-semibold">Connecting to Kaspa Network</div> <div class="text-text-dim text-sm mt-1">Fetching live BlockDAG data...</div></div></div>'),mi=O('<div class="w-full h-full flex flex-col bg-bg"><!> <div class="flex-1 flex min-h-0 relative"><!> <!> <!></div> <!> <!></div>');function xi(e,t){at(t,!0);const n=()=>J(kn,"$connectionState",s),r=()=>J(Nn,"$blocks",s),[s,o]=ut();let i=ne(!0),l=ne(!1);function a(){R(l,window.innerWidth<768),_(l)&&R(i,!1)}Jr(()=>{a(),window.addEventListener("resize",a),Ue.onBlock(k=>{Ro(k)}),Ue.onStats(k=>{cn(k)}),Ue.onStateChange(k=>{kn.set(k)});const M=Qt.subscribe(k=>cn({blocksPerSecond:k})),B=Fn.subscribe(k=>cn({txPerSecond:k}));return Ue.connect(),()=>{Ue.disconnect(),M(),B(),window.removeEventListener("resize",a)}});function c(){R(i,!_(i))}let f=st(()=>n()==="connecting"||n()==="disconnected"),h=st(()=>r().length>0);var u=mi(),p=x(u);Po(p,{get isMobile(){return _(l)},toggleStats:c,get showStats(){return _(i)}});var d=w(p,2),m=x(d);{var v=M=>{Fo(M,{})};me(m,M=>{_(i)&&M(v)})}var b=w(m,2);si(b,{});var Y=w(b,2);{var z=M=>{var B=bi();C(M,B)};me(Y,M=>{_(f)&&!_(h)&&M(z)})}var E=w(d,2);pi(E,{});var D=w(E,2);gi(D,{}),C(e,u),lt(),o()}fo(xi,{target:document.getElementById("app")});
