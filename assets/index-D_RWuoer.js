(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Rt=!1;var $n=Array.isArray,Er=Array.prototype.indexOf,He=Array.prototype.includes,kt=Array.from,Pn=Object.defineProperty,nt=Object.getOwnPropertyDescriptor,Mr=Object.getOwnPropertyDescriptors,Cr=Object.prototype,Br=Array.prototype,In=Object.getPrototypeOf,vn=Object.isExtensible;const Fe=()=>{};function Ar(e){return e()}function Dt(e){for(var t=0;t<e.length;t++)e[t]()}function Rn(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const R=2,wt=4,at=8,Dn=1<<24,pe=16,ae=32,$e=64,Wt=128,ee=512,$=1024,D=2048,le=4096,q=8192,be=16384,Zt=32768,Xe=65536,pn=1<<17,Fn=1<<18,je=1<<19,Nn=1<<20,ge=1<<25,Be=32768,Ft=1<<21,Jt=1<<22,me=1<<23,Ne=Symbol("$state"),Re=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Tr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function $r(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Pr(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Ir(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Rr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Dr(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Fr(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Nr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Hr(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Or(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Yr=1,zr=2,Lr=16,jr=2,I=Symbol();function Kr(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Hn(e){return e===this.v}function Xn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function On(e){return!Xn(e,this.v)}let ft=!1,qr=!1;function Gr(){ft=!0}let A=null;function Oe(e){A=e}function Ke(e,t=!1,n){A={p:A,i:!1,c:null,e:null,s:e,x:null,l:ft&&!t?{s:null,u:null,$:[]}:null}}function qe(e){var t=A,n=t.e;if(n!==null){t.e=null;for(var r of n)rr(r)}return t.i=!0,A=t.p,{}}function ct(){return!ft||A!==null&&A.l===null}let De=[];function Vr(){var e=De;De=[],Dt(e)}function we(e){if(De.length===0){var t=De;queueMicrotask(()=>{t===De&&Vr()})}De.push(e)}function Yn(e){var t=x;if(t===null)return b.f|=me,e;if((t.f&Zt)===0){if((t.f&Wt)===0)throw e;t.b.error(e)}else Ye(e,t)}function Ye(e,t){for(;t!==null;){if((t.f&Wt)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Ur=-7169;function B(e,t){e.f=e.f&Ur|t}function Qt(e){(e.f&ee)!==0||e.deps===null?B(e,$):B(e,le)}function zn(e){if(e!==null)for(const t of e)(t.f&R)===0||(t.f&Be)===0||(t.f^=Be,zn(t.deps))}function Ln(e,t,n){(e.f&D)!==0?t.add(e):(e.f&le)!==0&&n.add(e),zn(e.deps),B(e,$)}const gt=new Set;let E=null,se=null,J=[],en=null,Nt=!1;class xe{committed=!1;current=new Map;previous=new Map;#t=new Set;#l=new Set;#e=0;#i=0;#o=null;#r=new Set;#n=new Set;#s=new Map;is_fork=!1;#a=!1;is_deferred(){return this.is_fork||this.#i>0}skip_effect(t){this.#s.has(t)||this.#s.set(t,{d:[],m:[]})}unskip_effect(t){var n=this.#s.get(t);if(n){this.#s.delete(t);for(var r of n.d)B(r,D),ie(r);for(r of n.m)B(r,le),ie(r)}}process(t){J=[],this.apply();var n=[],r=[];for(const s of t)this.#f(s,n,r);if(this.is_deferred()){this.#c(r),this.#c(n);for(const[s,i]of this.#s)qn(s,i)}else{for(const s of this.#t)s();this.#t.clear(),this.#e===0&&this.#u(),E=null,_n(r),_n(n),this.#o?.resolve()}se=null}#f(t,n,r){t.f^=$;for(var s=t.first,i=null;s!==null;){var o=s.f,l=(o&(ae|$e))!==0,f=l&&(o&$)!==0,a=f||(o&q)!==0||this.#s.has(s);if(!a&&s.fn!==null){l?s.f^=$:i!==null&&(o&(wt|at|Dn))!==0?i.b.defer_effect(s):(o&wt)!==0?n.push(s):dt(s)&&((o&pe)!==0&&this.#n.add(s),it(s));var h=s.first;if(h!==null){s=h;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===i&&(i=null),s=d.next,d=d.parent}}#c(t){for(var n=0;n<t.length;n+=1)Ln(t[n],this.#r,this.#n)}capture(t,n){n!==I&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&me)===0&&(this.current.set(t,t.v),se?.set(t,t.v))}activate(){E=this,this.apply()}deactivate(){E===this&&(E=null,se=null)}flush(){if(this.activate(),J.length>0){if(Wr(),E!==null&&E!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#l)t(this);this.#l.clear()}#u(){if(gt.size>1){this.previous.clear();var t=se,n=!0;for(const s of gt){if(s===this){n=!1;continue}const i=[];for(const[l,f]of this.current){if(s.current.has(l))if(n&&f!==s.current.get(l))s.current.set(l,f);else continue;i.push(l)}if(i.length===0)continue;const o=[...s.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var r=J;J=[];const l=new Set,f=new Map;for(const a of i)jn(a,o,l,f);if(J.length>0){E=s,s.apply();for(const a of J)s.#f(a,[],[]);s.deactivate()}J=r}}E=null,se=t}this.committed=!0,gt.delete(this)}increment(t){this.#e+=1,t&&(this.#i+=1)}decrement(t){this.#e-=1,t&&(this.#i-=1),!this.#a&&(this.#a=!0,we(()=>{this.#a=!1,this.is_deferred()?J.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#r)this.#n.delete(t),B(t,D),ie(t);for(const t of this.#n)B(t,le),ie(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#l.add(t)}settled(){return(this.#o??=Rn()).promise}static ensure(){if(E===null){const t=E=new xe;gt.add(E),we(()=>{E===t&&t.flush()})}return E}apply(){}}function Wr(){Nt=!0;var e=null;try{for(var t=0;J.length>0;){var n=xe.ensure();if(t++>1e3){var r,s;Zr()}n.process(J),ye.clear()}}finally{J=[],Nt=!1,en=null}}function Zr(){try{Fr()}catch(e){Ye(e,en)}}let ve=null;function _n(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(be|q))===0&&dt(r)&&(ve=new Set,it(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?lr(r):r.fn=null),ve?.size>0)){ye.clear();for(const s of ve){if((s.f&(be|q))!==0)continue;const i=[s];let o=s.parent;for(;o!==null;)ve.has(o)&&(ve.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const f=i[l];(f.f&(be|q))===0&&it(f)}}ve.clear()}}ve=null}}function jn(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&R)!==0?jn(s,t,n,r):(i&(Jt|pe))!==0&&(i&D)===0&&Kn(s,t,r)&&(B(s,D),ie(s))}}function Kn(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(He.call(t,s))return!0;if((s.f&R)!==0&&Kn(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function ie(e){for(var t=en=e;t.parent!==null;){t=t.parent;var n=t.f;if(Nt&&t===x&&(n&pe)!==0&&(n&Fn)===0)return;if((n&($e|ae))!==0){if((n&$)===0)return;t.f^=$}}J.push(t)}function qn(e,t){if(!((e.f&ae)!==0&&(e.f&$)!==0)){(e.f&D)!==0?t.d.push(e):(e.f&le)!==0&&t.m.push(e),B(e,$);for(var n=e.first;n!==null;)qn(n,t),n=n.next}}function Jr(e){let t=0,n=Ae(0),r;return()=>{sn()&&(_(n),sr(()=>(t===0&&(r=Ge(()=>e(()=>rt(n)))),t+=1,()=>{we(()=>{t-=1,t===0&&(r?.(),r=void 0,rt(n))})})))}}var Qr=Xe|je|Wt;function es(e,t,n){new ts(e,t,n)}class ts{parent;is_pending=!1;#t;#l=null;#e;#i;#o;#r=null;#n=null;#s=null;#a=null;#f=null;#c=0;#u=0;#v=!1;#h=!1;#p=new Set;#_=new Set;#d=null;#x=Jr(()=>(this.#d=Ae(this.#c),()=>{this.#d=null}));constructor(t,n,r){this.#t=t,this.#e=n,this.#i=r,this.parent=x.b,this.is_pending=!!this.#e.pending,this.#o=ln(()=>{x.b=this;{var s=this.#m();try{this.#r=Q(()=>r(s))}catch(i){this.error(i)}this.#u>0?this.#b():this.is_pending=!1}return()=>{this.#f?.remove()}},Qr)}#y(){try{this.#r=Q(()=>this.#i(this.#t))}catch(t){this.error(t)}}#k(){const t=this.#e.pending;t&&(this.#n=Q(()=>t(this.#t)),we(()=>{var n=this.#m();this.#r=this.#g(()=>(xe.ensure(),Q(()=>this.#i(n)))),this.#u>0?this.#b():(Me(this.#n,()=>{this.#n=null}),this.is_pending=!1)}))}#m(){var t=this.#t;return this.is_pending&&(this.#f=ke(),this.#t.before(this.#f),t=this.#f),t}defer_effect(t){Ln(t,this.#p,this.#_)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(t){var n=x,r=b,s=A;de(this.#o),ne(this.#o),Oe(this.#o.ctx);try{return t()}catch(i){return Yn(i),null}finally{de(n),ne(r),Oe(s)}}#b(){const t=this.#e.pending;this.#r!==null&&(this.#a=document.createDocumentFragment(),this.#a.append(this.#f),cr(this.#r,this.#a)),this.#n===null&&(this.#n=Q(()=>t(this.#t)))}#w(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#w(t);return}if(this.#u+=t,this.#u===0){this.is_pending=!1;for(const n of this.#p)B(n,D),ie(n);for(const n of this.#_)B(n,le),ie(n);this.#p.clear(),this.#_.clear(),this.#n&&Me(this.#n,()=>{this.#n=null}),this.#a&&(this.#t.before(this.#a),this.#a=null)}}update_pending_count(t){this.#w(t),this.#c+=t,!(!this.#d||this.#v)&&(this.#v=!0,we(()=>{this.#v=!1,this.#d&&ze(this.#d,this.#c)}))}get_effect_pending(){return this.#x(),_(this.#d)}error(t){var n=this.#e.onerror;let r=this.#e.failed;if(this.#h||!n&&!r)throw t;this.#r&&(Y(this.#r),this.#r=null),this.#n&&(Y(this.#n),this.#n=null),this.#s&&(Y(this.#s),this.#s=null);var s=!1,i=!1;const o=()=>{if(s){Kr();return}s=!0,i&&Or(),xe.ensure(),this.#c=0,this.#s!==null&&Me(this.#s,()=>{this.#s=null}),this.is_pending=this.has_pending_snippet(),this.#r=this.#g(()=>(this.#h=!1,Q(()=>this.#i(this.#t)))),this.#u>0?this.#b():this.is_pending=!1};we(()=>{try{i=!0,n?.(t,o),i=!1}catch(l){Ye(l,this.#o&&this.#o.parent)}r&&(this.#s=this.#g(()=>{xe.ensure(),this.#h=!0;try{return Q(()=>{r(this.#t,()=>t,()=>o)})}catch(l){return Ye(l,this.#o.parent),null}finally{this.#h=!1}}))})}}function ns(e,t,n,r){const s=ct()?St:Gn;var i=e.filter(u=>!u.settled);if(n.length===0&&i.length===0){r(t.map(s));return}var o=E,l=x,f=rs(),a=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(u=>u.promise)):null;function h(u){f();try{r(u)}catch(v){(l.f&be)===0&&Ye(v,l)}o?.deactivate(),Ht()}if(n.length===0){a.then(()=>h(t.map(s)));return}function d(){f(),Promise.all(n.map(u=>ss(u))).then(u=>h([...t.map(s),...u])).catch(u=>Ye(u,l))}a?a.then(d):d()}function rs(){var e=x,t=b,n=A,r=E;return function(i=!0){de(e),ne(t),Oe(n),i&&r?.activate()}}function Ht(){de(null),ne(null),Oe(null)}function St(e){var t=R|D,n=b!==null&&(b.f&R)!==0?b:null;return x!==null&&(x.f|=je),{ctx:A,deps:null,effects:null,equals:Hn,f:t,fn:e,reactions:null,rv:0,v:I,wv:0,parent:n??x,ac:null}}function ss(e,t,n){let r=x;r===null&&$r();var s=r.b,i=void 0,o=Ae(I),l=!b,f=new Map;return vs(()=>{var a=Rn();i=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{h===E&&h.committed&&h.deactivate(),Ht()})}catch(v){a.reject(v),Ht()}var h=E;if(l){var d=s.is_rendered();s.update_pending_count(1),h.increment(d),f.get(h)?.reject(Re),f.delete(h),f.set(h,a)}const u=(v,c=void 0)=>{if(h.activate(),c)c!==Re&&(o.f|=me,ze(o,c));else{(o.f&me)!==0&&(o.f^=me),ze(o,v);for(const[p,m]of f){if(f.delete(p),p===h)break;m.reject(Re)}}l&&(s.update_pending_count(-1),h.decrement(d))};a.promise.then(u,v=>u(null,v||"unknown"))}),on(()=>{for(const a of f.values())a.reject(Re)}),new Promise(a=>{function h(d){function u(){d===i?a(o):h(i)}d.then(u,u)}h(i)})}function st(e){const t=St(e);return ur(t),t}function Gn(e){const t=St(e);return t.equals=On,t}function Vn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Y(t[n])}}function is(e){for(var t=e.parent;t!==null;){if((t.f&R)===0)return(t.f&be)===0?t:null;t=t.parent}return null}function tn(e){var t,n=x;de(is(e));try{e.f&=~Be,Vn(e),t=pr(e)}finally{de(n)}return t}function Un(e){var t=tn(e);if(!e.equals(t)&&(e.wv=hr(),(!E?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){B(e,$);return}Te||(se!==null?(sn()||E?.is_fork)&&se.set(e,t):Qt(e))}let Xt=new Set;const ye=new Map;let Wn=!1;function Ae(e,t){var n={f:0,v:e,reactions:null,equals:Hn,rv:0,wv:0};return n}function ue(e,t){const n=Ae(e);return ur(n),n}function xt(e,t=!1,n=!0){const r=Ae(e);return t||(r.equals=On),ft&&n&&A!==null&&A.l!==null&&(A.l.s??=[]).push(r),r}function Ue(e,t){return O(e,Ge(()=>_(e))),t}function O(e,t,n=!1){b!==null&&(!oe||(b.f&pn)!==0)&&ct()&&(b.f&(R|pe|Jt|pn))!==0&&(te===null||!He.call(te,e))&&Xr();let r=n?Qe(t):t;return ze(e,r)}function ze(e,t){if(!e.equals(t)){var n=e.v;Te?ye.set(e,t):ye.set(e,n),e.v=t;var r=xe.ensure();if(r.capture(e,n),(e.f&R)!==0){const s=e;(e.f&D)!==0&&tn(s),Qt(s)}e.wv=hr(),Zn(e,D),ct()&&x!==null&&(x.f&$)!==0&&(x.f&(ae|$e))===0&&(Z===null?gs([e]):Z.push(e)),!r.is_fork&&Xt.size>0&&!Wn&&os()}return t}function os(){Wn=!1;for(const e of Xt)(e.f&$)!==0&&B(e,le),dt(e)&&it(e);Xt.clear()}function rt(e){O(e,e.v+1)}function Zn(e,t){var n=e.reactions;if(n!==null)for(var r=ct(),s=n.length,i=0;i<s;i++){var o=n[i],l=o.f;if(!(!r&&o===x)){var f=(l&D)===0;if(f&&B(o,t),(l&R)!==0){var a=o;se?.delete(a),(l&Be)===0&&(l&ee&&(o.f|=Be),Zn(a,le))}else f&&((l&pe)!==0&&ve!==null&&ve.add(o),ie(o))}}}function Qe(e){if(typeof e!="object"||e===null||Ne in e)return e;const t=In(e);if(t!==Cr&&t!==Br)return e;var n=new Map,r=$n(e),s=ue(0),i=Ce,o=l=>{if(Ce===i)return l();var f=b,a=Ce;ne(null),mn(i);var h=l();return ne(f),mn(a),h};return r&&n.set("length",ue(e.length)),new Proxy(e,{defineProperty(l,f,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&Nr();var h=n.get(f);return h===void 0?h=o(()=>{var d=ue(a.value);return n.set(f,d),d}):O(h,a.value,!0),!0},deleteProperty(l,f){var a=n.get(f);if(a===void 0){if(f in l){const h=o(()=>ue(I));n.set(f,h),rt(s)}}else O(a,I),rt(s);return!0},get(l,f,a){if(f===Ne)return e;var h=n.get(f),d=f in l;if(h===void 0&&(!d||nt(l,f)?.writable)&&(h=o(()=>{var v=Qe(d?l[f]:I),c=ue(v);return c}),n.set(f,h)),h!==void 0){var u=_(h);return u===I?void 0:u}return Reflect.get(l,f,a)},getOwnPropertyDescriptor(l,f){var a=Reflect.getOwnPropertyDescriptor(l,f);if(a&&"value"in a){var h=n.get(f);h&&(a.value=_(h))}else if(a===void 0){var d=n.get(f),u=d?.v;if(d!==void 0&&u!==I)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return a},has(l,f){if(f===Ne)return!0;var a=n.get(f),h=a!==void 0&&a.v!==I||Reflect.has(l,f);if(a!==void 0||x!==null&&(!h||nt(l,f)?.writable)){a===void 0&&(a=o(()=>{var u=h?Qe(l[f]):I,v=ue(u);return v}),n.set(f,a));var d=_(a);if(d===I)return!1}return h},set(l,f,a,h){var d=n.get(f),u=f in l;if(r&&f==="length")for(var v=a;v<d.v;v+=1){var c=n.get(v+"");c!==void 0?O(c,I):v in l&&(c=o(()=>ue(I)),n.set(v+"",c))}if(d===void 0)(!u||nt(l,f)?.writable)&&(d=o(()=>ue(void 0)),O(d,Qe(a)),n.set(f,d));else{u=d.v!==I;var p=o(()=>Qe(a));O(d,p)}var m=Reflect.getOwnPropertyDescriptor(l,f);if(m?.set&&m.set.call(h,a),!u){if(r&&typeof f=="string"){var M=n.get("length"),S=Number(f);Number.isInteger(S)&&S>=M.v&&O(M,S+1)}rt(s)}return!0},ownKeys(l){_(s);var f=Reflect.ownKeys(l).filter(d=>{var u=n.get(d);return u===void 0||u.v!==I});for(var[a,h]of n)h.v!==I&&!(a in l)&&f.push(a);return f},setPrototypeOf(){Hr()}})}var gn,Jn,Qn,er;function ls(){if(gn===void 0){gn=window,Jn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Qn=nt(t,"firstChild").get,er=nt(t,"nextSibling").get,vn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),vn(n)&&(n.__t=void 0)}}function ke(e=""){return document.createTextNode(e)}function nn(e){return Qn.call(e)}function ut(e){return er.call(e)}function g(e,t){return nn(e)}function as(e,t=!1){{var n=nn(e);return n instanceof Comment&&n.data===""?ut(n):n}}function w(e,t=1,n=!1){let r=e;for(;t--;)r=ut(r);return r}function fs(e){e.textContent=""}function tr(){return!1}function rn(e){var t=b,n=x;ne(null),de(null);try{return e()}finally{ne(t),de(n)}}function nr(e){x===null&&(b===null&&Dr(),Rr()),Te&&Ir()}function cs(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function he(e,t,n){var r=x;r!==null&&(r.f&q)!==0&&(e|=q);var s={ctx:A,deps:null,nodes:null,f:e|D|ee,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{it(s),s.f|=Zt}catch(l){throw Y(s),l}else t!==null&&ie(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&je)===0&&(i=i.first,(e&pe)!==0&&(e&Xe)!==0&&i!==null&&(i.f|=Xe)),i!==null&&(i.parent=r,r!==null&&cs(i,r),b!==null&&(b.f&R)!==0&&(e&$e)===0)){var o=b;(o.effects??=[]).push(i)}return s}function sn(){return b!==null&&!oe}function on(e){const t=he(at,null,!1);return B(t,$),t.teardown=e,t}function Ot(e){nr();var t=x.f,n=!b&&(t&ae)!==0&&(t&Zt)===0;if(n){var r=A;(r.e??=[]).push(e)}else return rr(e)}function rr(e){return he(wt|Nn,e,!1)}function us(e){return nr(),he(at|Nn,e,!0)}function ds(e){xe.ensure();const t=he($e|je,e,!0);return(n={})=>new Promise(r=>{n.outro?Me(t,()=>{Y(t),r(void 0)}):(Y(t),r(void 0))})}function hs(e){return he(wt,e,!1)}function vs(e){return he(Jt|je,e,!0)}function sr(e,t=0){return he(at|t,e,!0)}function Le(e,t=[],n=[],r=[]){ns(r,t,n,s=>{he(at,()=>e(...s.map(_)),!0)})}function ln(e,t=0){var n=he(pe|t,e,!0);return n}function Q(e){return he(ae|je,e,!0)}function ir(e){var t=e.teardown;if(t!==null){const n=Te,r=b;bn(!0),ne(null);try{t.call(null)}finally{bn(n),ne(r)}}}function or(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&rn(()=>{s.abort(Re)});var r=n.next;(n.f&$e)!==0?n.parent=null:Y(n,t),n=r}}function ps(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ae)===0&&Y(t),t=n}}function Y(e,t=!0){var n=!1;(t||(e.f&Fn)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(_s(e.nodes.start,e.nodes.end),n=!0),or(e,t&&!n),yt(e,0),B(e,be);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();ir(e);var s=e.parent;s!==null&&s.first!==null&&lr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function _s(e,t){for(;e!==null;){var n=e===t?null:ut(e);e.remove(),e=n}}function lr(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Me(e,t,n=!0){var r=[];ar(e,r,!0);var s=()=>{n&&Y(e),t&&t()},i=r.length;if(i>0){var o=()=>--i||s();for(var l of r)l.out(o)}else s()}function ar(e,t,n){if((e.f&q)===0){e.f^=q;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||n)&&t.push(l);for(var s=e.first;s!==null;){var i=s.next,o=(s.f&Xe)!==0||(s.f&ae)!==0&&(e.f&pe)!==0;ar(s,t,o?n:!1),s=i}}}function an(e){fr(e,!0)}function fr(e,t){if((e.f&q)!==0){e.f^=q,(e.f&$)===0&&(B(e,D),ie(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Xe)!==0||(n.f&ae)!==0;fr(n,s?t:!1),n=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||t)&&o.in()}}function cr(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var s=n===r?null:ut(n);t.append(n),n=s}}let mt=!1,Te=!1;function bn(e){Te=e}let b=null,oe=!1;function ne(e){b=e}let x=null;function de(e){x=e}let te=null;function ur(e){b!==null&&(te===null?te=[e]:te.push(e))}let H=null,L=0,Z=null;function gs(e){Z=e}let dr=1,Ee=0,Ce=Ee;function mn(e){Ce=e}function hr(){return++dr}function dt(e){var t=e.f;if((t&D)!==0)return!0;if(t&R&&(e.f&=~Be),(t&le)!==0){for(var n=e.deps,r=n.length,s=0;s<r;s++){var i=n[s];if(dt(i)&&Un(i),i.wv>e.wv)return!0}(t&ee)!==0&&se===null&&B(e,$)}return!1}function vr(e,t,n=!0){var r=e.reactions;if(r!==null&&!(te!==null&&He.call(te,e)))for(var s=0;s<r.length;s++){var i=r[s];(i.f&R)!==0?vr(i,t,!1):t===i&&(n?B(i,D):(i.f&$)!==0&&B(i,le),ie(i))}}function pr(e){var t=H,n=L,r=Z,s=b,i=te,o=A,l=oe,f=Ce,a=e.f;H=null,L=0,Z=null,b=(a&(ae|$e))===0?e:null,te=null,Oe(e.ctx),oe=!1,Ce=++Ee,e.ac!==null&&(rn(()=>{e.ac.abort(Re)}),e.ac=null);try{e.f|=Ft;var h=e.fn,d=h(),u=e.deps,v=E?.is_fork;if(H!==null){var c;if(v||yt(e,L),u!==null&&L>0)for(u.length=L+H.length,c=0;c<H.length;c++)u[L+c]=H[c];else e.deps=u=H;if(sn()&&(e.f&ee)!==0)for(c=L;c<u.length;c++)(u[c].reactions??=[]).push(e)}else!v&&u!==null&&L<u.length&&(yt(e,L),u.length=L);if(ct()&&Z!==null&&!oe&&u!==null&&(e.f&(R|le|D))===0)for(c=0;c<Z.length;c++)vr(Z[c],e);if(s!==null&&s!==e){if(Ee++,s.deps!==null)for(let p=0;p<n;p+=1)s.deps[p].rv=Ee;if(t!==null)for(const p of t)p.rv=Ee;Z!==null&&(r===null?r=Z:r.push(...Z))}return(e.f&me)!==0&&(e.f^=me),d}catch(p){return Yn(p)}finally{e.f^=Ft,H=t,L=n,Z=r,b=s,te=i,Oe(o),oe=l,Ce=f}}function bs(e,t){let n=t.reactions;if(n!==null){var r=Er.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}if(n===null&&(t.f&R)!==0&&(H===null||!He.call(H,t))){var i=t;(i.f&ee)!==0&&(i.f^=ee,i.f&=~Be),Qt(i),Vn(i),yt(i,0)}}function yt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)bs(e,n[r])}function it(e){var t=e.f;if((t&be)===0){B(e,$);var n=x,r=mt;x=e,mt=!0;try{(t&(pe|Dn))!==0?ps(e):or(e),ir(e);var s=pr(e);e.teardown=typeof s=="function"?s:null,e.wv=dr;var i;Rt&&qr&&(e.f&D)!==0&&e.deps}finally{mt=r,x=n}}}function _(e){var t=e.f,n=(t&R)!==0;if(b!==null&&!oe){var r=x!==null&&(x.f&be)!==0;if(!r&&(te===null||!He.call(te,e))){var s=b.deps;if((b.f&Ft)!==0)e.rv<Ee&&(e.rv=Ee,H===null&&s!==null&&s[L]===e?L++:H===null?H=[e]:H.push(e));else{(b.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[b]:He.call(i,b)||i.push(b)}}}if(Te&&ye.has(e))return ye.get(e);if(n){var o=e;if(Te){var l=o.v;return((o.f&$)===0&&o.reactions!==null||gr(o))&&(l=tn(o)),ye.set(o,l),l}var f=(o.f&ee)===0&&!oe&&b!==null&&(mt||(b.f&ee)!==0),a=o.deps===null;dt(o)&&(f&&(o.f|=ee),Un(o)),f&&!a&&_r(o)}if(se?.has(e))return se.get(e);if((e.f&me)!==0)throw e.v;return e.v}function _r(e){if(e.deps!==null){e.f|=ee;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&R)!==0&&(t.f&ee)===0&&_r(t)}}function gr(e){if(e.v===I)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ye.has(t)||(t.f&R)!==0&&gr(t))return!0;return!1}function Ge(e){var t=oe;try{return oe=!0,e()}finally{oe=t}}function ms(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ne in e)Yt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Ne in n&&Yt(n)}}}function Yt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Yt(e[r],t)}catch{}const n=In(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Mr(n);for(let s in r){const i=r[s].get;if(i)try{i.call(e)}catch{}}}}}const ws=["touchstart","touchmove"];function xs(e){return ws.includes(e)}const br=new Set,zt=new Set;function ys(e,t,n,r={}){function s(i){if(r.capture||et.call(t,i),!i.cancelBubble)return rn(()=>n?.call(this,i))}return we(()=>{t.addEventListener(e,s,r)}),s}function ks(e,t,n,r,s){var i={capture:r,passive:s},o=ys(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&on(()=>{t.removeEventListener(e,o,i)})}function fn(e){for(var t=0;t<e.length;t++)br.add(e[t]);for(var n of zt)n(e)}let wn=null;function et(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;wn=e;var o=0,l=wn===e&&e.__root;if(l){var f=s.indexOf(l);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var a=s.indexOf(t);if(a===-1)return;f<=a&&(o=f)}if(i=s[o]||e.target,i!==t){Pn(e,"currentTarget",{configurable:!0,get(){return i||n}});var h=b,d=x;ne(null),de(null);try{for(var u,v=[];i!==null;){var c=i.assignedSlot||i.parentNode||i.host||null;try{var p=i["__"+r];p!=null&&(!i.disabled||e.target===i)&&p.call(i,e)}catch(m){u?v.push(m):u=m}if(e.cancelBubble||c===t||c===null)break;i=c}if(u){for(let m of v)queueMicrotask(()=>{throw m});throw u}}finally{e.__root=t,delete e.currentTarget,ne(h),de(d)}}}function Ss(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function mr(e,t){var n=x;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function fe(e,t){var n=(t&jr)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=Ss(s?e:"<!>"+e),r=nn(r));var i=n||Jn?document.importNode(r,!0):r.cloneNode(!0);return mr(i,i),i}}function Es(){var e=document.createDocumentFragment(),t=document.createComment(""),n=ke();return e.append(t,n),mr(t,n),e}function re(e,t){e!==null&&e.before(t)}function j(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Ms(e,t){return Cs(e,t)}const Pe=new Map;function Cs(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:o=!0}){ls();var l=new Set,f=d=>{for(var u=0;u<d.length;u++){var v=d[u];if(!l.has(v)){l.add(v);var c=xs(v);t.addEventListener(v,et,{passive:c});var p=Pe.get(v);p===void 0?(document.addEventListener(v,et,{passive:c}),Pe.set(v,1)):Pe.set(v,p+1)}}};f(kt(br)),zt.add(f);var a=void 0,h=ds(()=>{var d=n??t.appendChild(ke());return es(d,{pending:()=>{}},u=>{Ke({});var v=A;i&&(v.c=i),s&&(r.$$events=s),a=e(u,r)||{},qe()}),()=>{for(var u of l){t.removeEventListener(u,et);var v=Pe.get(u);--v===0?(document.removeEventListener(u,et),Pe.delete(u)):Pe.set(u,v)}zt.delete(f),d!==n&&d.parentNode?.removeChild(d)}});return Bs.set(a,h),a}let Bs=new WeakMap;class As{anchor;#t=new Map;#l=new Map;#e=new Map;#i=new Set;#o=!0;constructor(t,n=!0){this.anchor=t,this.#o=n}#r=()=>{var t=E;if(this.#t.has(t)){var n=this.#t.get(t),r=this.#l.get(n);if(r)an(r),this.#i.delete(n);else{var s=this.#e.get(n);s&&(this.#l.set(n,s.effect),this.#e.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,o]of this.#t){if(this.#t.delete(i),i===t)break;const l=this.#e.get(o);l&&(Y(l.effect),this.#e.delete(o))}for(const[i,o]of this.#l){if(i===n||this.#i.has(i))continue;const l=()=>{if(Array.from(this.#t.values()).includes(i)){var a=document.createDocumentFragment();cr(o,a),a.append(ke()),this.#e.set(i,{effect:o,fragment:a})}else Y(o);this.#i.delete(i),this.#l.delete(i)};this.#o||!r?(this.#i.add(i),Me(o,l,!1)):l()}}};#n=t=>{this.#t.delete(t);const n=Array.from(this.#t.values());for(const[r,s]of this.#e)n.includes(r)||(Y(s.effect),this.#e.delete(r))};ensure(t,n){var r=E,s=tr();if(n&&!this.#l.has(t)&&!this.#e.has(t))if(s){var i=document.createDocumentFragment(),o=ke();i.append(o),this.#e.set(t,{effect:Q(()=>n(o)),fragment:i})}else this.#l.set(t,Q(()=>n(this.anchor)));if(this.#t.set(r,t),s){for(const[l,f]of this.#l)l===t?r.unskip_effect(f):r.skip_effect(f);for(const[l,f]of this.#e)l===t?r.unskip_effect(f.effect):r.skip_effect(f.effect);r.oncommit(this.#r),r.ondiscard(this.#n)}else this.#r()}}function ot(e,t,n=!1){var r=new As(e),s=n?Xe:0;function i(o,l){r.ensure(o,l)}ln(()=>{var o=!1;t((l,f=!0)=>{o=!0,i(f,l)}),o||i(!1,null)},s)}function Ts(e,t){return t}function $s(e,t,n){for(var r=[],s=t.length,i,o=t.length,l=0;l<s;l++){let d=t[l];Me(d,()=>{if(i){if(i.pending.delete(d),i.done.add(d),i.pending.size===0){var u=e.outrogroups;Lt(kt(i.done)),u.delete(i),u.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var f=r.length===0&&n!==null;if(f){var a=n,h=a.parentNode;fs(h),h.append(a),e.items.clear()}Lt(t,!f)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function Lt(e,t=!0){for(var n=0;n<e.length;n++)Y(e[n],t)}var xn;function Ps(e,t,n,r,s,i=null){var o=e,l=new Map;{var f=e;o=f.appendChild(ke())}var a=null,h=Gn(()=>{var m=n();return $n(m)?m:m==null?[]:kt(m)}),d,u=!0;function v(){p.fallback=a,Is(p,d,o,t,r),a!==null&&(d.length===0?(a.f&ge)===0?an(a):(a.f^=ge,tt(a,null,o)):Me(a,()=>{a=null}))}var c=ln(()=>{d=_(h);for(var m=d.length,M=new Set,S=E,G=tr(),P=0;P<m;P+=1){var N=d[P],C=r(N,P),T=u?null:l.get(C);T?(T.v&&ze(T.v,N),T.i&&ze(T.i,P),G&&S.unskip_effect(T.e)):(T=Rs(l,u?o:xn??=ke(),N,C,P,s,t,n),u||(T.e.f|=ge),l.set(C,T)),M.add(C)}if(m===0&&i&&!a&&(u?a=Q(()=>i(o)):(a=Q(()=>i(xn??=ke())),a.f|=ge)),m>M.size&&Pr(),!u)if(G){for(const[k,V]of l)M.has(k)||S.skip_effect(V.e);S.oncommit(v),S.ondiscard(()=>{})}else v();_(h)}),p={effect:c,items:l,outrogroups:null,fallback:a};u=!1}function We(e){for(;e!==null&&(e.f&ae)===0;)e=e.next;return e}function Is(e,t,n,r,s){var i=t.length,o=e.items,l=We(e.effect.first),f,a=null,h=[],d=[],u,v,c,p;for(p=0;p<i;p+=1){if(u=t[p],v=s(u,p),c=o.get(v).e,e.outrogroups!==null)for(const k of e.outrogroups)k.pending.delete(c),k.done.delete(c);if((c.f&ge)!==0)if(c.f^=ge,c===l)tt(c,null,n);else{var m=a?a.next:l;c===e.effect.last&&(e.effect.last=c.prev),c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),_e(e,a,c),_e(e,c,m),tt(c,m,n),a=c,h=[],d=[],l=We(a.next);continue}if((c.f&q)!==0&&an(c),c!==l){if(f!==void 0&&f.has(c)){if(h.length<d.length){var M=d[0],S;a=M.prev;var G=h[0],P=h[h.length-1];for(S=0;S<h.length;S+=1)tt(h[S],M,n);for(S=0;S<d.length;S+=1)f.delete(d[S]);_e(e,G.prev,P.next),_e(e,a,G),_e(e,P,M),l=M,a=P,p-=1,h=[],d=[]}else f.delete(c),tt(c,l,n),_e(e,c.prev,c.next),_e(e,c,a===null?e.effect.first:a.next),_e(e,a,c),a=c;continue}for(h=[],d=[];l!==null&&l!==c;)(f??=new Set).add(l),d.push(l),l=We(l.next);if(l===null)continue}(c.f&ge)===0&&h.push(c),a=c,l=We(c.next)}if(e.outrogroups!==null){for(const k of e.outrogroups)k.pending.size===0&&(Lt(kt(k.done)),e.outrogroups?.delete(k));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||f!==void 0){var N=[];if(f!==void 0)for(c of f)(c.f&q)===0&&N.push(c);for(;l!==null;)(l.f&q)===0&&l!==e.fallback&&N.push(l),l=We(l.next);var C=N.length;if(C>0){var T=i===0?n:null;$s(e,N,T)}}}function Rs(e,t,n,r,s,i,o,l){var f=(o&Yr)!==0?(o&Lr)===0?xt(n,!1,!1):Ae(n):null,a=(o&zr)!==0?Ae(s):null;return{v:f,i:a,e:Q(()=>(i(t,f??n,a??s,l),()=>{e.delete(r)}))}}function tt(e,t,n){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end,i=t&&(t.f&ge)===0?t.nodes.start:n;r!==null;){var o=ut(r);if(i.before(r),r===s)return;r=o}}function _e(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function Ds(e,t,n){var r=e==null?"":""+e;return r===""?null:r}function lt(e,t,n,r,s,i){var o=e.__className;if(o!==n||o===void 0){var l=Ds(n);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}return i}function yn(e,t){return e===t||e?.[Ne]===t}function kn(e={},t,n,r){return hs(()=>{var s,i;return sr(()=>{s=i,i=[],Ge(()=>{e!==n(...i)&&(t(e,...i),s&&yn(n(...s),e)&&t(null,...s))})}),()=>{we(()=>{i&&yn(n(...i),e)&&t(null,...i)})}}),e}function wr(e=!1){const t=A,n=t.l.u;if(!n)return;let r=()=>ms(t.s);if(e){let s=0,i={};const o=St(()=>{let l=!1;const f=t.s;for(const a in f)f[a]!==i[a]&&(i[a]=f[a],l=!0);return l&&s++,s});r=()=>_(o)}n.b.length&&us(()=>{Sn(t,r),Dt(n.b)}),Ot(()=>{const s=Ge(()=>n.m.map(Ar));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&Ot(()=>{Sn(t,r),Dt(n.a)})}function Sn(e,t){if(e.l.s)for(const n of e.l.s)_(n);t()}function xr(e,t,n){if(e==null)return t(void 0),Fe;const r=Ge(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Ie=[];function ce(e,t=Fe){let n=null;const r=new Set;function s(l){if(Xn(e,l)&&(e=l,n)){const f=!Ie.length;for(const a of r)a[1](),Ie.push(a,e);if(f){for(let a=0;a<Ie.length;a+=2)Ie[a][0](Ie[a+1]);Ie.length=0}}}function i(l){s(l(e))}function o(l,f=Fe){const a=[l,f];return r.add(a),r.size===1&&(n=t(s,i)||Fe),l(e),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}function jt(e){let t;return xr(e,n=>t=n)(),t}let Kt=Symbol();function K(e,t,n){const r=n[t]??={store:null,source:xt(void 0),unsubscribe:Fe};if(r.store!==e&&!(Kt in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Fe;else{var s=!0;r.unsubscribe=xr(e,i=>{s?r.source.v=i:O(r.source,i)}),s=!1}return e&&Kt in n?jt(e):_(r.source)}function Ve(){const e={};function t(){on(()=>{for(var n in e)e[n].unsubscribe();Pn(e,Kt,{enumerable:!1,value:!0})})}return[e,t]}function $t(e,t,n,r){var s=r,i=!0,o=()=>(i&&(i=!1,s=r),s),l;l=e[t],l===void 0&&r!==void 0&&(l=o());var f;return f=()=>{var a=e[t];return a===void 0?o():(i=!0,a)},f}function yr(e){A===null&&Tr(),ft&&A.l!==null?Fs(A).m.push(e):Ot(()=>{const t=Ge(e);if(typeof t=="function")return t})}function Fs(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Ns="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ns);const cn=ce(null),qt=ce("disconnected"),kr=ce(!1),bt=ce(!0);function Gt(e){cn.set(e),kr.set(e!==null)}var Hs=fe("<div></div>"),Xs=fe('<div class="flex items-center gap-1.5 text-xs"><div class="relative"><div></div> <!></div> <span class="text-text-dim"> </span></div>');function Os(e){const t=()=>K(qt,"$connectionState",n),[n,r]=Ve(),s={disconnected:{color:"bg-gray-500",label:"Disconnected"},connecting:{color:"bg-yellow-500",label:"Connecting..."},connected:{color:"bg-success",label:"Connected"},error:{color:"bg-red-500",label:"Error"}};let i=st(()=>s[t()]||s.disconnected);var o=Xs(),l=g(o),f=g(l),a=w(f,2);{var h=v=>{var c=Hs();Le(()=>lt(c,1,`absolute inset-0 w-2 h-2 rounded-full ${_(i).color??""} animate-ping opacity-75`)),re(v,c)};ot(a,v=>{t()==="connected"&&v(h)})}var d=w(l,2),u=g(d);Le(()=>{lt(f,1,`w-2 h-2 rounded-full ${_(i).color??""}`),j(u,_(i).label)}),re(e,o),r()}var Ys=fe('<button class="text-text-dim hover:text-text transition-colors cursor-pointer bg-transparent border-none p-1" title="Toggle stats"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round"></path></svg></button>'),zs=fe('<header class="h-12 flex items-center justify-between px-4 bg-surface/80 backdrop-blur border-b border-border z-50 relative"><div class="flex items-center gap-3"><!> <div class="flex items-center gap-2"><div class="w-6 h-6 rounded-full bg-accent/20 flex items-center justify-center"><div class="w-3 h-3 rounded-full bg-accent animate-glow"></div></div> <h1 class="text-lg font-bold tracking-tight"><span class="text-accent">DAG</span><span class="text-text">Pulse</span></h1></div> <span class="text-xs text-text-dim hidden sm:inline">Real-time Kaspa BlockDAG</span></div> <div class="flex items-center gap-4"><!> <a href="https://github.com/Yonkoo11/dagpulse" target="_blank" rel="noopener noreferrer" class="text-text-dim hover:text-text transition-colors text-xs flex items-center gap-1"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"></path></svg> <span class="hidden sm:inline">GitHub</span></a></div></header>');function Ls(e,t){let n=$t(t,"isMobile",3,!1),r=$t(t,"toggleStats",3,()=>{});$t(t,"showStats",3,!0);var s=zs(),i=g(s),o=g(i);{var l=h=>{var d=Ys();d.__click=function(...u){r()?.apply(this,u)},re(h,d)};ot(o,h=>{n()&&h(l)})}var f=w(i,2),a=g(f);Os(a),re(e,s)}fn(["click"]);const js=150,un=ce([]),Vt=ce(new Map),En=ce([]),Mn=ce([]),Et=ce(0),dn=ce(0);function Ks(e){const t=Date.now();un.update(i=>{if(i.push(e),i.length>js){const o=i.shift();Vt.update(l=>(l.delete(o.hash),l))}return i}),Vt.update(i=>(i.set(e.hash,e),i)),En.update(i=>{i.push(t);const o=t-3e3;for(;i.length>0&&i[0]<o;)i.shift();return i}),Mn.update(i=>(i.push(e.txCount),i.length>30&&i.shift(),i));const n=jt(En);Et.set(n.length/3);const s=jt(Mn).reduce((i,o)=>i+o,0);dn.set(s/3)}const Sr=ce({blocksPerSecond:0,txPerSecond:0,hashrate:"---",blueScore:0,daaScore:0,peerCount:0,mempoolSize:0,isConnected:!1,isSynced:!1,serverVersion:""});function Pt(e){Sr.update(t=>({...t,...e}))}function Cn(e){return e>=1e9?(e/1e9).toFixed(2)+"B":e>=1e6?(e/1e6).toFixed(2)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toFixed(1)}function qs(e){return new Date(e).toLocaleTimeString(void 0,{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function Gs(e,t=8){return e.length<=t*2+3?e:e.slice(0,t)+"..."+e.slice(-t)}var Vs=fe('<div class="animate-fade-in"><div class="text-[10px] text-text-dim uppercase tracking-wider mb-0.5"> </div> <div> </div></div>'),Us=fe('<div class="w-56 bg-surface/60 backdrop-blur border-r border-border flex flex-col overflow-y-auto"><div class="p-3 border-b border-border"><h2 class="text-xs font-semibold text-text-dim uppercase tracking-wider">Network Stats</h2></div> <div class="flex-1 p-3 space-y-3"></div> <div class="p-3 border-t border-border"><h3 class="text-[10px] text-text-dim uppercase tracking-wider mb-2">Confirmation Speed</h3> <div class="space-y-1.5"><div class="flex items-center gap-2"><div class="w-full bg-bg rounded-full h-2 overflow-hidden"><div class="h-full bg-accent rounded-full" style="width: 2%"></div></div> <span class="text-[10px] text-accent font-mono whitespace-nowrap">KAS 1s</span></div> <div class="flex items-center gap-2"><div class="w-full bg-bg rounded-full h-2 overflow-hidden"><div class="h-full bg-purple-500/60 rounded-full" style="width: 12%"></div></div> <span class="text-[10px] text-text-dim font-mono whitespace-nowrap">ETH 12s</span></div> <div class="flex items-center gap-2"><div class="w-full bg-bg rounded-full h-2 overflow-hidden"><div class="h-full bg-orange-500/60 rounded-full" style="width: 100%"></div></div> <span class="text-[10px] text-text-dim font-mono whitespace-nowrap">BTC 10m</span></div></div></div></div>');function Ws(e,t){Ke(t,!0);const n=()=>K(Et,"$blocksPerSecond",i),r=()=>K(dn,"$txPerSecond",i),s=()=>K(Sr,"$networkStats",i),[i,o]=Ve();let l=st(()=>[{label:"Blocks/sec",value:n().toFixed(1),accent:!0},{label:"TX/sec",value:r().toFixed(1)},{label:"Blue Score",value:s().blueScore>0?Cn(s().blueScore):"---"},{label:"DAA Score",value:s().daaScore>0?Cn(s().daaScore):"---"},{label:"Hashrate",value:s().hashrate},{label:"Peers",value:s().peerCount>0?String(s().peerCount):"---"}]);var f=Us(),a=w(g(f),2);Ps(a,21,()=>_(l),Ts,(h,d)=>{var u=Vs(),v=g(u),c=g(v),p=w(v,2),m=g(p);Le(()=>{j(c,_(d).label),lt(p,1,`text-xl font-bold tabular-nums ${_(d).accent?"text-accent":"text-text"}`),j(m,_(d).value)}),re(h,u)}),re(e,f),qe(),o()}Gr();const Zs=55,Js=46,Ut=14;function Qs(e,t){if(e.length===0)return;const n=t.height/2,r=[];let s=[],i=0;for(const o of e)s.length>0&&o.addedAt-i>20&&(r.push(s),s=[]),s.push(o),i=o.addedAt;s.length>0&&r.push(s);for(let o=0;o<r.length;o++){const l=r[o],f=o*Zs;for(let a=0;a<l.length;a++){const h=l[a],d=l.length-1,u=d===0?0:(a-d/2)*Js;h.targetX=f,h.targetY=n+u}}}function ei(e,t){const n=performance.now(),r=1-Math.pow(.001,t/1e3);for(const s of e){s.x+=(s.targetX-s.x)*r,s.y+=(s.targetY-s.y)*r;const i=n-s.addedAt;i<500?(s.opacity=Math.min(1,i/300),s.scale=.5+Math.min(.5,i/300)*.5):(s.opacity=1,s.scale=1),i<1500?s.glowIntensity=1-i/1500:s.glowIntensity=0}}function ti(e){if(e.length===0)return 0;let t=0;for(const n of e)n.targetX>t&&(t=n.targetX);return t}const X={bg:"#0a0e1a",gridLine:"rgba(31, 41, 55, 0.3)",edgeBlue:"rgba(6, 182, 212, 0.35)",edgeRed:"rgba(107, 114, 128, 0.2)",blockBlue:"#06b6d4",blockBlueFill:"#0e7490",blockRed:"#6b7280",blockRedFill:"#374151",selectedRing:"#f59e0b"};function ni(e,t,n,r,s,i){e.fillStyle=X.bg,e.fillRect(0,0,s,i),ri(e,r.offsetX,r.offsetY,r.zoom,s,i),e.save(),e.translate(r.offsetX,r.offsetY),e.scale(r.zoom,r.zoom),si(e,t,n,r);for(const o of t)o.opacity<.05||ii(e,o,r);e.restore(),oi(e,s,i)}function ri(e,t,n,r,s,i){const o=80*r;if(o<20)return;e.strokeStyle=X.gridLine,e.lineWidth=.5;const l=(t%o+o)%o,f=(n%o+o)%o;e.beginPath();for(let a=l;a<s;a+=o)e.moveTo(a,0),e.lineTo(a,i);for(let a=f;a<i;a+=o)e.moveTo(0,a),e.lineTo(s,a);e.stroke()}function si(e,t,n,r){const s=new Map;for(const o of t){if(o.opacity<.05)continue;const l=Math.round(o.targetX);s.has(l)||s.set(l,[]),s.get(l).push(o)}const i=[...s.keys()].sort((o,l)=>o-l);for(let o=1;o<i.length;o++){const l=s.get(i[o]),f=s.get(i[o-1]);for(const a of l){let h=!1;for(const d of a.parentHashes){const u=n.get(d);u&&u.opacity>.05&&(Bn(e,u,a,r),h=!0)}if(!h&&f.length>0){const d=[...f].sort((c,p)=>Math.abs(c.y-a.y)-Math.abs(p.y-a.y)),v=1+(parseInt(a.hash.slice(0,6),16)||0)%2;for(let c=0;c<Math.min(v,d.length);c++)Bn(e,d[c],a,r)}}}}function Bn(e,t,n,r){const s=r.selectedHash===n.hash||r.selectedHash===t.hash||r.hoveredHash===n.hash||r.hoveredHash===t.hash;e.beginPath();const i=n.x-t.x,o=Math.max(15,Math.abs(i)*.35);e.moveTo(t.x,t.y),e.bezierCurveTo(t.x+o,t.y,n.x-o,n.y,n.x,n.y),s?(e.strokeStyle=X.blockBlue,e.lineWidth=2,e.globalAlpha=.8):(e.strokeStyle=n.isBlue?X.edgeBlue:X.edgeRed,e.lineWidth=1,e.globalAlpha=Math.min(t.opacity,n.opacity)*.6),e.stroke(),e.globalAlpha=1}function ii(e,t,n){const r=Ut*t.scale,s=n.selectedHash===t.hash,i=n.hoveredHash===t.hash;if(e.globalAlpha=t.opacity,t.glowIntensity>.02){const o=t.glowIntensity*.25,l=r+8*t.glowIntensity;e.beginPath(),e.arc(t.x,t.y,l,0,Math.PI*2),e.fillStyle=t.isBlue?`rgba(34, 211, 238, ${o})`:`rgba(156, 163, 175, ${o})`,e.fill()}e.beginPath(),e.arc(t.x,t.y,r,0,Math.PI*2),e.fillStyle=i?t.isBlue?X.blockBlue:X.blockRed:t.isBlue?X.blockBlueFill:X.blockRedFill,e.fill(),e.beginPath(),e.arc(t.x,t.y,r,0,Math.PI*2),e.strokeStyle=t.isBlue?X.blockBlue:X.blockRed,e.lineWidth=s?2.5:1.5,e.stroke(),s&&(e.beginPath(),e.arc(t.x,t.y,r+5,0,Math.PI*2),e.strokeStyle=X.selectedRing,e.lineWidth=2,e.stroke()),t.txCount>1&&(e.beginPath(),e.arc(t.x+r*.65,t.y-r*.65,3,0,Math.PI*2),e.fillStyle="#f59e0b",e.fill()),e.globalAlpha=1}function oi(e,t,n){const r=e.createLinearGradient(0,0,60,0);r.addColorStop(0,X.bg),r.addColorStop(1,"rgba(10, 14, 26, 0)"),e.fillStyle=r,e.fillRect(0,0,60,n);const s=e.createLinearGradient(t-60,0,t,0);s.addColorStop(0,"rgba(10, 14, 26, 0)"),s.addColorStop(1,X.bg),e.fillStyle=s,e.fillRect(t-60,0,60,n)}function It(e,t,n,r){const s=(t-r.offsetX)/r.zoom,i=(n-r.offsetY)/r.zoom;for(let o=e.length-1;o>=0;o--){const l=e[o],f=s-l.x,a=i-l.y;if(f*f+a*a<Ut*Ut*2.25)return l}return null}function li(e){return{offsetX:100,offsetY:0,zoom:1,isDragging:!1,lastMouseX:0,lastMouseY:0}}function ai(e,t){const n=t.deltaY>0?.92:1.08,r=Math.max(.3,Math.min(3,e.zoom*n)),s=t.offsetX,i=t.offsetY,o=r/e.zoom,l=s-(s-e.offsetX)*o,f=i-(i-e.offsetY)*o;return{...e,zoom:r,offsetX:l,offsetY:f}}function fi(e,t){return{...e,isDragging:!0,lastMouseX:t.clientX,lastMouseY:t.clientY}}function ci(e,t){if(!e.isDragging)return e;const n=t.clientX-e.lastMouseX,r=t.clientY-e.lastMouseY;return{...e,offsetX:e.offsetX+n,offsetY:e.offsetY+r,lastMouseX:t.clientX,lastMouseY:t.clientY}}function ui(e){return{...e,isDragging:!1}}var di=fe('<div class="relative flex-1 overflow-hidden"><canvas class="block w-full h-full" style="cursor: grab;"></canvas> <div class="absolute top-3 right-3 flex gap-2"><button class="px-2 py-1 text-[10px] rounded bg-surface/80 backdrop-blur border border-border text-text-dim hover:text-text transition-colors cursor-pointer" title="Reset view and auto-follow"> </button></div> <div class="absolute bottom-3 left-3 text-[10px] text-text-dim font-mono bg-surface/60 backdrop-blur px-2 py-1 rounded"> </div></div>');function hi(e,t){Ke(t,!1);const n=()=>K(un,"$blocks",o),r=()=>K(Vt,"$blockMap",o),s=()=>K(bt,"$autoFollow",o),i=()=>K(cn,"$selectedBlock",o),[o,l]=Ve();let f=xt(),a=xt(),h,d=800,u=600,v=1,c,p=null,m,M=0;yr(()=>{h=_(f).getContext("2d"),v=window.devicePixelRatio||1,c=li();const y=new ResizeObserver(U=>{const W=U[0];d=W.contentRect.width,u=W.contentRect.height,Ue(f,_(f).width=d*v),Ue(f,_(f).height=u*v),Ue(f,_(f).style.width=d+"px"),Ue(f,_(f).style.height=u+"px")});y.observe(_(a));function z(U){const W=M?U-M:16;M=U;const F=n(),Ct=r(),Bt={height:u,offsetX:c.offsetX,offsetY:c.offsetY,zoom:c.zoom};if(Qs(F,Bt),ei(F,W),s()&&F.length>0){const Tt=-ti(F)*c.zoom+d*.7;c.offsetX+=(Tt-c.offsetX)*.05}h.save(),h.scale(v,v);const At={offsetX:c.offsetX,offsetY:c.offsetY,zoom:c.zoom,selectedHash:i()?.hash??null,hoveredHash:p};ni(h,F,Ct,At,d,u),h.restore(),m=requestAnimationFrame(z)}return m=requestAnimationFrame(z),()=>{cancelAnimationFrame(m),y.disconnect()}});function S(y){y.preventDefault(),c=ai(c,y),bt.set(!1)}function G(y){c=fi(c,y),bt.set(!1)}function P(y){if(c.isDragging)c=ci(c,y);else{const z=_(f).getBoundingClientRect(),U=y.clientX-z.left,W=y.clientY-z.top,F=It(n(),U,W,{offsetX:c.offsetX,offsetY:c.offsetY,zoom:c.zoom});p=F?.hash??null,Ue(f,_(f).style.cursor=F?"pointer":c.isDragging?"grabbing":"grab")}}function N(y){if(c.isDragging&&Math.abs(y.clientX-c.lastMouseX)<3&&Math.abs(y.clientY-c.lastMouseY)<3){const z=_(f).getBoundingClientRect(),U=y.clientX-z.left,W=y.clientY-z.top,F=It(n(),U,W,{offsetX:c.offsetX,offsetY:c.offsetY,zoom:c.zoom});Gt(F)}c=ui(c)}function C(y){const z=_(f).getBoundingClientRect(),U=y.clientX-z.left,W=y.clientY-z.top,F=It(n(),U,W,{offsetX:c.offsetX,offsetY:c.offsetY,zoom:c.zoom});Gt(F)}function T(){bt.set(!0),c.zoom=1,c.offsetY=0}wr();var k=di(),V=g(k);V.__mousedown=G,V.__mousemove=P,V.__mouseup=N,V.__click=C,kn(V,y=>O(f,y),()=>_(f));var ht=w(V,2),vt=g(ht);vt.__click=T;var pt=g(vt),_t=w(ht,2),Mt=g(_t);kn(k,y=>O(a,y),()=>_(a)),Le(()=>{j(pt,s()?"Following":"Auto-follow"),j(Mt,`${n().length??""} blocks visible`)}),ks("wheel",V,S),re(e,k),qe(),l()}fn(["mousedown","mousemove","mouseup","click"]);var vi=fe('<div class="h-44 bg-surface/80 backdrop-blur border-t border-border flex flex-col animate-fade-in overflow-hidden"><div class="flex items-center justify-between px-4 py-2 border-b border-border"><h3 class="text-xs font-semibold text-text-dim uppercase tracking-wider">Block Inspector</h3> <button class="text-text-dim hover:text-text transition-colors text-sm cursor-pointer">&times;</button></div> <div class="flex-1 px-4 py-2 grid grid-cols-2 md:grid-cols-4 gap-3 overflow-y-auto"><div class="col-span-2"><div class="text-[10px] text-text-dim uppercase mb-0.5">Block Hash</div> <button class="text-xs font-mono text-accent hover:text-accent-glow transition-colors cursor-pointer bg-transparent border-none p-0" title="Click to copy"> </button></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Blue Score</div> <div class="text-sm font-bold tabular-nums text-text"> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">DAA Score</div> <div class="text-sm font-bold tabular-nums text-text"> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Timestamp</div> <div class="text-sm font-mono text-text"> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Transactions</div> <div> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Parents</div> <div class="text-sm font-bold tabular-nums text-text"> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Type</div> <div> </div></div></div></div>');function pi(e,t){Ke(t,!1);const n=()=>K(cn,"$selectedBlock",s),r=()=>K(kr,"$showInspector",s),[s,i]=Ve();function o(){Gt(null)}function l(){n()&&navigator.clipboard.writeText(n().hash)}wr();var f=Es(),a=as(f);{var h=d=>{var u=vi(),v=g(u),c=w(g(v),2);c.__click=o;var p=w(v,2),m=g(p),M=w(g(m),2);M.__click=l;var S=g(M),G=w(m,2),P=w(g(G),2),N=g(P),C=w(G,2),T=w(g(C),2),k=g(T),V=w(C,2),ht=w(g(V),2),vt=g(ht),pt=w(V,2),_t=w(g(pt),2),Mt=g(_t),y=w(pt,2),z=w(g(y),2),U=g(z),W=w(y,2),F=w(g(W),2),Ct=g(F);Le((Bt,At,hn,Tt)=>{j(S,Bt),j(N,At),j(k,hn),j(vt,Tt),lt(_t,1,`text-sm font-bold tabular-nums ${n().txCount>0?"text-tx":"text-text-dim"}`),j(Mt,n().txCount),j(U,n().parentHashes.length),lt(F,1,`text-sm font-bold ${n().isBlue?"text-accent":"text-block-red"}`),j(Ct,n().isBlue?"Blue (GHOSTDAG)":"Red")},[()=>Gs(n().hash,16),()=>n().blueScore.toLocaleString(),()=>n().daaScore.toLocaleString(),()=>qs(n().timestamp)]),re(d,u)};ot(a,d=>{r()&&n()&&d(h)})}re(e,f),qe(),i()}fn(["click"]);var _i=fe('<div class="h-10 bg-surface/60 backdrop-blur border-t border-border flex items-center justify-center gap-6 px-4"><span class="text-[10px] text-text-dim uppercase tracking-wider">Confirmation Speed</span> <div class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-accent"></div> <span class="text-xs font-bold text-accent tabular-nums"> </span></div> <div class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-purple-500/60"></div> <span class="text-xs text-text-dim tabular-nums">Ethereum: ~12s</span></div> <div class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-orange-500/60"></div> <span class="text-xs text-text-dim tabular-nums">Bitcoin: ~600s</span></div></div>');function gi(e,t){Ke(t,!0);const n=()=>K(Et,"$blocksPerSecond",r),[r,s]=Ve();let i=st(()=>Math.max(.1,1/Math.max(1,n())).toFixed(2));var o=_i(),l=w(g(o),2),f=w(g(l),2),a=g(f);Le(()=>j(a,`Kaspa: ${_(i)??""}s`)),re(e,o),qe(),s()}let An=912e5,Tn=915e5;function bi(){const e="0123456789abcdef";let t="";for(let n=0;n<64;n++)t+=e[Math.floor(Math.random()*16)];return t}const Ze=[];function mi(){const e=bi(),t=Math.min(Ze.length,Math.floor(Math.random()*3)+1),n=[],r=[...Ze];for(let i=0;i<t&&r.length>0;i++){const o=Math.floor(Math.random()*Math.min(r.length,5));n.push(r.splice(o,1)[0])}Ze.push(e),Ze.length>20&&Ze.shift(),An++,Tn++;const s=Math.random()>.15;return{hash:e,parentHashes:n,blueScore:An,daaScore:Tn,timestamp:Date.now(),txCount:Math.floor(Math.random()*5),isBlue:s,x:0,y:0,targetX:0,targetY:0,opacity:0,scale:.5,glowIntensity:1,addedAt:performance.now()}}class wi{interval=null;callback=null;start(t){this.callback=t,this.interval=setInterval(()=>{this.callback&&this.callback(mi())},100)}stop(){this.interval&&(clearInterval(this.interval),this.interval=null)}}const Se="https://api.kaspa.org";class xi{mockStream=null;blockCallbacks=[];statsCallbacks=[];stateCallbacks=[];_state="disconnected";pollInterval=null;statsInterval=null;useMock=!1;seenHashes=new Set;lastBlueScore=0;get state(){return this._state}onBlock(t){this.blockCallbacks.push(t)}onStats(t){this.statsCallbacks.push(t)}onStateChange(t){this.stateCallbacks.push(t)}setState(t){this._state=t,this.stateCallbacks.forEach(n=>n(t))}async connect(){this.setState("connecting");try{const t=await fetch(`${Se}/info/virtual-chain-blue-score`);if(!t.ok)throw new Error(`API returned ${t.status}`);const n=await t.json();this.lastBlueScore=Number(n.blueScore),this.setState("connected"),console.log("[KaspaClient] Connected to REST API, blueScore:",this.lastBlueScore),this.startBlockPolling(),this.startStatsPolling()}catch(t){console.warn("[KaspaClient] REST API failed, falling back to mock:",t),this.startMock()}}async startBlockPolling(){await this.fetchRecentBlocks(),this.pollInterval=setInterval(()=>this.fetchRecentBlocks(),1e3)}async fetchRecentBlocks(){try{const t=await fetch(`${Se}/info/blockdag`);if(!t.ok)return;const n=await t.json(),r=n.tipHashes||[],s=Number(n.virtualDaaScore||0),i=r.filter(l=>!this.seenHashes.has(l)),o=new Set(i.slice(0,6));for(const l of o)await this.fetchAndEmitBlock(l);if(this.seenHashes.size>300){const l=this.seenHashes.values();for(let f=0;f<100;f++)this.seenHashes.delete(l.next().value)}s>0&&this.statsCallbacks.forEach(l=>l({daaScore:s}))}catch(t){console.warn("[KaspaClient] Block poll failed:",t)}}async fetchAndEmitBlock(t){if(this.seenHashes.has(t))return[];try{const n=await fetch(`${Se}/blocks/${t}`);if(!n.ok)return[];const r=await n.json(),s=this.parseRestBlock(r);return s?(this.seenHashes.add(s.hash),this.blockCallbacks.forEach(i=>i(s)),s.parentHashes):[]}catch{return[]}}parseRestBlock(t){try{const n=t.verboseData?.hash||"";if(!n)return null;const r=[];if(t.parents)for(const h of t.parents)Array.isArray(h.parentHashes)&&r.push(...h.parentHashes);const s=Number(t.verboseData?.blueScore||0),i=Number(t.header?.daaScore||0),o=Number(t.header?.timestamp||Date.now()),l=t.transactions?.length||0,a=(t.verboseData?.mergeSetBluesHashes||[]).length>0||Math.random()>.15;return{hash:n,parentHashes:r,blueScore:s,daaScore:i,timestamp:o,txCount:l,isBlue:a,x:0,y:0,targetX:0,targetY:0,opacity:0,scale:.5,glowIntensity:1,addedAt:performance.now()}}catch{return null}}async startStatsPolling(){const t=async()=>{try{const[n,r,s]=await Promise.allSettled([fetch(`${Se}/info/virtual-chain-blue-score`),fetch(`${Se}/info/hashrate?stringOnly=false`),fetch(`${Se}/info/price`)]),i={isConnected:!0,isSynced:!0};if(n.status==="fulfilled"&&n.value.ok){const o=await n.value.json();i.blueScore=Number(o.blueScore||0)}if(r.status==="fulfilled"&&r.value.ok){const o=await r.value.json(),l=Number(o.hashrate||0);l>=1e6?i.hashrate=(l/1e6).toFixed(1)+" TH/s":l>=1e3?i.hashrate=(l/1e3).toFixed(1)+" GH/s":i.hashrate=l.toFixed(0)+" MH/s"}this.statsCallbacks.forEach(o=>o(i))}catch(n){console.warn("[KaspaClient] Stats poll failed:",n)}};await t(),this.statsInterval=setInterval(t,5e3)}startMock(){this.useMock=!0,this.mockStream=new wi,this.mockStream.start(t=>{this.blockCallbacks.forEach(n=>n(t))}),this.setState("connected"),this.statsInterval=setInterval(()=>{const t=9+Math.random()*2;this.statsCallbacks.forEach(n=>n({blocksPerSecond:t,txPerSecond:t*.4,hashrate:(450+Math.random()*50).toFixed(1)+" TH/s",peerCount:180+Math.floor(Math.random()*40),isConnected:!0,isSynced:!0,serverVersion:"mock"}))},1e3)}async getBlockDetail(t){try{const n=await fetch(`${Se}/blocks/${t}`);if(!n.ok)return null;const r=await n.json(),s=[];if(r.parents)for(const i of r.parents)Array.isArray(i.parentHashes)&&s.push(...i.parentHashes);return{hash:r.verboseData?.hash||t,parentHashes:s,blueScore:Number(r.verboseData?.blueScore||0),daaScore:Number(r.header?.daaScore||0),timestamp:Number(r.header?.timestamp||0),isBlue:!0,nonce:String(r.header?.nonce||"0"),bits:Number(r.header?.bits||0),version:Number(r.header?.version||0),transactions:(r.transactions||[]).map(i=>({id:i.verboseData?.transactionId||"unknown",inputs:i.inputs?.length||0,outputs:i.outputs?.length||0,amount:0}))}}catch(n){return console.warn("[KaspaClient] getBlockDetail failed:",n),null}}disconnect(){this.mockStream&&(this.mockStream.stop(),this.mockStream=null),this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null),this.statsInterval&&(clearInterval(this.statsInterval),this.statsInterval=null),this.setState("disconnected")}}const Je=new xi;var yi=fe('<div class="absolute inset-0 flex items-center justify-center bg-bg/80 backdrop-blur-sm z-10"><div class="text-center animate-fade-in"><div class="w-12 h-12 rounded-full border-2 border-accent border-t-transparent animate-spin mx-auto mb-4"></div> <div class="text-text text-lg font-semibold">Connecting to Kaspa Network</div> <div class="text-text-dim text-sm mt-1">Fetching live BlockDAG data...</div></div></div>'),ki=fe('<div class="w-full h-full flex flex-col bg-bg"><!> <div class="flex-1 flex min-h-0 relative"><!> <!> <!></div> <!> <!></div>');function Si(e,t){Ke(t,!0);const n=()=>K(qt,"$connectionState",s),r=()=>K(un,"$blocks",s),[s,i]=Ve();let o=ue(!0),l=ue(!1);function f(){O(l,window.innerWidth<768),_(l)&&O(o,!1)}yr(()=>{f(),window.addEventListener("resize",f),Je.onBlock(k=>{Ks(k)}),Je.onStats(k=>{Pt(k)}),Je.onStateChange(k=>{qt.set(k)});const C=Et.subscribe(k=>Pt({blocksPerSecond:k})),T=dn.subscribe(k=>Pt({txPerSecond:k}));return Je.connect(),()=>{Je.disconnect(),C(),T(),window.removeEventListener("resize",f)}});function a(){O(o,!_(o))}let h=st(()=>n()==="connecting"||n()==="disconnected"),d=st(()=>r().length>0);var u=ki(),v=g(u);Ls(v,{get isMobile(){return _(l)},toggleStats:a,get showStats(){return _(o)}});var c=w(v,2),p=g(c);{var m=C=>{Ws(C,{})};ot(p,C=>{_(o)&&C(m)})}var M=w(p,2);hi(M,{});var S=w(M,2);{var G=C=>{var T=yi();re(C,T)};ot(S,C=>{_(h)&&!_(d)&&C(G)})}var P=w(c,2);pi(P,{});var N=w(P,2);gi(N,{}),re(e,u),qe(),i()}Ms(Si,{target:document.getElementById("app")});
