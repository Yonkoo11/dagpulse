(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const un=!1;var ar=Array.isArray,ls=Array.prototype.indexOf,tt=Array.prototype.includes,Zt=Array.from,lr=Object.defineProperty,Mt=Object.getOwnPropertyDescriptor,cr=Object.getOwnPropertyDescriptors,cs=Object.prototype,fs=Array.prototype,Sn=Object.getPrototypeOf,zn=Object.isExtensible;const Ze=()=>{};function us(e){return e()}function dn(e){for(var t=0;t<e.length;t++)e[t]()}function fr(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const V=2,Kt=4,Dt=8,ur=1<<24,Ce=16,ge=32,je=64,En=128,fe=512,O=1024,U=2048,_e=4096,se=8192,Te=16384,Mn=32768,nt=65536,Ln=1<<17,dr=1<<18,at=1<<19,hr=1<<20,Se=1<<25,Oe=32768,hn=1<<21,Cn=1<<22,De=1<<23,Je=Symbol("$state"),ds=Symbol(""),Ue=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function hs(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function vs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ps(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function _s(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function gs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function bs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ms(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ws(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function xs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ys(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ks(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ss=1,Es=2,vr=4,Ms=8,Cs=16,As=2,K=Symbol(),Bs="http://www.w3.org/1999/xhtml";function Ts(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function pr(e){return e===this.v}function _r(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function gr(e){return!_r(e,this.v)}let Pt=!1,Ds=!1;function Ps(){Pt=!0}let H=null;function rt(e){H=e}function lt(e,t=!1,n){H={p:H,i:!1,c:null,e:null,s:e,x:null,l:Pt&&!t?{s:null,u:null,$:[]}:null}}function ct(e){var t=H,n=t.e;if(n!==null){t.e=null;for(var r of n)Rr(r)}return t.i=!0,H=t.p,{}}function ft(){return!Pt||H!==null&&H.l===null}let We=[];function Is(){var e=We;We=[],dn(e)}function Ee(e){if(We.length===0){var t=We;queueMicrotask(()=>{t===We&&Is()})}We.push(e)}function br(e){var t=E;if(t===null)return y.f|=De,e;if((t.f&Mn)===0){if((t.f&En)===0)throw e;t.b.error(e)}else st(e,t)}function st(e,t){for(;t!==null;){if((t.f&En)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Rs=-7169;function $(e,t){e.f=e.f&Rs|t}function An(e){(e.f&fe)!==0||e.deps===null?$(e,O):$(e,_e)}function mr(e){if(e!==null)for(const t of e)(t.f&V)===0||(t.f&Oe)===0||(t.f^=Oe,mr(t.deps))}function wr(e,t,n){(e.f&U)!==0?t.add(e):(e.f&_e)!==0&&n.add(e),mr(e.deps),$(e,O)}const Ot=new Set;let D=null,he=null,ae=[],Bn=null,vn=!1;class Pe{committed=!1;current=new Map;previous=new Map;#t=new Set;#a=new Set;#e=0;#o=0;#i=null;#r=new Set;#n=new Set;#s=new Map;is_fork=!1;#l=!1;is_deferred(){return this.is_fork||this.#o>0}skip_effect(t){this.#s.has(t)||this.#s.set(t,{d:[],m:[]})}unskip_effect(t){var n=this.#s.get(t);if(n){this.#s.delete(t);for(var r of n.d)$(r,U),ve(r);for(r of n.m)$(r,_e),ve(r)}}process(t){ae=[],this.apply();var n=[],r=[];for(const s of t)this.#c(s,n,r);if(this.is_deferred()){this.#f(r),this.#f(n);for(const[s,o]of this.#s)kr(s,o)}else{for(const s of this.#t)s();this.#t.clear(),this.#e===0&&this.#u(),D=null,jn(r),jn(n),this.#i?.resolve()}he=null}#c(t,n,r){t.f^=O;for(var s=t.first,o=null;s!==null;){var i=s.f,l=(i&(ge|je))!==0,a=l&&(i&O)!==0,c=a||(i&se)!==0||this.#s.has(s);if(!c&&s.fn!==null){l?s.f^=O:o!==null&&(i&(Kt|Dt|ur))!==0?o.b.defer_effect(s):(i&Kt)!==0?n.push(s):Rt(s)&&((i&Ce)!==0&&this.#n.add(s),Tt(s));var u=s.first;if(u!==null){s=u;continue}}var h=s.parent;for(s=s.next;s===null&&h!==null;)h===o&&(o=null),s=h.next,h=h.parent}}#f(t){for(var n=0;n<t.length;n+=1)wr(t[n],this.#r,this.#n)}capture(t,n){n!==K&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&De)===0&&(this.current.set(t,t.v),he?.set(t,t.v))}activate(){D=this,this.apply()}deactivate(){D===this&&(D=null,he=null)}flush(){if(this.activate(),ae.length>0){if($s(),D!==null&&D!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#a)t(this);this.#a.clear()}#u(){if(Ot.size>1){this.previous.clear();var t=he,n=!0;for(const s of Ot){if(s===this){n=!1;continue}const o=[];for(const[l,a]of this.current){if(s.current.has(l))if(n&&a!==s.current.get(l))s.current.set(l,a);else continue;o.push(l)}if(o.length===0)continue;const i=[...s.current.keys()].filter(l=>!this.current.has(l));if(i.length>0){var r=ae;ae=[];const l=new Set,a=new Map;for(const c of o)xr(c,i,l,a);if(ae.length>0){D=s,s.apply();for(const c of ae)s.#c(c,[],[]);s.deactivate()}ae=r}}D=null,he=t}this.committed=!0,Ot.delete(this)}increment(t){this.#e+=1,t&&(this.#o+=1)}decrement(t){this.#e-=1,t&&(this.#o-=1),!this.#l&&(this.#l=!0,Ee(()=>{this.#l=!1,this.is_deferred()?ae.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#r)this.#n.delete(t),$(t,U),ve(t);for(const t of this.#n)$(t,_e),ve(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#a.add(t)}settled(){return(this.#i??=fr()).promise}static ensure(){if(D===null){const t=D=new Pe;Ot.add(D),Ee(()=>{D===t&&t.flush()})}return D}apply(){}}function $s(){vn=!0;var e=null;try{for(var t=0;ae.length>0;){var n=Pe.ensure();if(t++>1e3){var r,s;Hs()}n.process(ae),Ie.clear()}}finally{ae=[],vn=!1,Bn=null}}function Hs(){try{ms()}catch(e){st(e,Bn)}}let ke=null;function jn(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Te|se))===0&&Rt(r)&&(ke=new Set,Tt(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Yr(r):r.fn=null),ke?.size>0)){Ie.clear();for(const s of ke){if((s.f&(Te|se))!==0)continue;const o=[s];let i=s.parent;for(;i!==null;)ke.has(i)&&(ke.delete(i),o.push(i)),i=i.parent;for(let l=o.length-1;l>=0;l--){const a=o[l];(a.f&(Te|se))===0&&Tt(a)}}ke.clear()}}ke=null}}function xr(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const o=s.f;(o&V)!==0?xr(s,t,n,r):(o&(Cn|Ce))!==0&&(o&U)===0&&yr(s,t,r)&&($(s,U),ve(s))}}function yr(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(tt.call(t,s))return!0;if((s.f&V)!==0&&yr(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function ve(e){for(var t=Bn=e;t.parent!==null;){t=t.parent;var n=t.f;if(vn&&t===E&&(n&Ce)!==0&&(n&dr)===0)return;if((n&(je|ge))!==0){if((n&O)===0)return;t.f^=O}}ae.push(t)}function kr(e,t){if(!((e.f&ge)!==0&&(e.f&O)!==0)){(e.f&U)!==0?t.d.push(e):(e.f&_e)!==0&&t.m.push(e),$(e,O);for(var n=e.first;n!==null;)kr(n,t),n=n.next}}function Xs(e){let t=0,n=ze(0),r;return()=>{In()&&(_(n),$r(()=>(t===0&&(r=ut(()=>e(()=>Ct(n)))),t+=1,()=>{Ee(()=>{t-=1,t===0&&(r?.(),r=void 0,Ct(n))})})))}}var Ys=nt|at|En;function Ns(e,t,n){new Fs(e,t,n)}class Fs{parent;is_pending=!1;#t;#a=null;#e;#o;#i;#r=null;#n=null;#s=null;#l=null;#c=null;#f=0;#u=0;#v=!1;#h=!1;#p=new Set;#_=new Set;#d=null;#x=Xs(()=>(this.#d=ze(this.#f),()=>{this.#d=null}));constructor(t,n,r){this.#t=t,this.#e=n,this.#o=r,this.parent=E.b,this.is_pending=!!this.#e.pending,this.#i=Qt(()=>{E.b=this;{var s=this.#m();try{this.#r=le(()=>r(s))}catch(o){this.error(o)}this.#u>0?this.#b():this.is_pending=!1}return()=>{this.#c?.remove()}},Ys)}#y(){try{this.#r=le(()=>this.#o(this.#t))}catch(t){this.error(t)}}#k(){const t=this.#e.pending;t&&(this.#n=le(()=>t(this.#t)),Ee(()=>{var n=this.#m();this.#r=this.#g(()=>(Pe.ensure(),le(()=>this.#o(n)))),this.#u>0?this.#b():(Ne(this.#n,()=>{this.#n=null}),this.is_pending=!1)}))}#m(){var t=this.#t;return this.is_pending&&(this.#c=Me(),this.#t.before(this.#c),t=this.#c),t}defer_effect(t){wr(t,this.#p,this.#_)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(t){var n=E,r=y,s=H;we(this.#i),de(this.#i),rt(this.#i.ctx);try{return t()}catch(o){return br(o),null}finally{we(n),de(r),rt(s)}}#b(){const t=this.#e.pending;this.#r!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Or(this.#r,this.#l)),this.#n===null&&(this.#n=le(()=>t(this.#t)))}#w(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#w(t);return}if(this.#u+=t,this.#u===0){this.is_pending=!1;for(const n of this.#p)$(n,U),ve(n);for(const n of this.#_)$(n,_e),ve(n);this.#p.clear(),this.#_.clear(),this.#n&&Ne(this.#n,()=>{this.#n=null}),this.#l&&(this.#t.before(this.#l),this.#l=null)}}update_pending_count(t){this.#w(t),this.#f+=t,!(!this.#d||this.#v)&&(this.#v=!0,Ee(()=>{this.#v=!1,this.#d&&it(this.#d,this.#f)}))}get_effect_pending(){return this.#x(),_(this.#d)}error(t){var n=this.#e.onerror;let r=this.#e.failed;if(this.#h||!n&&!r)throw t;this.#r&&(ee(this.#r),this.#r=null),this.#n&&(ee(this.#n),this.#n=null),this.#s&&(ee(this.#s),this.#s=null);var s=!1,o=!1;const i=()=>{if(s){Ts();return}s=!0,o&&ks(),Pe.ensure(),this.#f=0,this.#s!==null&&Ne(this.#s,()=>{this.#s=null}),this.is_pending=this.has_pending_snippet(),this.#r=this.#g(()=>(this.#h=!1,le(()=>this.#o(this.#t)))),this.#u>0?this.#b():this.is_pending=!1};Ee(()=>{try{o=!0,n?.(t,i),o=!1}catch(l){st(l,this.#i&&this.#i.parent)}r&&(this.#s=this.#g(()=>{Pe.ensure(),this.#h=!0;try{return le(()=>{r(this.#t,()=>t,()=>i)})}catch(l){return st(l,this.#i.parent),null}finally{this.#h=!1}}))})}}function Os(e,t,n,r){const s=ft()?Jt:Sr;var o=e.filter(f=>!f.settled);if(n.length===0&&o.length===0){r(t.map(s));return}var i=D,l=E,a=zs(),c=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(f=>f.promise)):null;function u(f){a();try{r(f)}catch(p){(l.f&Te)===0&&st(p,l)}i?.deactivate(),pn()}if(n.length===0){c.then(()=>u(t.map(s)));return}function h(){a(),Promise.all(n.map(f=>Ls(f))).then(f=>u([...t.map(s),...f])).catch(f=>st(f,l))}c?c.then(h):h()}function zs(){var e=E,t=y,n=H,r=D;return function(o=!0){we(e),de(t),rt(n),o&&r?.activate()}}function pn(){we(null),de(null),rt(null)}function Jt(e){var t=V|U,n=y!==null&&(y.f&V)!==0?y:null;return E!==null&&(E.f|=at),{ctx:H,deps:null,effects:null,equals:pr,f:t,fn:e,reactions:null,rv:0,v:K,wv:0,parent:n??E,ac:null}}function Ls(e,t,n){let r=E;r===null&&vs();var s=r.b,o=void 0,i=ze(K),l=!y,a=new Map;return Qs(()=>{var c=fr();o=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).then(()=>{u===D&&u.committed&&u.deactivate(),pn()})}catch(p){c.reject(p),pn()}var u=D;if(l){var h=s.is_rendered();s.update_pending_count(1),u.increment(h),a.get(u)?.reject(Ue),a.delete(u),a.set(u,c)}const f=(p,d=void 0)=>{if(u.activate(),d)d!==Ue&&(i.f|=De,it(i,d));else{(i.f&De)!==0&&(i.f^=De),it(i,p);for(const[w,v]of a){if(a.delete(w),w===u)break;v.reject(Ue)}}l&&(s.update_pending_count(-1),u.decrement(h))};c.promise.then(f,p=>f(null,p||"unknown"))}),Rn(()=>{for(const c of a.values())c.reject(Ue)}),new Promise(c=>{function u(h){function f(){h===o?c(i):u(o)}h.then(f,f)}u(o)})}function ot(e){const t=Jt(e);return zr(t),t}function Sr(e){const t=Jt(e);return t.equals=gr,t}function Er(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)ee(t[n])}}function js(e){for(var t=e.parent;t!==null;){if((t.f&V)===0)return(t.f&Te)===0?t:null;t=t.parent}return null}function Tn(e){var t,n=E;we(js(e));try{e.f&=~Oe,Er(e),t=Kr(e)}finally{we(n)}return t}function Mr(e){var t=Tn(e);if(!e.equals(t)&&(e.wv=jr(),(!D?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){$(e,O);return}Le||(he!==null?(In()||D?.is_fork)&&he.set(e,t):An(e))}let _n=new Set;const Ie=new Map;let Cr=!1;function ze(e,t){var n={f:0,v:e,reactions:null,equals:pr,rv:0,wv:0};return n}function re(e,t){const n=ze(e);return zr(n),n}function qt(e,t=!1,n=!0){const r=ze(e);return t||(r.equals=gr),Pt&&n&&H!==null&&H.l!==null&&(H.l.s??=[]).push(r),r}function mt(e,t){return R(e,ut(()=>_(e))),t}function R(e,t,n=!1){y!==null&&(!pe||(y.f&Ln)!==0)&&ft()&&(y.f&(V|Ce|Cn|Ln))!==0&&(ue===null||!tt.call(ue,e))&&ys();let r=n?kt(t):t;return it(e,r)}function it(e,t){if(!e.equals(t)){var n=e.v;Le?Ie.set(e,t):Ie.set(e,n),e.v=t;var r=Pe.ensure();if(r.capture(e,n),(e.f&V)!==0){const s=e;(e.f&U)!==0&&Tn(s),An(s)}e.wv=jr(),Ar(e,U),ft()&&E!==null&&(E.f&O)!==0&&(E.f&(ge|je))===0&&(ie===null?no([e]):ie.push(e)),!r.is_fork&&_n.size>0&&!Cr&&Gs()}return t}function Gs(){Cr=!1;for(const e of _n)(e.f&O)!==0&&$(e,_e),Rt(e)&&Tt(e);_n.clear()}function Ks(e,t=1){var n=_(e),r=t===1?n++:n--;return R(e,n),r}function Ct(e){R(e,e.v+1)}function Ar(e,t){var n=e.reactions;if(n!==null)for(var r=ft(),s=n.length,o=0;o<s;o++){var i=n[o],l=i.f;if(!(!r&&i===E)){var a=(l&U)===0;if(a&&$(i,t),(l&V)!==0){var c=i;he?.delete(c),(l&Oe)===0&&(l&fe&&(i.f|=Oe),Ar(c,_e))}else a&&((l&Ce)!==0&&ke!==null&&ke.add(i),ve(i))}}}function kt(e){if(typeof e!="object"||e===null||Je in e)return e;const t=Sn(e);if(t!==cs&&t!==fs)return e;var n=new Map,r=ar(e),s=re(0),o=Fe,i=l=>{if(Fe===o)return l();var a=y,c=Fe;de(null),qn(o);var u=l();return de(a),qn(c),u};return r&&n.set("length",re(e.length)),new Proxy(e,{defineProperty(l,a,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&ws();var u=n.get(a);return u===void 0?u=i(()=>{var h=re(c.value);return n.set(a,h),h}):R(u,c.value,!0),!0},deleteProperty(l,a){var c=n.get(a);if(c===void 0){if(a in l){const u=i(()=>re(K));n.set(a,u),Ct(s)}}else R(c,K),Ct(s);return!0},get(l,a,c){if(a===Je)return e;var u=n.get(a),h=a in l;if(u===void 0&&(!h||Mt(l,a)?.writable)&&(u=i(()=>{var p=kt(h?l[a]:K),d=re(p);return d}),n.set(a,u)),u!==void 0){var f=_(u);return f===K?void 0:f}return Reflect.get(l,a,c)},getOwnPropertyDescriptor(l,a){var c=Reflect.getOwnPropertyDescriptor(l,a);if(c&&"value"in c){var u=n.get(a);u&&(c.value=_(u))}else if(c===void 0){var h=n.get(a),f=h?.v;if(h!==void 0&&f!==K)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(l,a){if(a===Je)return!0;var c=n.get(a),u=c!==void 0&&c.v!==K||Reflect.has(l,a);if(c!==void 0||E!==null&&(!u||Mt(l,a)?.writable)){c===void 0&&(c=i(()=>{var f=u?kt(l[a]):K,p=re(f);return p}),n.set(a,c));var h=_(c);if(h===K)return!1}return u},set(l,a,c,u){var h=n.get(a),f=a in l;if(r&&a==="length")for(var p=c;p<h.v;p+=1){var d=n.get(p+"");d!==void 0?R(d,K):p in l&&(d=i(()=>re(K)),n.set(p+"",d))}if(h===void 0)(!f||Mt(l,a)?.writable)&&(h=i(()=>re(void 0)),R(h,kt(c)),n.set(a,h));else{f=h.v!==K;var w=i(()=>kt(c));R(h,w)}var v=Reflect.getOwnPropertyDescriptor(l,a);if(v?.set&&v.set.call(u,c),!f){if(r&&typeof a=="string"){var b=n.get("length"),X=Number(a);Number.isInteger(X)&&X>=b.v&&R(b,X+1)}Ct(s)}return!0},ownKeys(l){_(s);var a=Reflect.ownKeys(l).filter(h=>{var f=n.get(h);return f===void 0||f.v!==K});for(var[c,u]of n)u.v!==K&&!(c in l)&&a.push(c);return a},setPrototypeOf(){xs()}})}var Gn,Br,Tr,Dr;function qs(){if(Gn===void 0){Gn=window,Br=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Tr=Mt(t,"firstChild").get,Dr=Mt(t,"nextSibling").get,zn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),zn(n)&&(n.__t=void 0)}}function Me(e=""){return document.createTextNode(e)}function Dn(e){return Tr.call(e)}function It(e){return Dr.call(e)}function m(e,t){return Dn(e)}function Lt(e,t=!1){{var n=Dn(e);return n instanceof Comment&&n.data===""?It(n):n}}function x(e,t=1,n=!1){let r=e;for(;t--;)r=It(r);return r}function Vs(e){e.textContent=""}function Pr(){return!1}function Pn(e){var t=y,n=E;de(null),we(null);try{return e()}finally{de(t),we(n)}}function Ir(e){E===null&&(y===null&&bs(),gs()),Le&&_s()}function Us(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function xe(e,t,n){var r=E;r!==null&&(r.f&se)!==0&&(e|=se);var s={ctx:H,deps:null,nodes:null,f:e|U|fe,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Tt(s),s.f|=Mn}catch(l){throw ee(s),l}else t!==null&&ve(s);var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&at)===0&&(o=o.first,(e&Ce)!==0&&(e&nt)!==0&&o!==null&&(o.f|=nt)),o!==null&&(o.parent=r,r!==null&&Us(o,r),y!==null&&(y.f&V)!==0&&(e&je)===0)){var i=y;(i.effects??=[]).push(o)}return s}function In(){return y!==null&&!pe}function Rn(e){const t=xe(Dt,null,!1);return $(t,O),t.teardown=e,t}function Bt(e){Ir();var t=E.f,n=!y&&(t&ge)!==0&&(t&Mn)===0;if(n){var r=H;(r.e??=[]).push(e)}else return Rr(e)}function Rr(e){return xe(Kt|hr,e,!1)}function Ws(e){return Ir(),xe(Dt|hr,e,!0)}function Zs(e){Pe.ensure();const t=xe(je|at,e,!0);return(n={})=>new Promise(r=>{n.outro?Ne(t,()=>{ee(t),r(void 0)}):(ee(t),r(void 0))})}function Js(e){return xe(Kt,e,!1)}function Qs(e){return xe(Cn|at,e,!0)}function $r(e,t=0){return xe(Dt|t,e,!0)}function ce(e,t=[],n=[],r=[]){Os(r,t,n,s=>{xe(Dt,()=>e(...s.map(_)),!0)})}function Qt(e,t=0){var n=xe(Ce|t,e,!0);return n}function le(e){return xe(ge|at,e,!0)}function Hr(e){var t=e.teardown;if(t!==null){const n=Le,r=y;Kn(!0),de(null);try{t.call(null)}finally{Kn(n),de(r)}}}function Xr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Pn(()=>{s.abort(Ue)});var r=n.next;(n.f&je)!==0?n.parent=null:ee(n,t),n=r}}function eo(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ge)===0&&ee(t),t=n}}function ee(e,t=!0){var n=!1;(t||(e.f&dr)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(to(e.nodes.start,e.nodes.end),n=!0),Xr(e,t&&!n),Vt(e,0),$(e,Te);var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)o.stop();Hr(e);var s=e.parent;s!==null&&s.first!==null&&Yr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function to(e,t){for(;e!==null;){var n=e===t?null:It(e);e.remove(),e=n}}function Yr(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ne(e,t,n=!0){var r=[];Nr(e,r,!0);var s=()=>{n&&ee(e),t&&t()},o=r.length;if(o>0){var i=()=>--o||s();for(var l of r)l.out(i)}else s()}function Nr(e,t,n){if((e.f&se)===0){e.f^=se;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||n)&&t.push(l);for(var s=e.first;s!==null;){var o=s.next,i=(s.f&nt)!==0||(s.f&ge)!==0&&(e.f&Ce)!==0;Nr(s,t,i?n:!1),s=o}}}function $n(e){Fr(e,!0)}function Fr(e,t){if((e.f&se)!==0){e.f^=se,(e.f&O)===0&&($(e,U),ve(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&nt)!==0||(n.f&ge)!==0;Fr(n,s?t:!1),n=r}var o=e.nodes&&e.nodes.t;if(o!==null)for(const i of o)(i.is_global||t)&&i.in()}}function Or(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var s=n===r?null:It(n);t.append(n),n=s}}let jt=!1,Le=!1;function Kn(e){Le=e}let y=null,pe=!1;function de(e){y=e}let E=null;function we(e){E=e}let ue=null;function zr(e){y!==null&&(ue===null?ue=[e]:ue.push(e))}let J=null,ne=0,ie=null;function no(e){ie=e}let Lr=1,Ye=0,Fe=Ye;function qn(e){Fe=e}function jr(){return++Lr}function Rt(e){var t=e.f;if((t&U)!==0)return!0;if(t&V&&(e.f&=~Oe),(t&_e)!==0){for(var n=e.deps,r=n.length,s=0;s<r;s++){var o=n[s];if(Rt(o)&&Mr(o),o.wv>e.wv)return!0}(t&fe)!==0&&he===null&&$(e,O)}return!1}function Gr(e,t,n=!0){var r=e.reactions;if(r!==null&&!(ue!==null&&tt.call(ue,e)))for(var s=0;s<r.length;s++){var o=r[s];(o.f&V)!==0?Gr(o,t,!1):t===o&&(n?$(o,U):(o.f&O)!==0&&$(o,_e),ve(o))}}function Kr(e){var t=J,n=ne,r=ie,s=y,o=ue,i=H,l=pe,a=Fe,c=e.f;J=null,ne=0,ie=null,y=(c&(ge|je))===0?e:null,ue=null,rt(e.ctx),pe=!1,Fe=++Ye,e.ac!==null&&(Pn(()=>{e.ac.abort(Ue)}),e.ac=null);try{e.f|=hn;var u=e.fn,h=u(),f=e.deps,p=D?.is_fork;if(J!==null){var d;if(p||Vt(e,ne),f!==null&&ne>0)for(f.length=ne+J.length,d=0;d<J.length;d++)f[ne+d]=J[d];else e.deps=f=J;if(In()&&(e.f&fe)!==0)for(d=ne;d<f.length;d++)(f[d].reactions??=[]).push(e)}else!p&&f!==null&&ne<f.length&&(Vt(e,ne),f.length=ne);if(ft()&&ie!==null&&!pe&&f!==null&&(e.f&(V|_e|U))===0)for(d=0;d<ie.length;d++)Gr(ie[d],e);if(s!==null&&s!==e){if(Ye++,s.deps!==null)for(let w=0;w<n;w+=1)s.deps[w].rv=Ye;if(t!==null)for(const w of t)w.rv=Ye;ie!==null&&(r===null?r=ie:r.push(...ie))}return(e.f&De)!==0&&(e.f^=De),h}catch(w){return br(w)}finally{e.f^=hn,J=t,ne=n,ie=r,y=s,ue=o,rt(i),pe=l,Fe=a}}function ro(e,t){let n=t.reactions;if(n!==null){var r=ls.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}if(n===null&&(t.f&V)!==0&&(J===null||!tt.call(J,t))){var o=t;(o.f&fe)!==0&&(o.f^=fe,o.f&=~Oe),An(o),Er(o),Vt(o,0)}}function Vt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ro(e,n[r])}function Tt(e){var t=e.f;if((t&Te)===0){$(e,O);var n=E,r=jt;E=e,jt=!0;try{(t&(Ce|ur))!==0?eo(e):Xr(e),Hr(e);var s=Kr(e);e.teardown=typeof s=="function"?s:null,e.wv=Lr;var o;un&&Ds&&(e.f&U)!==0&&e.deps}finally{jt=r,E=n}}}function _(e){var t=e.f,n=(t&V)!==0;if(y!==null&&!pe){var r=E!==null&&(E.f&Te)!==0;if(!r&&(ue===null||!tt.call(ue,e))){var s=y.deps;if((y.f&hn)!==0)e.rv<Ye&&(e.rv=Ye,J===null&&s!==null&&s[ne]===e?ne++:J===null?J=[e]:J.push(e));else{(y.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[y]:tt.call(o,y)||o.push(y)}}}if(Le&&Ie.has(e))return Ie.get(e);if(n){var i=e;if(Le){var l=i.v;return((i.f&O)===0&&i.reactions!==null||Vr(i))&&(l=Tn(i)),Ie.set(i,l),l}var a=(i.f&fe)===0&&!pe&&y!==null&&(jt||(y.f&fe)!==0),c=i.deps===null;Rt(i)&&(a&&(i.f|=fe),Mr(i)),a&&!c&&qr(i)}if(he?.has(e))return he.get(e);if((e.f&De)!==0)throw e.v;return e.v}function qr(e){if(e.deps!==null){e.f|=fe;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&V)!==0&&(t.f&fe)===0&&qr(t)}}function Vr(e){if(e.v===K)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ie.has(t)||(t.f&V)!==0&&Vr(t))return!0;return!1}function ut(e){var t=pe;try{return pe=!0,e()}finally{pe=t}}function so(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Je in e)gn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Je in n&&gn(n)}}}function gn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{gn(e[r],t)}catch{}const n=Sn(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=cr(n);for(let s in r){const o=r[s].get;if(o)try{o.call(e)}catch{}}}}}const oo=["touchstart","touchmove"];function io(e){return oo.includes(e)}const Ur=new Set,bn=new Set;function ao(e,t,n,r={}){function s(o){if(r.capture||St.call(t,o),!o.cancelBubble)return Pn(()=>n?.call(this,o))}return Ee(()=>{t.addEventListener(e,s,r)}),s}function lo(e,t,n,r,s){var o={capture:r,passive:s},i=ao(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Rn(()=>{t.removeEventListener(e,i,o)})}function Hn(e){for(var t=0;t<e.length;t++)Ur.add(e[t]);for(var n of bn)n(e)}let Vn=null;function St(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;Vn=e;var i=0,l=Vn===e&&e.__root;if(l){var a=s.indexOf(l);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;a<=c&&(i=a)}if(o=s[i]||e.target,o!==t){lr(e,"currentTarget",{configurable:!0,get(){return o||n}});var u=y,h=E;de(null),we(null);try{for(var f,p=[];o!==null;){var d=o.assignedSlot||o.parentNode||o.host||null;try{var w=o["__"+r];w!=null&&(!o.disabled||e.target===o)&&w.call(o,e)}catch(v){f?p.push(v):f=v}if(e.cancelBubble||d===t||d===null)break;o=d}if(f){for(let v of p)queueMicrotask(()=>{throw v});throw f}}finally{e.__root=t,delete e.currentTarget,de(u),we(h)}}}function co(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Xn(e,t){var n=E;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function N(e,t){var n=(t&As)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=co(s?e:"<!>"+e),r=Dn(r));var o=n||Br?document.importNode(r,!0):r.cloneNode(!0);return Xn(o,o),o}}function an(e=""){{var t=Me(e+"");return Xn(t,t),t}}function Gt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Me();return e.append(t,n),Xn(t,n),e}function M(e,t){e!==null&&e.before(t)}function F(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function fo(e,t){return uo(e,t)}const Ke=new Map;function uo(e,{target:t,anchor:n,props:r={},events:s,context:o,intro:i=!0}){qs();var l=new Set,a=h=>{for(var f=0;f<h.length;f++){var p=h[f];if(!l.has(p)){l.add(p);var d=io(p);t.addEventListener(p,St,{passive:d});var w=Ke.get(p);w===void 0?(document.addEventListener(p,St,{passive:d}),Ke.set(p,1)):Ke.set(p,w+1)}}};a(Zt(Ur)),bn.add(a);var c=void 0,u=Zs(()=>{var h=n??t.appendChild(Me());return Ns(h,{pending:()=>{}},f=>{lt({});var p=H;o&&(p.c=o),s&&(r.$$events=s),c=e(f,r)||{},ct()}),()=>{for(var f of l){t.removeEventListener(f,St);var p=Ke.get(f);--p===0?(document.removeEventListener(f,St),Ke.delete(f)):Ke.set(f,p)}bn.delete(a),h!==n&&h.parentNode?.removeChild(h)}});return ho.set(c,u),c}let ho=new WeakMap;class Wr{anchor;#t=new Map;#a=new Map;#e=new Map;#o=new Set;#i=!0;constructor(t,n=!0){this.anchor=t,this.#i=n}#r=()=>{var t=D;if(this.#t.has(t)){var n=this.#t.get(t),r=this.#a.get(n);if(r)$n(r),this.#o.delete(n);else{var s=this.#e.get(n);s&&(this.#a.set(n,s.effect),this.#e.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[o,i]of this.#t){if(this.#t.delete(o),o===t)break;const l=this.#e.get(i);l&&(ee(l.effect),this.#e.delete(i))}for(const[o,i]of this.#a){if(o===n||this.#o.has(o))continue;const l=()=>{if(Array.from(this.#t.values()).includes(o)){var c=document.createDocumentFragment();Or(i,c),c.append(Me()),this.#e.set(o,{effect:i,fragment:c})}else ee(i);this.#o.delete(o),this.#a.delete(o)};this.#i||!r?(this.#o.add(o),Ne(i,l,!1)):l()}}};#n=t=>{this.#t.delete(t);const n=Array.from(this.#t.values());for(const[r,s]of this.#e)n.includes(r)||(ee(s.effect),this.#e.delete(r))};ensure(t,n){var r=D,s=Pr();if(n&&!this.#a.has(t)&&!this.#e.has(t))if(s){var o=document.createDocumentFragment(),i=Me();o.append(i),this.#e.set(t,{effect:le(()=>n(i)),fragment:o})}else this.#a.set(t,le(()=>n(this.anchor)));if(this.#t.set(r,t),s){for(const[l,a]of this.#a)l===t?r.unskip_effect(a):r.skip_effect(a);for(const[l,a]of this.#e)l===t?r.unskip_effect(a.effect):r.skip_effect(a.effect);r.oncommit(this.#r),r.ondiscard(this.#n)}else this.#r()}}function me(e,t,n=!1){var r=new Wr(e),s=n?nt:0;function o(i,l){r.ensure(i,l)}Qt(()=>{var i=!1;t((l,a=!0)=>{i=!0,o(a,l)}),i||o(!1,null)},s)}const vo=Symbol("NaN");function po(e,t,n){var r=new Wr(e),s=!ft();Qt(()=>{var o=t();o!==o&&(o=vo),s&&o!==null&&typeof o=="object"&&(o={}),r.ensure(o,n)})}function Un(e,t){return t}function _o(e,t,n){for(var r=[],s=t.length,o,i=t.length,l=0;l<s;l++){let h=t[l];Ne(h,()=>{if(o){if(o.pending.delete(h),o.done.add(h),o.pending.size===0){var f=e.outrogroups;mn(Zt(o.done)),f.delete(o),f.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var a=r.length===0&&n!==null;if(a){var c=n,u=c.parentNode;Vs(u),u.append(c),e.items.clear()}mn(t,!a)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function mn(e,t=!0){for(var n=0;n<e.length;n++)ee(e[n],t)}var Wn;function wn(e,t,n,r,s,o=null){var i=e,l=new Map,a=(t&vr)!==0;if(a){var c=e;i=c.appendChild(Me())}var u=null,h=Sr(()=>{var b=n();return ar(b)?b:b==null?[]:Zt(b)}),f,p=!0;function d(){v.fallback=u,go(v,f,i,t,r),u!==null&&(f.length===0?(u.f&Se)===0?$n(u):(u.f^=Se,Et(u,null,i)):Ne(u,()=>{u=null}))}var w=Qt(()=>{f=_(h);for(var b=f.length,X=new Set,z=D,C=Pr(),B=0;B<b;B+=1){var L=f[B],S=r(L,B),k=p?null:l.get(S);k?(k.v&&it(k.v,L),k.i&&it(k.i,B),C&&z.unskip_effect(k.e)):(k=bo(l,p?i:Wn??=Me(),L,S,B,s,t,n),p||(k.e.f|=Se),l.set(S,k)),X.add(S)}if(b===0&&o&&!u&&(p?u=le(()=>o(i)):(u=le(()=>o(Wn??=Me())),u.f|=Se)),b>X.size&&ps(),!p)if(C){for(const[T,j]of l)X.has(T)||z.skip_effect(j.e);z.oncommit(d),z.ondiscard(()=>{})}else d();_(h)}),v={effect:w,items:l,outrogroups:null,fallback:u};p=!1}function wt(e){for(;e!==null&&(e.f&ge)===0;)e=e.next;return e}function go(e,t,n,r,s){var o=(r&Ms)!==0,i=t.length,l=e.items,a=wt(e.effect.first),c,u=null,h,f=[],p=[],d,w,v,b;if(o)for(b=0;b<i;b+=1)d=t[b],w=s(d,b),v=l.get(w).e,(v.f&Se)===0&&(v.nodes?.a?.measure(),(h??=new Set).add(v));for(b=0;b<i;b+=1){if(d=t[b],w=s(d,b),v=l.get(w).e,e.outrogroups!==null)for(const j of e.outrogroups)j.pending.delete(v),j.done.delete(v);if((v.f&Se)!==0)if(v.f^=Se,v===a)Et(v,null,n);else{var X=u?u.next:a;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),Be(e,u,v),Be(e,v,X),Et(v,X,n),u=v,f=[],p=[],a=wt(u.next);continue}if((v.f&se)!==0&&($n(v),o&&(v.nodes?.a?.unfix(),(h??=new Set).delete(v))),v!==a){if(c!==void 0&&c.has(v)){if(f.length<p.length){var z=p[0],C;u=z.prev;var B=f[0],L=f[f.length-1];for(C=0;C<f.length;C+=1)Et(f[C],z,n);for(C=0;C<p.length;C+=1)c.delete(p[C]);Be(e,B.prev,L.next),Be(e,u,B),Be(e,L,z),a=z,u=L,b-=1,f=[],p=[]}else c.delete(v),Et(v,a,n),Be(e,v.prev,v.next),Be(e,v,u===null?e.effect.first:u.next),Be(e,u,v),u=v;continue}for(f=[],p=[];a!==null&&a!==v;)(c??=new Set).add(a),p.push(a),a=wt(a.next);if(a===null)continue}(v.f&Se)===0&&f.push(v),u=v,a=wt(v.next)}if(e.outrogroups!==null){for(const j of e.outrogroups)j.pending.size===0&&(mn(Zt(j.done)),e.outrogroups?.delete(j));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||c!==void 0){var S=[];if(c!==void 0)for(v of c)(v.f&se)===0&&S.push(v);for(;a!==null;)(a.f&se)===0&&a!==e.fallback&&S.push(a),a=wt(a.next);var k=S.length;if(k>0){var T=(r&vr)!==0&&i===0?n:null;if(o){for(b=0;b<k;b+=1)S[b].nodes?.a?.measure();for(b=0;b<k;b+=1)S[b].nodes?.a?.fix()}_o(e,S,T)}}o&&Ee(()=>{if(h!==void 0)for(v of h)v.nodes?.a?.apply()})}function bo(e,t,n,r,s,o,i,l){var a=(i&Ss)!==0?(i&Cs)===0?qt(n,!1,!1):ze(n):null,c=(i&Es)!==0?ze(s):null;return{v:a,i:c,e:le(()=>(o(t,a??n,c??s,l),()=>{e.delete(r)}))}}function Et(e,t,n){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end,o=t&&(t.f&Se)===0?t.nodes.start:n;r!==null;){var i=It(r);if(o.before(r),r===s)return;r=i}}function Be(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function mo(e,t,n){var r=e==null?"":""+e;return r===""?null:r}function Qe(e,t,n,r,s,o){var i=e.__className;if(i!==n||i===void 0){var l=mo(n);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}return o}const wo=Symbol("is custom element"),xo=Symbol("is html");function et(e,t,n,r){var s=yo(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[ds]=n),n==null?e.removeAttribute(t):typeof n!="string"&&ko(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function yo(e){return e.__attributes??={[wo]:e.nodeName.includes("-"),[xo]:e.namespaceURI===Bs}}var Zn=new Map;function ko(e){var t=e.getAttribute("is")||e.nodeName,n=Zn.get(t);if(n)return n;Zn.set(t,n=[]);for(var r,s=e,o=Element.prototype;o!==s;){r=cr(s);for(var i in r)r[i].set&&n.push(i);s=Sn(s)}return n}function Jn(e,t){return e===t||e?.[Je]===t}function Qn(e={},t,n,r){return Js(()=>{var s,o;return $r(()=>{s=o,o=[],ut(()=>{e!==n(...o)&&(t(e,...o),s&&Jn(n(...s),e)&&t(null,...s))})}),()=>{Ee(()=>{o&&Jn(n(...o),e)&&t(null,...o)})}}),e}function So(e=!1){const t=H,n=t.l.u;if(!n)return;let r=()=>so(t.s);if(e){let s=0,o={};const i=Jt(()=>{let l=!1;const a=t.s;for(const c in a)a[c]!==o[c]&&(o[c]=a[c],l=!0);return l&&s++,s});r=()=>_(i)}n.b.length&&Ws(()=>{er(t,r),dn(n.b)}),Bt(()=>{const s=ut(()=>n.m.map(us));return()=>{for(const o of s)typeof o=="function"&&o()}}),n.a.length&&Bt(()=>{er(t,r),dn(n.a)})}function er(e,t){if(e.l.s)for(const n of e.l.s)_(n);t()}function Zr(e,t,n){if(e==null)return t(void 0),Ze;const r=ut(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const qe=[];function be(e,t=Ze){let n=null;const r=new Set;function s(l){if(_r(e,l)&&(e=l,n)){const a=!qe.length;for(const c of r)c[1](),qe.push(c,e);if(a){for(let c=0;c<qe.length;c+=2)qe[c][0](qe[c+1]);qe.length=0}}}function o(l){s(l(e))}function i(l,a=Ze){const c=[l,a];return r.add(c),r.size===1&&(n=t(s,o)||Ze),l(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:i}}function xn(e){let t;return Zr(e,n=>t=n)(),t}let yn=Symbol();function Q(e,t,n){const r=n[t]??={store:null,source:qt(void 0),unsubscribe:Ze};if(r.store!==e&&!(yn in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Ze;else{var s=!0;r.unsubscribe=Zr(e,o=>{s?r.source.v=o:R(r.source,o)}),s=!1}return e&&yn in n?xn(e):_(r.source)}function dt(){const e={};function t(){Rn(()=>{for(var n in e)e[n].unsubscribe();lr(e,yn,{enumerable:!1,value:!0})})}return[e,t]}function ln(e,t,n,r){var s=r,o=!0,i=()=>(o&&(o=!1,s=r),s),l;l=e[t],l===void 0&&r!==void 0&&(l=i());var a;return a=()=>{var c=e[t];return c===void 0?i():(o=!0,c)},a}function Jr(e){H===null&&hs(),Pt&&H.l!==null?Eo(H).m.push(e):Bt(()=>{const t=ut(e);if(typeof t=="function")return t})}function Eo(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Mo="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Mo);const Yn=be(null),kn=be("disconnected"),Qr=be(!1),xt=be(!0);function At(e){Yn.set(e),Qr.set(e!==null)}var Co=N("<div></div>"),Ao=N('<div class="flex items-center gap-1.5 text-xs" role="status" aria-live="polite"><div class="relative" aria-hidden="true"><div></div> <!></div> <span class="text-text-dim"> </span></div>');function Bo(e){const t=()=>Q(kn,"$connectionState",n),[n,r]=dt(),s={disconnected:{color:"bg-gray-500",label:"Offline",icon:"!"},connecting:{color:"bg-yellow-500",label:"Connecting...",icon:"~"},connected:{color:"bg-success",label:"Connected",icon:""},error:{color:"bg-red-500",label:"Error",icon:"!"}};let o=ot(()=>s[t()]||s.disconnected);var i=Ao(),l=m(i),a=m(l),c=x(a,2);{var u=p=>{var d=Co();ce(()=>Qe(d,1,`absolute inset-0 w-2 h-2 rounded-full ${_(o).color??""} animate-ping opacity-75`)),M(p,d)};me(c,p=>{t()==="connected"&&p(u)})}var h=x(l,2),f=m(h);ce(()=>{Qe(a,1,`w-2 h-2 rounded-full ${_(o).color??""}`),F(f,_(o).label)}),M(e,i),r()}var To=N('<button class="text-text-dim hover:text-text transition-colors cursor-pointer bg-transparent border-none p-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round"></path></svg></button>'),Do=N('<header class="h-12 flex items-center justify-between px-4 bg-surface/80 backdrop-blur border-b border-border z-50 relative"><nav class="flex items-center gap-3" aria-label="Main navigation"><!> <div class="flex items-center gap-2"><div class="w-6 h-6 rounded-full bg-accent/20 flex items-center justify-center" aria-hidden="true"><div class="w-3 h-3 rounded-full bg-accent animate-glow"></div></div> <h1 class="text-lg font-bold tracking-tight"><span class="text-accent">DAG</span><span class="text-text">Pulse</span></h1></div> <span class="text-xs text-text-dim hidden sm:inline">Real-time Kaspa BlockDAG</span></nav> <div class="flex items-center gap-4"><!> <a href="https://github.com/Yonkoo11/dagpulse" target="_blank" rel="noopener noreferrer" class="text-text-dim hover:text-text transition-colors text-xs flex items-center gap-1 p-1" aria-label="View source on GitHub"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"></path></svg> <span class="hidden sm:inline">GitHub</span></a></div></header>');function Po(e,t){let n=ln(t,"isMobile",3,!1),r=ln(t,"toggleStats",3,()=>{}),s=ln(t,"showStats",3,!0);var o=Do(),i=m(o),l=m(i);{var a=h=>{var f=To();f.__click=function(...p){r()?.apply(this,p)},ce(()=>{et(f,"aria-label",s()?"Hide stats panel":"Show stats panel"),et(f,"aria-expanded",s())}),M(h,f)};me(l,h=>{n()&&h(a)})}var c=x(i,2),u=m(c);Bo(u),M(e,o)}Hn(["click"]);const Io=150,Nn=be([]),Ut=be(new Map),tr=be([]),nr=be([]),en=be(0),Fn=be(0);function Ro(e){const t=Date.now();Nn.update(o=>{if(o.push(e),o.length>Io){const i=o.shift();Ut.update(l=>(l.delete(i.hash),l))}return o}),Ut.update(o=>(o.set(e.hash,e),o)),tr.update(o=>{o.push(t);const i=t-3e3;for(;o.length>0&&o[0]<i;)o.shift();return o}),nr.update(o=>(o.push(e.txCount),o.length>30&&o.shift(),o));const n=xn(tr);en.set(n.length/3);const s=xn(nr).reduce((o,i)=>o+i,0);Fn.set(s/3)}const es=be({blocksPerSecond:0,txPerSecond:0,hashrate:"---",blueScore:0,daaScore:0,peerCount:0,mempoolSize:0,blocksSeen:0,isConnected:!1,isSynced:!1,serverVersion:""});function cn(e){es.update(t=>({...t,...e}))}function rr(e){return e>=1e9?(e/1e9).toFixed(2)+"B":e>=1e6?(e/1e6).toFixed(2)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toFixed(1)}function $o(e){return new Date(e).toLocaleTimeString(void 0,{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function fn(e,t=8){return e.length<=t*2+3?e:e.slice(0,t)+"..."+e.slice(-t)}var Ho=N('<div class="text-xl font-bold tabular-nums text-accent animate-stat-pulse"> </div>'),Xo=N("<div> </div>"),Yo=N('<div class="animate-fade-in"><div class="text-[10px] text-text-dim uppercase tracking-wider mb-0.5"> </div> <!></div>'),No=N('<div class="w-56 bg-surface/60 backdrop-blur border-r border-border flex flex-col overflow-y-auto"><div class="p-3 border-b border-border"><h2 class="text-xs font-semibold text-text-dim uppercase tracking-wider">Network Stats</h2></div> <div class="flex-1 p-3 space-y-3"></div> <div class="p-3 border-t border-border"><h3 class="text-[10px] text-text-dim uppercase tracking-wider mb-2">Confirmation Speed</h3> <div class="space-y-1.5"><div class="flex items-center gap-2"><div class="w-full bg-bg rounded-full h-2 overflow-hidden"><div class="h-full bg-accent rounded-full" style="width: 2%"></div></div> <span class="text-[10px] text-accent font-mono whitespace-nowrap">KAS 1s</span></div> <div class="flex items-center gap-2"><div class="w-full bg-bg rounded-full h-2 overflow-hidden"><div class="h-full bg-purple-500/60 rounded-full" style="width: 12%"></div></div> <span class="text-[10px] text-text-dim font-mono whitespace-nowrap">ETH 12s</span></div> <div class="flex items-center gap-2"><div class="w-full bg-bg rounded-full h-2 overflow-hidden"><div class="h-full bg-orange-500/60 rounded-full" style="width: 100%"></div></div> <span class="text-[10px] text-text-dim font-mono whitespace-nowrap">BTC 10m</span></div></div></div></div>');function Fo(e,t){lt(t,!0);const n=()=>Q(en,"$blocksPerSecond",o),r=()=>Q(Fn,"$txPerSecond",o),s=()=>Q(es,"$networkStats",o),[o,i]=dt();let l=ot(()=>[{label:"Blocks/sec",value:n().toFixed(1),accent:!0,key:"bps"},{label:"TX/sec",value:r().toFixed(1),key:"tps"},{label:"Blue Score",value:s().blueScore>0?rr(s().blueScore):"---",key:"blue"},{label:"DAA Score",value:s().daaScore>0?rr(s().daaScore):"---",key:"daa"},{label:"Hashrate",value:s().hashrate,key:"hash"},{label:"Blocks Seen",value:String(s().blocksSeen||0),key:"seen"}]),a="",c=re(0);Bt(()=>{const f=n().toFixed(1);a&&a!==f&&Ks(c),a=f});var u=No(),h=x(m(u),2);wn(h,21,()=>_(l),f=>f.key,(f,p)=>{var d=Yo(),w=m(d),v=m(w),b=x(w,2);{var X=C=>{var B=Gt(),L=Lt(B);po(L,()=>_(c),S=>{var k=Ho(),T=m(k);ce(()=>F(T,_(p).value)),M(S,k)}),M(C,B)},z=C=>{var B=Xo(),L=m(B);ce(()=>{Qe(B,1,`text-xl font-bold tabular-nums ${_(p).accent?"text-accent":"text-text"}`),F(L,_(p).value)}),M(C,B)};me(b,C=>{_(p).key==="bps"?C(X):C(z,!1)})}ce(()=>F(v,_(p).label)),M(f,d)}),M(e,u),ct(),i()}Ps();const Oo=55,zo=46,Wt=14;function Lo(e,t){if(e.length===0)return;const n=t.height/2,r=[];let s=[],o=0;for(const i of e)s.length>0&&i.addedAt-o>20&&(r.push(s),s=[]),s.push(i),o=i.addedAt;s.length>0&&r.push(s);for(let i=0;i<r.length;i++){const l=r[i],a=i*Oo;for(let c=0;c<l.length;c++){const u=l[c],h=l.length-1,f=h===0?0:(c-h/2)*zo;u.targetX=a,u.targetY=n+f}}}function jo(e,t){const n=performance.now(),r=1-Math.pow(.001,t/1e3);for(const s of e){s.x+=(s.targetX-s.x)*r,s.y+=(s.targetY-s.y)*r;const o=n-s.addedAt;o<500?(s.opacity=Math.min(1,o/300),s.scale=.5+Math.min(.5,o/300)*.5):(s.opacity=1,s.scale=1),o<1500?s.glowIntensity=1-o/1500:s.glowIntensity=0}}function Go(e){if(e.length===0)return 0;let t=0;for(const n of e)n.targetX>t&&(t=n.targetX);return t}const q={bg:"#0a0e1a",gridLine:"rgba(31, 41, 55, 0.3)",edgeBlue:"rgba(6, 182, 212, 0.45)",edgeRed:"rgba(107, 114, 128, 0.25)",blockBlue:"#06b6d4",blockBlueFill:"#0e7490",blockRed:"#6b7280",blockRedFill:"#374151",selectedRing:"#f59e0b"};function Ko(e,t,n,r,s,o){e.fillStyle=q.bg,e.fillRect(0,0,s,o),qo(e,r.offsetX,r.offsetY,r.zoom,s,o),e.save(),e.translate(r.offsetX,r.offsetY),e.scale(r.zoom,r.zoom),Vo(e,t,n,r);for(const i of t)i.opacity<.05||Wo(e,i,r);e.restore(),Zo(e,s,o)}function qo(e,t,n,r,s,o){const i=80*r;if(i<20)return;e.strokeStyle=q.gridLine,e.lineWidth=.5;const l=(t%i+i)%i,a=(n%i+i)%i;e.beginPath();for(let c=l;c<s;c+=i)e.moveTo(c,0),e.lineTo(c,o);for(let c=a;c<o;c+=i)e.moveTo(0,c),e.lineTo(s,c);e.stroke()}function Vo(e,t,n,r){const s=new Map;for(const a of t){if(a.opacity<.05)continue;const c=Math.round(a.targetX);s.has(c)||s.set(c,[]),s.get(c).push(a)}const o=[...s.keys()].sort((a,c)=>a-c),i=[],l=[];for(let a=1;a<o.length;a++){const c=s.get(o[a]),u=s.get(o[a-1]);for(const h of c){let f=!1;for(const p of h.parentHashes){const d=n.get(p);if(d&&d.opacity>.05){const w={from:d,to:h};r.selectedHash===h.hash||r.selectedHash===d.hash||r.hoveredHash===h.hash||r.hoveredHash===d.hash?l.push(w):i.push(w),f=!0}}if(!f&&u.length>0){const p=[...u].sort((v,b)=>Math.abs(v.y-h.y)-Math.abs(b.y-h.y)),w=1+(parseInt(h.hash.slice(0,6),16)||0)%2;for(let v=0;v<Math.min(w,p.length);v++){const b={from:p[v],to:h};r.selectedHash===h.hash||r.selectedHash===p[v].hash||r.hoveredHash===h.hash||r.hoveredHash===p[v].hash?l.push(b):i.push(b)}}}}for(const a of i)sr(e,a.from,a.to,r);for(const a of l)sr(e,a.from,a.to,r)}function sr(e,t,n,r){const s=r.selectedHash===n.hash||r.selectedHash===t.hash,o=r.hoveredHash===n.hash||r.hoveredHash===t.hash,i=s||o;e.beginPath();const l=n.x-t.x,a=Math.max(15,Math.abs(l)*.35);e.moveTo(t.x,t.y),e.bezierCurveTo(t.x+a,t.y,n.x-a,n.y,n.x,n.y),s?(e.strokeStyle=q.selectedRing,e.lineWidth=2.5,e.globalAlpha=.9):o?(e.strokeStyle=q.blockBlue,e.lineWidth=2,e.globalAlpha=.8):(e.strokeStyle=n.isBlue?q.edgeBlue:q.edgeRed,e.lineWidth=1,e.globalAlpha=Math.min(t.opacity,n.opacity)*.6),e.stroke(),(i||e.globalAlpha>.3)&&(e.fillStyle=e.strokeStyle,Uo(e,t,n,a,i)),e.globalAlpha=1}function Uo(e,t,n,r,s){const o=n.x-r,i=n.y,l=n.x-o,a=n.y-i,c=Math.sqrt(l*l+a*a);if(c<.01)return;const u=l/c,h=a/c,f=s?6:4,p=Wt+2,d=n.x-u*p,w=n.y-h*p,v=-h,b=u;e.beginPath(),e.moveTo(d,w),e.lineTo(d-u*f-v*f*.5,w-h*f-b*f*.5),e.lineTo(d-u*f+v*f*.5,w-h*f+b*f*.5),e.closePath(),e.fill()}function Wo(e,t,n){const r=Wt*t.scale,s=n.selectedHash===t.hash,o=n.hoveredHash===t.hash;if(e.globalAlpha=t.opacity,t.glowIntensity>.02){const i=t.glowIntensity*.25,l=r+8*t.glowIntensity;e.beginPath(),e.arc(t.x,t.y,l,0,Math.PI*2),e.fillStyle=t.isBlue?`rgba(34, 211, 238, ${i})`:`rgba(156, 163, 175, ${i})`,e.fill()}e.beginPath(),e.arc(t.x,t.y,r,0,Math.PI*2),e.fillStyle=o?t.isBlue?q.blockBlue:q.blockRed:t.isBlue?q.blockBlueFill:q.blockRedFill,e.fill(),e.beginPath(),e.arc(t.x,t.y,r,0,Math.PI*2),e.strokeStyle=t.isBlue?q.blockBlue:q.blockRed,e.lineWidth=s?2.5:1.5,e.stroke(),s&&(e.beginPath(),e.arc(t.x,t.y,r+5,0,Math.PI*2),e.strokeStyle=q.selectedRing,e.lineWidth=2,e.stroke()),t.txCount>1&&(e.beginPath(),e.arc(t.x+r*.65,t.y-r*.65,3,0,Math.PI*2),e.fillStyle="#f59e0b",e.fill()),e.globalAlpha=1}function Zo(e,t,n){const r=e.createLinearGradient(0,0,60,0);r.addColorStop(0,q.bg),r.addColorStop(1,"rgba(10, 14, 26, 0)"),e.fillStyle=r,e.fillRect(0,0,60,n);const s=e.createLinearGradient(t-60,0,t,0);s.addColorStop(0,"rgba(10, 14, 26, 0)"),s.addColorStop(1,q.bg),e.fillStyle=s,e.fillRect(t-60,0,60,n);const o=e.createLinearGradient(0,0,0,40);o.addColorStop(0,q.bg),o.addColorStop(1,"rgba(10, 14, 26, 0)"),e.fillStyle=o,e.fillRect(0,0,t,40);const i=e.createLinearGradient(0,n-40,0,n);i.addColorStop(0,"rgba(10, 14, 26, 0)"),i.addColorStop(1,q.bg),e.fillStyle=i,e.fillRect(0,n-40,t,40)}function zt(e,t,n,r){const s=(t-r.offsetX)/r.zoom,o=(n-r.offsetY)/r.zoom;for(let i=e.length-1;i>=0;i--){const l=e[i],a=s-l.x,c=o-l.y;if(a*a+c*c<Wt*Wt*2.25)return l}return null}function Jo(e){return{offsetX:100,offsetY:0,zoom:1,isDragging:!1,lastMouseX:0,lastMouseY:0}}function Qo(e,t){const n=t.deltaY>0?.92:1.08,r=Math.max(.3,Math.min(3,e.zoom*n)),s=t.offsetX,o=t.offsetY,i=r/e.zoom,l=s-(s-e.offsetX)*i,a=o-(o-e.offsetY)*i;return{...e,zoom:r,offsetX:l,offsetY:a}}function ei(e,t){return{...e,isDragging:!0,lastMouseX:t.clientX,lastMouseY:t.clientY}}function ti(e,t){if(!e.isDragging)return e;const n=t.clientX-e.lastMouseX,r=t.clientY-e.lastMouseY;return{...e,offsetX:e.offsetX+n,offsetY:e.offsetY+r,lastMouseX:t.clientX,lastMouseY:t.clientY}}function ni(e){return{...e,isDragging:!1}}var ri=N('<div class="relative flex-1 overflow-hidden"><canvas class="block w-full h-full touch-none" style="cursor: grab;" aria-label="Kaspa BlockDAG visualization. Pan to scroll, scroll to zoom, click blocks to inspect." role="img"></canvas> <div class="absolute top-3 right-3 flex gap-2"><button class="px-3 py-1.5 text-[11px] rounded bg-surface/80 backdrop-blur border border-border text-text-dim hover:text-text transition-colors cursor-pointer"> </button></div> <div class="absolute bottom-3 left-3 text-[10px] text-text-dim font-mono bg-surface/60 backdrop-blur px-2 py-1 rounded"> </div></div>');function si(e,t){lt(t,!1);const n=()=>Q(Nn,"$blocks",i),r=()=>Q(Ut,"$blockMap",i),s=()=>Q(xt,"$autoFollow",i),o=()=>Q(Yn,"$selectedBlock",i),[i,l]=dt();let a=qt(),c=qt(),u,h=800,f=600,p=1,d,w=null,v,b=0;Jr(()=>{u=_(a).getContext("2d"),p=window.devicePixelRatio||1,d=Jo();const g=new ResizeObserver(I=>{const Y=I[0];h=Y.contentRect.width,f=Y.contentRect.height,mt(a,_(a).width=h*p),mt(a,_(a).height=f*p),mt(a,_(a).style.width=h+"px"),mt(a,_(a).style.height=f+"px")});g.observe(_(c));function A(I){const Y=b?I-b:16;b=I;const P=n(),$e=r(),He={height:f,offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom};if(Lo(P,He),jo(P,Y),s()&&P.length>0){const on=-Go(P)*d.zoom+h*.7;d.offsetX+=(on-d.offsetX)*.05}u.save(),u.scale(p,p);const Ge={offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom,selectedHash:o()?.hash??null,hoveredHash:w};Ko(u,P,$e,Ge,h,f),u.restore(),v=requestAnimationFrame(A)}return v=requestAnimationFrame(A),()=>{cancelAnimationFrame(v),g.disconnect()}});function X(g){g.preventDefault(),d=Qo(d,g),xt.set(!1)}function z(g){d=ei(d,g),xt.set(!1)}function C(g){if(d.isDragging)d=ti(d,g);else{const A=_(a).getBoundingClientRect(),I=g.clientX-A.left,Y=g.clientY-A.top,P=zt(n(),I,Y,{offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom});w=P?.hash??null,mt(a,_(a).style.cursor=P?"pointer":d.isDragging?"grabbing":"grab")}}function B(g){if(d.isDragging&&Math.abs(g.clientX-d.lastMouseX)<3&&Math.abs(g.clientY-d.lastMouseY)<3){const A=_(a).getBoundingClientRect(),I=g.clientX-A.left,Y=g.clientY-A.top,P=zt(n(),I,Y,{offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom});At(P)}d=ni(d)}function L(g){const A=_(a).getBoundingClientRect(),I=g.clientX-A.left,Y=g.clientY-A.top,P=zt(n(),I,Y,{offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom});At(P)}let S=0,k=0,T=0,j=0,Re=!1;function $t(g){const A=g.touches[0],I=g.touches[1],Y=I.clientX-A.clientX,P=I.clientY-A.clientY;return Math.sqrt(Y*Y+P*P)}function Ht(g){return g.touches.length>=2?{x:(g.touches[0].clientX+g.touches[1].clientX)/2,y:(g.touches[0].clientY+g.touches[1].clientY)/2}:{x:g.touches[0].clientX,y:g.touches[0].clientY}}function tn(g){g.preventDefault(),g.touches.length===1?(S=Date.now(),k=g.touches[0].clientX,T=g.touches[0].clientY,Re=!1,d={...d,isDragging:!0,lastMouseX:g.touches[0].clientX,lastMouseY:g.touches[0].clientY},xt.set(!1)):g.touches.length===2&&(j=$t(g),Re=!0)}function nn(g){if(g.preventDefault(),g.touches.length===1&&d.isDragging){const A=g.touches[0].clientX-d.lastMouseX,I=g.touches[0].clientY-d.lastMouseY;(Math.abs(g.touches[0].clientX-k)>5||Math.abs(g.touches[0].clientY-T)>5)&&(Re=!0),d={...d,offsetX:d.offsetX+A,offsetY:d.offsetY+I,lastMouseX:g.touches[0].clientX,lastMouseY:g.touches[0].clientY}}else if(g.touches.length===2){const A=$t(g);if(j>0){const I=A/j,Y=Math.max(.3,Math.min(3,d.zoom*I)),P=Ht(g),$e=_(a).getBoundingClientRect(),He=P.x-$e.left,Ge=P.y-$e.top,_t=Y/d.zoom;d={...d,zoom:Y,offsetX:He-(He-d.offsetX)*_t,offsetY:Ge-(Ge-d.offsetY)*_t}}j=A,Re=!0}}function Xt(g){if(g.preventDefault(),!Re&&Date.now()-S<300){const A=_(a).getBoundingClientRect(),I=k-A.left,Y=T-A.top,P=zt(n(),I,Y,{offsetX:d.offsetX,offsetY:d.offsetY,zoom:d.zoom});At(P)}d={...d,isDragging:!1},j=0}function rn(){xt.set(!0),d.zoom=1,d.offsetY=0}So();var ht=ri(),te=m(ht);te.__mousedown=z,te.__mousemove=C,te.__mouseup=B,te.__click=L,te.__touchstart=tn,te.__touchmove=nn,te.__touchend=Xt,Qn(te,g=>R(a,g),()=>_(a));var vt=x(te,2),pt=m(vt);pt.__click=rn;var Yt=m(pt),Nt=x(vt,2),sn=m(Nt);Qn(ht,g=>R(c,g),()=>_(c)),ce(()=>{et(pt,"aria-label",s()?"Currently following new blocks":"Click to auto-follow new blocks"),F(Yt,s()?"Following":"Auto-follow"),F(sn,`${n().length??""} blocks visible`)}),lo("wheel",te,X),M(e,ht),ct(),l()}Hn(["mousedown","mousemove","mouseup","click","touchstart","touchmove","touchend"]);let or=912e5,ir=915e5;function oi(){const e="0123456789abcdef";let t="";for(let n=0;n<64;n++)t+=e[Math.floor(Math.random()*16)];return t}const yt=[];function ii(){const e=oi(),t=Math.min(yt.length,Math.floor(Math.random()*3)+1),n=[],r=[...yt];for(let o=0;o<t&&r.length>0;o++){const i=Math.floor(Math.random()*Math.min(r.length,5));n.push(r.splice(i,1)[0])}yt.push(e),yt.length>20&&yt.shift(),or++,ir++;const s=Math.random()>.15;return{hash:e,parentHashes:n,blueScore:or,daaScore:ir,timestamp:Date.now(),txCount:Math.floor(Math.random()*5),isBlue:s,x:0,y:0,targetX:0,targetY:0,opacity:0,scale:.5,glowIntensity:1,addedAt:performance.now()}}class ai{interval=null;callback=null;start(t){this.callback=t,this.interval=setInterval(()=>{this.callback&&this.callback(ii())},100)}stop(){this.interval&&(clearInterval(this.interval),this.interval=null)}}const Xe="https://api.kaspa.org";class li{mockStream=null;blockCallbacks=[];statsCallbacks=[];stateCallbacks=[];_state="disconnected";pollInterval=null;statsInterval=null;useMock=!1;seenHashes=new Set;lastBlueScore=0;get state(){return this._state}onBlock(t){this.blockCallbacks.push(t)}onStats(t){this.statsCallbacks.push(t)}onStateChange(t){this.stateCallbacks.push(t)}setState(t){this._state=t,this.stateCallbacks.forEach(n=>n(t))}async connect(){this.setState("connecting");try{const t=await fetch(`${Xe}/info/virtual-chain-blue-score`);if(!t.ok)throw new Error(`API returned ${t.status}`);const n=await t.json();this.lastBlueScore=Number(n.blueScore),this.setState("connected"),console.log("[KaspaClient] Connected to REST API, blueScore:",this.lastBlueScore),this.startBlockPolling(),this.startStatsPolling()}catch(t){console.warn("[KaspaClient] REST API failed, falling back to mock:",t),this.startMock()}}async startBlockPolling(){await this.fetchRecentBlocks(),this.pollInterval=setInterval(()=>this.fetchRecentBlocks(),1e3)}async fetchRecentBlocks(){try{const t=await fetch(`${Xe}/info/blockdag`);if(!t.ok)return;const n=await t.json(),r=n.tipHashes||[],s=Number(n.virtualDaaScore||0),i=r.filter(c=>!this.seenHashes.has(c)).slice(0,10),l=[];for(const c of i){const u=await this.fetchAndEmitBlock(c);l.push(...u)}const a=l.filter(c=>!this.seenHashes.has(c)).slice(0,10);for(const c of a)await this.fetchAndEmitBlock(c);if(this.seenHashes.size>300){const c=this.seenHashes.values();for(let u=0;u<100;u++)this.seenHashes.delete(c.next().value)}s>0&&this.statsCallbacks.forEach(c=>c({daaScore:s}))}catch(t){console.warn("[KaspaClient] Block poll failed:",t)}}async fetchAndEmitBlock(t){if(this.seenHashes.has(t))return[];try{const n=await fetch(`${Xe}/blocks/${t}`);if(!n.ok)return[];const r=await n.json(),s=this.parseRestBlock(r);return s?(this.seenHashes.add(s.hash),this.blockCallbacks.forEach(o=>o(s)),this.statsCallbacks.forEach(o=>o({blocksSeen:this.seenHashes.size})),s.parentHashes):[]}catch{return[]}}parseRestBlock(t){try{const n=t.verboseData?.hash||"";if(!n)return null;const r=[];if(t.parents)for(const u of t.parents)Array.isArray(u.parentHashes)&&r.push(...u.parentHashes);const s=Number(t.verboseData?.blueScore||0),o=Number(t.header?.daaScore||0),i=Number(t.header?.timestamp||Date.now()),l=t.transactions?.length||0,c=(t.verboseData?.mergeSetBluesHashes||[]).length>0||Math.random()>.15;return{hash:n,parentHashes:r,blueScore:s,daaScore:o,timestamp:i,txCount:l,isBlue:c,x:0,y:0,targetX:0,targetY:0,opacity:0,scale:.5,glowIntensity:1,addedAt:performance.now()}}catch{return null}}async startStatsPolling(){const t=async()=>{try{const[n,r,s]=await Promise.allSettled([fetch(`${Xe}/info/virtual-chain-blue-score`),fetch(`${Xe}/info/hashrate?stringOnly=false`),fetch(`${Xe}/info/blockdag`)]),o={isConnected:!0,isSynced:!0};if(n.status==="fulfilled"&&n.value.ok){const i=await n.value.json();o.blueScore=Number(i.blueScore||0)}if(r.status==="fulfilled"&&r.value.ok){const i=await r.value.json(),l=Number(i.hashrate||0);l>=1e6?o.hashrate=(l/1e6).toFixed(1)+" TH/s":l>=1e3?o.hashrate=(l/1e3).toFixed(1)+" GH/s":o.hashrate=l.toFixed(0)+" MH/s"}if(s.status==="fulfilled"&&s.value.ok){const i=await s.value.json(),l=Number(i.virtualDaaScore||0);l>0&&(o.daaScore=l)}this.statsCallbacks.forEach(i=>i(o))}catch(n){console.warn("[KaspaClient] Stats poll failed:",n)}};await t(),this.statsInterval=setInterval(t,5e3)}startMock(){this.useMock=!0,this.mockStream=new ai,this.mockStream.start(t=>{this.blockCallbacks.forEach(n=>n(t))}),this.setState("connected"),this.statsInterval=setInterval(()=>{const t=9+Math.random()*2;this.statsCallbacks.forEach(n=>n({blocksPerSecond:t,txPerSecond:t*.4,hashrate:(450+Math.random()*50).toFixed(1)+" TH/s",peerCount:180+Math.floor(Math.random()*40),isConnected:!0,isSynced:!0,serverVersion:"mock"}))},1e3)}async getBlockDetail(t){try{const n=await fetch(`${Xe}/blocks/${t}`);if(!n.ok)return null;const r=await n.json(),s=[];if(r.parents)for(const o of r.parents)Array.isArray(o.parentHashes)&&s.push(...o.parentHashes);return{hash:r.verboseData?.hash||t,parentHashes:s,blueScore:Number(r.verboseData?.blueScore||0),daaScore:Number(r.header?.daaScore||0),timestamp:Number(r.header?.timestamp||0),isBlue:!0,nonce:String(r.header?.nonce||"0"),bits:Number(r.header?.bits||0),version:Number(r.header?.version||0),transactions:(r.transactions||[]).map(o=>({id:o.verboseData?.transactionId||"unknown",inputs:o.inputs?.length||0,outputs:o.outputs?.length||0,amount:0}))}}catch(n){return console.warn("[KaspaClient] getBlockDetail failed:",n),null}}disconnect(){this.mockStream&&(this.mockStream.stop(),this.mockStream=null),this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null),this.statsInterval&&(clearInterval(this.statsInterval),this.statsInterval=null),this.setState("disconnected")}}const Ve=new li;var ci=N("<button> </button>"),fi=N('<div class="text-[10px] text-text-dim">Loading...</div>'),ui=N('<a target="_blank" rel="noopener" class="text-[10px] font-mono px-1.5 py-0.5 rounded bg-tx/10 text-tx hover:bg-tx/25 transition-colors no-underline"> <span class="text-text-dim"> </span></a>'),di=N('<div class="flex flex-wrap gap-1 max-h-16 overflow-y-auto"></div>'),hi=N('<div class="text-[10px] text-text-dim">Coinbase only</div>'),vi=N('<div class="min-h-44 max-h-64 bg-surface/80 backdrop-blur border-t border-border flex flex-col animate-fade-in overflow-hidden"><div class="flex items-center justify-between px-4 py-2 border-b border-border"><h3 class="text-xs font-semibold text-text-dim uppercase tracking-wider">Block Inspector</h3> <div class="flex items-center gap-3"><button class="text-[10px] text-accent hover:text-accent-glow transition-colors cursor-pointer bg-transparent border-none px-2 py-0.5 rounded border border-border hover:border-accent">View on Explorer &#8599;</button> <button aria-label="Close block inspector" class="text-text-dim hover:text-text transition-colors text-sm cursor-pointer p-1">&times;</button></div></div> <div class="flex-1 px-4 py-2 grid grid-cols-2 md:grid-cols-4 gap-3 overflow-y-auto"><div class="col-span-2"><div class="text-[10px] text-text-dim uppercase mb-0.5">Block Hash</div> <button class="text-xs font-mono text-accent hover:text-accent-glow transition-colors cursor-pointer bg-transparent border-none p-0" title="Click to copy full hash"> </button></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Blue Score</div> <div class="text-sm font-bold tabular-nums text-text"> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">DAA Score</div> <div class="text-sm font-bold tabular-nums text-text"> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Timestamp</div> <div class="text-sm font-mono text-text"> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Transactions</div> <div> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Type</div> <div> </div></div> <div><div class="text-[10px] text-text-dim uppercase mb-0.5">Nonce</div> <div class="text-sm font-mono text-text-dim"><!></div></div> <div class="col-span-2"><div class="text-[10px] text-text-dim uppercase mb-0.5"> </div> <div class="flex flex-wrap gap-1"></div></div> <div class="col-span-2"><div class="text-[10px] text-text-dim uppercase mb-0.5">Transaction IDs</div> <!></div></div></div>');function pi(e,t){lt(t,!0);const n=()=>Q(Yn,"$selectedBlock",o),r=()=>Q(Ut,"$blockMap",o),s=()=>Q(Qr,"$showInspector",o),[o,i]=dt();let l=re(null),a=re(!1);Bt(()=>{const v=n();v?(R(a,!0),R(l,null),Ve.getBlockDetail(v.hash).then(b=>{R(l,b,!0),R(a,!1)}).catch(()=>{R(a,!1)})):R(l,null)});function c(){At(null)}function u(){n()&&navigator.clipboard.writeText(n().hash)}function h(v){const b=r().get(v);b&&At(b)}function f(){n()&&window.open(`https://explorer.kaspa.org/blocks/${n().hash}`,"_blank")}var p=Gt(),d=Lt(p);{var w=v=>{var b=vi(),X=m(b),z=x(m(X),2),C=m(z);C.__click=f;var B=x(C,2);B.__click=c;var L=x(X,2),S=m(L),k=x(m(S),2);k.__click=u;var T=m(k),j=x(S,2),Re=x(m(j),2),$t=m(Re),Ht=x(j,2),tn=x(m(Ht),2),nn=m(tn),Xt=x(Ht,2),rn=x(m(Xt),2),ht=m(rn),te=x(Xt,2),vt=x(m(te),2),pt=m(vt),Yt=x(te,2),Nt=x(m(Yt),2),sn=m(Nt),g=x(Yt,2),A=x(m(g),2),I=m(A);{var Y=G=>{var W=an("...");M(G,W)},P=G=>{var W=Gt(),Ae=Lt(W);{var oe=Z=>{var ye=an();ce(()=>F(ye,_(l).nonce)),M(Z,ye)},gt=Z=>{var ye=an("---");M(Z,ye)};me(Ae,Z=>{_(l)?Z(oe):Z(gt,!1)},!0)}M(G,W)};me(I,G=>{_(a)?G(Y):G(P,!1)})}var $e=x(g,2),He=m($e),Ge=m(He),_t=x(He,2);wn(_t,5,()=>n().parentHashes,Un,(G,W)=>{const Ae=ot(()=>r().has(_(W)));var oe=ci();oe.__click=()=>h(_(W));var gt=m(oe);ce(Z=>{Qe(oe,1,`text-[10px] font-mono px-1.5 py-0.5 rounded transition-colors cursor-pointer border-none ${_(Ae)?"bg-accent/15 text-accent hover:bg-accent/30":"bg-border/30 text-text-dim"}`),et(oe,"title",_(W)),oe.disabled=!_(Ae),F(gt,Z)},[()=>fn(_(W),6)]),M(G,oe)});var on=x($e,2),ts=x(m(on),2);{var ns=G=>{var W=fi();M(G,W)},rs=G=>{var W=Gt(),Ae=Lt(W);{var oe=Z=>{var ye=di();wn(ye,21,()=>_(l).transactions,Un,(ss,bt)=>{var Ft=ui(),On=m(Ft),os=x(On),is=m(os);ce(as=>{et(Ft,"href",`https://explorer.kaspa.org/txs/${_(bt).id??""}`),et(Ft,"title",_(bt).id),F(On,`${as??""} `),F(is,`(${_(bt).inputs??""}in/${_(bt).outputs??""}out)`)},[()=>fn(_(bt).id,6)]),M(ss,Ft)}),M(Z,ye)},gt=Z=>{var ye=hi();M(Z,ye)};me(Ae,Z=>{_(l)&&_(l).transactions.length>0?Z(oe):Z(gt,!1)},!0)}M(G,W)};me(ts,G=>{_(a)?G(ns):G(rs,!1)})}ce((G,W,Ae,oe)=>{F(T,G),F($t,W),F(nn,Ae),F(ht,oe),Qe(vt,1,`text-sm font-bold tabular-nums ${n().txCount>0?"text-tx":"text-text-dim"}`),F(pt,n().txCount),Qe(Nt,1,`text-sm font-bold ${n().isBlue?"text-accent":"text-block-red"}`),F(sn,n().isBlue?"Blue (GHOSTDAG)":"Red"),F(Ge,`Parents (${n().parentHashes.length??""})`)},[()=>fn(n().hash,16),()=>n().blueScore.toLocaleString(),()=>n().daaScore.toLocaleString(),()=>$o(n().timestamp)]),M(v,b)};me(d,v=>{s()&&n()&&v(w)})}M(e,p),ct(),i()}Hn(["click"]);var _i=N('<div class="h-10 bg-surface/60 backdrop-blur border-t border-border flex items-center justify-center gap-6 px-4"><span class="text-[10px] text-text-dim uppercase tracking-wider">Confirmation Speed</span> <div class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-accent"></div> <span class="text-xs font-bold text-accent tabular-nums"> </span></div> <div class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-purple-500/60"></div> <span class="text-xs text-text-dim tabular-nums">Ethereum: ~12s</span></div> <div class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-orange-500/60"></div> <span class="text-xs text-text-dim tabular-nums">Bitcoin: ~600s</span></div></div>');function gi(e,t){lt(t,!0);const n=()=>Q(en,"$blocksPerSecond",r),[r,s]=dt();let o=ot(()=>Math.max(.1,1/Math.max(1,n())).toFixed(2));var i=_i(),l=x(m(i),2),a=x(m(l),2),c=m(a);ce(()=>F(c,`Kaspa: ${_(o)??""}s`)),M(e,i),ct(),s()}var bi=N('<aside aria-label="Network statistics"><!></aside>'),mi=N('<div class="absolute inset-0 flex items-center justify-center bg-bg/80 backdrop-blur-sm z-10" role="status" aria-live="polite"><div class="text-center animate-fade-in"><div class="w-12 h-12 rounded-full border-2 border-accent border-t-transparent animate-spin mx-auto mb-4" aria-hidden="true"></div> <div class="text-text text-lg font-semibold">Connecting to Kaspa Network</div> <div class="text-text-dim text-sm mt-1">Fetching live BlockDAG data...</div></div></div>'),wi=N('<div class="w-full h-full flex flex-col bg-bg"><!> <div class="flex-1 flex min-h-0 relative"><!> <main class="flex-1 min-w-0"><!></main> <!></div> <!> <!></div>');function xi(e,t){lt(t,!0);const n=()=>Q(kn,"$connectionState",s),r=()=>Q(Nn,"$blocks",s),[s,o]=dt();let i=re(!0),l=re(!1);function a(){R(l,window.innerWidth<768),_(l)&&R(i,!1)}Jr(()=>{a(),window.addEventListener("resize",a),Ve.onBlock(T=>{Ro(T)}),Ve.onStats(T=>{cn(T)}),Ve.onStateChange(T=>{kn.set(T)});const S=en.subscribe(T=>cn({blocksPerSecond:T})),k=Fn.subscribe(T=>cn({txPerSecond:T}));return Ve.connect(),()=>{Ve.disconnect(),S(),k(),window.removeEventListener("resize",a)}});function c(){R(i,!_(i))}let u=ot(()=>n()==="connecting"||n()==="disconnected"),h=ot(()=>r().length>0);var f=wi(),p=m(f);Po(p,{get isMobile(){return _(l)},toggleStats:c,get showStats(){return _(i)}});var d=x(p,2),w=m(d);{var v=S=>{var k=bi(),T=m(k);Fo(T,{}),M(S,k)};me(w,S=>{_(i)&&S(v)})}var b=x(w,2),X=m(b);si(X,{});var z=x(b,2);{var C=S=>{var k=mi();M(S,k)};me(z,S=>{_(u)&&!_(h)&&S(C)})}var B=x(d,2);pi(B,{});var L=x(B,2);gi(L,{}),M(e,f),ct(),o()}fo(xi,{target:document.getElementById("app")});
